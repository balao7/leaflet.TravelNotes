/*! leaflet.Travel - version 0.1.0 - 2017-09-14 - Copyright 2015 2017 Christian Guyette - Contact: http//www.ouaie.be/ - This  program is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 3 of the License, or any later version.*/


!function t(e,o,n){function r(i,s){if(!o[i]){if(!e[i]){var l="function"==typeof require&&require;if(!s&&l)return l(i,!0);if(a)return a(i,!0);var d=new Error("Cannot find module '"+i+"'");throw d.code="MODULE_NOT_FOUND",d}var u=o[i]={exports:{}};e[i][0].call(u.exports,function(t){var o=e[i][1][t];return r(o||t)},u,u.exports,t,e,o,n)}return o[i].exports}for(var a="function"==typeof require&&require,i=0;i<n.length;i++)r(n[i]);return r}({1:[function(t,e,o){!function(){"use strict";void 0!==e&&e.exports&&(e.exports=function(e){var o=[],n=e,r=function(t){return o.findIndex(function(e){return e.objId===t})},a=function(t){if(!t.objType||!t.objType.name||t.objType.name!==n)throw"invalid object name for add function";o.push(t)},i=function(t){var e=r(t);return-1===e?null:o[e]},s=function(){o.reverse()},l=function(t){if(-1===r(t))throw"invalid objId for remove function";o.splice(r(t),1)},d=function(t,e){var n=r(t);if(-1===n)throw"invalid objId for replace function";o[n]=e},u=function(t){t?o.splice(1,o.length-2):o.length=0},c=function(t,e){var n=r(t);if(-1===n||0===n&&e||o.length-1===n&&!e)throw"invalid objId for swap function";var a=o[n];o[n]=o[n+(e?-1:1)],o[n+(e?-1:1)]=a},v=function(){var t=-1;return{get value(){return t<o.length?o[t]:null},get done(){return++t>=o.length},get first(){return 0===t},get last(){return t>=o.length-1}}},g=function(){return o[0]},p=function(){return o[o.length-1]},m=function(t){for(var e=null,o=v();!o.done;)e=t(o.value,e);return e},T=function(){for(var t=[],e=v();!e.done;)t.push(e.value.object);return t},f=function(e){o.length=0;for(var r,i=0;i<e.length;i++){switch(n){case"Route":r=t("./Route")();break;case"Note":r=t("./Note")();break;case"WayPoint":r=t("./WayPoint")();break;case"Maneuver":r=t("./Maneuver")();break;case"ItineraryPoint":r=t("./ItineraryPoint")();break;default:throw"invalid ObjName ( "+n+" ) in Collection._SetObject"}r.object=e[i],a(r)}};return{add:function(t){a(t)},getAt:function(t){return i(t)},reverse:function(){s()},remove:function(t){l(t)},replace:function(t,e){d(t,e)},removeAll:function(t){u(t)},swap:function(t,e){c(t,e)},forEach:function(t){return m(t)},get iterator(){return v()},get first(){return g()},get last(){return p()},get object(){return T()},set object(t){f(t)},get length(){return o.length}}})}()},{"./ItineraryPoint":4,"./Maneuver":5,"./Note":6,"./Route":9,"./WayPoint":11}],2:[function(t,e,o){(function(o){!function(){"use strict";void 0!==e&&e.exports&&(e.exports=function(){return{init:function(e){o.map=e,o.travelObjId=0,o.editedRoute=t("../Data/Route")(),o.editedRoute.routeChanged=!1,o.editedRoute.routeInitialObjId=-1,o.travel=t("../Data/Travel")(),o.mapObjects=new Map},get editedRoute(){return o.editedRoute},set editedRoute(t){o.editedRoute=t},get travel(){return o.travel},set travel(t){o.travel=t},get mapObjects(){return o.mapObjects},get map(){return o.map},getNoteAndRoute:function(t){var e=null;if(e=this.travel.notes.getAt(t))return{note:e,route:null};for(var o=this.travel.routes.iterator;!o.done;)if(e=o.value.notes.getAt(t))return{note:e,route:o.value};return(e=this.editedRoute.notes.getAt(t))?{note:e,route:this.editedRoute}:(console.log("Invalid noteObjId "+t+" for function DataManager.getNote ( )"),{note:null,route:null})},getRoute:function(t){var e=null;return(e=this.travel.routes.getAt(t))||t===this.editedRoute.objId&&(e=this.editedRoute),e||console.log("Invalid noteObjId "+t+" for function DataManager.getRoute ( )"),e}}})}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../Data/Route":9,"../Data/Travel":10}],3:[function(t,e,o){!function(){"use strict";var o=t("./ObjType")("Itinerary",t("../UI/Translator")().getText("Version"));void 0!==e&&e.exports&&(e.exports=function(){var e=t("./ObjId")(),n=t("./Collection")("ItineraryPoint"),r=t("./Collection")("Maneuver");return{get itineraryPoints(){return n},get maneuvers(){return r},get objId(){return e},get objType(){return o},get object(){return{itineraryPoints:n.object,maneuvers:r.object,objId:e,objType:o.object}},set object(a){a=o.validate(a),n.object=a.itineraryPoints||[],r.object=a.maneuvers||[],e=t("./ObjId")();for(var i=new Map,s=0,l=n.iterator;!l.done;)i.set(a.itineraryPoints[s].objId,l.value.objId),s++;for(var d=r.iterator;!d.done;)d.value.itineraryPointObjId=i.get(d.value.itineraryPointObjId)}}})}()},{"../UI/Translator":25,"./Collection":1,"./ObjId":7,"./ObjType":8}],4:[function(t,e,o){!function(){"use strict";var o=t("./ObjType")("ItineraryPoint",t("../UI/Translator")().getText("Version"));void 0!==e&&e.exports&&(e.exports=function(){var e=0,n=0,r=0,a=-1,i=-1,s=-1,l=t("./ObjId")();return{get lat(){return e},set lat(t){e=t},get lng(){return n},set lng(t){n=t},get latLng(){return[e,n]},set latLng(t){e=t[0],n=t[1]},get distance(){return r},set distance(t){r=t},get wayPointObjId(){return a},set wayPointObjId(t){a=t},get noteObjId(){return i},set noteObjId(t){i=t},get maneuverObjId(){return s},set maneuverObjId(t){s=t},get objId(){return l},get objType(){return o},get object(){return{lat:e,lng:n,distance:r,wayPointObjId:a,noteObjId:i,maneuverObjId:s,objId:l,objType:o.object}},set object(d){d=o.validate(d),e=d.lat||0,n=d.lng||0,r=d.distance||0,a=d.wayPointObjId||-1,i=d.noteObjId||-1,s=d.maneuverObjId||-1,l=t("./ObjId")()}}})}()},{"../UI/Translator":25,"./ObjId":7,"./ObjType":8}],5:[function(t,e,o){!function(){"use strict";var o=t("./ObjType")("Maneuver",t("../UI/Translator")().getText("Version"));void 0!==e&&e.exports&&(e.exports=function(){var e=t("./ObjId")(),n="",r="",a="",i="",s="",l=-1,d=0,u=0;return{get iconName(){return n},set iconName(t){n=t},get instruction(){return r},set instruction(t){r=t},get simplifiedInstruction(){return a},set simplifiedInstruction(t){a=t},get streetName(){return i},set streetName(t){i=t},get direction(){return s},set direction(t){s=t},get itineraryPointObjId(){return l},set itineraryPointObjId(t){l=t},get distance(){return d},set distance(t){d=t},get duration(){return u},set duration(t){u=t},get objId(){return e},get objType(){return o},get object(){return{iconName:n,instruction:r,simplifiedInstruction:a,streetName:i,direction:s,distance:d,duration:u,itineraryPointObjId:l,objId:e,objType:o.object}},set object(c){c=o.validate(c),n=c.iconName||"",r=c.instruction||"",a=c.simplifiedInstruction||"",i=c.streetName||"",s=c.direction||"",d=c.distance||0,u=c.duration||0,l=c.itineraryPointObjId||-1,e=t("./ObjId")()}}})}()},{"../UI/Translator":25,"./ObjId":7,"./ObjType":8}],6:[function(t,e,o){!function(){"use strict";var o=t("./ObjType")("Note",t("../UI/Translator")().getText("Version"));void 0!==e&&e.exports&&(e.exports=function(){var e=t("./ObjId")(),n=40,r=40,a="",i="",s="",l="",d="",u="",c="",v=0,g=0,p=0,m=0,T=-1;return{get isRouteNote(){return-1!==T},get iconHeight(){return n},set iconHeight(t){n=t},get iconWidth(){return r},set iconWidth(t){r=t},get iconContent(){return a},set iconContent(t){a=t},get popupContent(){return i},set popupContent(t){i=t},get tooltipContent(){return s},set tooltipContent(t){s=t},get phone(){return l},set phone(t){l=t},get url(){return d},set url(t){d=t},get address(){return u},set address(t){u=t},get categoryId(){return c},set categoryId(t){c=t},get iconLat(){return v},set iconLat(t){v=t},get iconLng(){return g},set iconLng(t){g=t},get iconLatLng(){return[v,g]},set iconLatLng(t){v=t[0],g=t[1]},get lat(){return p},set lat(t){p=t},get lng(){return m},set lng(t){m=t},get latLng(){return[p,m]},set latLng(t){p=t[0],m=t[1]},get distance(){return T},set distance(t){T=t},get objId(){return e},get objType(){return o},get object(){return{iconHeight:n,iconWidth:r,iconContent:a,popupContent:i,tooltipContent:s,phone:l,url:d,address:u,categoryId:c,iconLat:v,iconLng:g,lat:p,lng:m,distance:T,objId:e,objType:o.object}},set object(f){f=o.validate(f),n=f.iconHeight||40,r=f.iconWidth||40,a=f.iconContent||"",i=f.popupContent||"",s=f.tooltipContent||"",l=f.phone||"",d=f.url||"",u=f.address||"",c=f.categoryId||"",v=f.iconLat||0,g=f.iconLng||0,p=f.lat||0,m=f.lng||0,T=f.distance||-1,e=t("./ObjId")()}}})}()},{"../UI/Translator":25,"./ObjId":7,"./ObjType":8}],7:[function(t,e,o){(function(t){!function(){"use strict";void 0!==e&&e.exports&&(e.exports=function(){return++t.travelObjId})}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(t,e,o){!function(){"use strict";void 0!==e&&e.exports&&(e.exports=function(t,e){var o=t,n=e;return{get name(){return o},get version(){return n},get object(){return{name:o,version:n}},validate:function(t){if(!t.objType)throw"No objType for "+o;if(!t.objType.name)throw"No name for "+o;if(o!==t.objType.name)throw"Invalid name for "+o;if(!t.objType.version)throw"No version for "+o;if(n!==t.objType.version)throw"invalid version for "+o;if(!t.objId)throw"No objId for "+o;return t}}})}()},{}],9:[function(t,e,o){!function(){"use strict";var o=t("./ObjType")("Route",t("../UI/Translator")().getText("Version"));void 0!==e&&e.exports&&(e.exports=function(){var e="",n=t("./Collection")("WayPoint");n.add(t("./Waypoint")()),n.add(t("./Waypoint")());var r=t("./Collection")("Note"),a=t("./Itinerary")(),i=t("../util/Config")().route.width||5,s=t("../util/Config")().route.color||"#ff0000",l=!1,d=t("./ObjId")();return{get name(){return e},set name(t){e=t},get wayPoints(){return n},get notes(){return r},get itinerary(){return a},get width(){return i},set width(t){i=t},get color(){return s},set color(t){s=t},get chain(){return l},set chain(t){l=t},get objId(){return d},get objType(){return o},get object(){return{name:e,wayPoints:n.object,notes:r.object,itinerary:a.object,width:i,color:s,chain:l,objId:d,objType:o.object}},set object(u){u=o.validate(u),e=u.name||"",n.object=u.wayPoints||[],r.object=u.notes||[],a.object=u.itinerary||t("./Itinerary")().object,i=u.width||5,s=u.color||"#000000",l=u.chain||!1,d=t("./ObjId")()}}})}()},{"../UI/Translator":25,"../util/Config":46,"./Collection":1,"./Itinerary":3,"./ObjId":7,"./ObjType":8,"./Waypoint":12}],10:[function(t,e,o){!function(){"use strict";var o=t("./ObjType")("Travel",t("../UI/Translator")().getText("Version")),n="TravelNotes.trv",r=t("./Collection")("Route");r.add(t("./Route")());var a=t("./Collection")("Note"),i=-1;void 0!==e&&e.exports&&(e.exports=function(){return{get name(){return n},set name(t){n=t},get routes(){return r},get notes(){return a},get objId(){return i},get objType(){return o},get object(){return{name:n,routes:r.object,notes:a.object,objId:i,objType:o.object}},set object(e){e=o.validate(e),n=e.name||"",r.object=e.routes||[],a.object=e.notes||[],i=t("./ObjId")()},toString:function(){return this.object}}})}()},{"../UI/Translator":25,"./Collection":1,"./ObjId":7,"./ObjType":8,"./Route":9}],11:[function(t,e,o){!function(){"use strict";var o=t("./ObjType")("WayPoint",t("../UI/Translator")().getText("Version"));void 0!==e&&e.exports&&(e.exports=function(){var e="",n=0,r=0,a=t("./ObjId")();return{get name(){return e},set name(t){e=t},get UIName(){return""!==e?e:0!==n&&0!==r?n.toFixed(6)+(0<n?" N - ":" S - ")+r.toFixed(6)+(0<r?" E":" W"):""},get lat(){return n},set lat(t){n=t},get lng(){return r},set lng(t){r=t},get latLng(){return[n,r]},set latLng(t){n=t[0],r=t[1]},get objId(){return a},get objType(){return o},get object(){return{name:e,lat:n,lng:r,objId:a,objType:o.object}},set object(i){i=o.validate(i),e=i.name||"",n=i.lat||0,r=i.lng||0,a=t("./ObjId")()}}})}()},{"../UI/Translator":25,"./ObjId":7,"./ObjType":8}],12:[function(t,e,o){arguments[4][11][0].apply(o,arguments)},{"../UI/Translator":25,"./ObjId":7,"./ObjType":8,dup:11}],13:[function(t,e,o){!function(){"use strict";L.TravelNotes=L.TravelNotes||{},L.travelNotes=L.travelNotes||{},L.TravelNotes.Control=L.Control.extend({options:{position:"topright"},initialize:function(t){L.Util.setOptions(this,t)},onAdd:function(e){return t("./UI/UserInterface")().UI}}),L.travelNotes.control=function(t){return new L.TravelNotes.Control(t)},void 0!==e&&e.exports&&(e.exports=L.travelNotes.control)}()},{"./UI/UserInterface":27}],14:[function(t,e,o){(function(o){!function(){"use strict";L.TravelNotes=L.TravelNotes||{},L.travelNotes=L.travelNotes||{};var n=[],r=[],a=!1,i=!1,s=t("./data/DataManager")();L.TravelNotes.getInterface=function(){var l=function(e){t("./UI/ContextMenu")(e,t("./core/RouteEditor")().getMapContextMenu([e.latlng.lat,e.latlng.lng]).concat(t("./core/NoteEditor")().getMapContextMenu([e.latlng.lat,e.latlng.lng])).concat(n))},d=function(e){t("./UI/ContextMenu")(e,t("./core/RouteEditor")().getMapContextMenu([e.latlng.lat,e.latlng.lng]).concat(t("./core/NoteEditor")().getMapContextMenu([e.latlng.lat,e.latlng.lng])).concat(r))};return{addControl:function(o,n,r){s.init(o),t("./util/Utilities")().readURL(),n?document.getElementById(n).appendChild(t("./UI/UserInterface")().UI):void 0!==e&&e.exports&&o.addControl(t("./L.TravelNotes.Control")(r)),t("./UI/TravelEditorUI")().setRoutesList(s.travel.routes)},addMapContextMenu:function(t,e){t&&s.map.on("click",l),e&&s.map.on("contextmenu",l)},get rightContextMenu(){return a},set rightContextMenu(t){t&&!a?(s.map.on("contextmenu",d),a=!0):!t&&a&&(s.map.off("contextmenu",d),a=!1)},get leftContextMenu(){return i},set leftContextMenu(t){t&&!i?(s.map.on("click",l),i=!0):!t&&i&&(s.map.off("click",l),i=!1)},get leftUserContextMenu(){return n},set leftUserContextMenu(t){n=t},get rightUserContextMenu(){return r},set rightUserContextMenu(t){r=t},addProvider:function(t){o.providers||(o.providers=new Map),o.providers.set(t.name.toLowerCase(),t),console.log(t.name+" loaded")},get maneuver(){return t("./data/Maneuver")()},get itineraryPoint(){return t("./data/ItineraryPoint")()},get version(){return"1.0.0"}}},L.travelNotes.interface=function(){return L.TravelNotes.getInterface()},void 0!==e&&e.exports&&(e.exports=L.travelNotes.interface)}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./L.TravelNotes.Control":13,"./UI/ContextMenu":17,"./UI/TravelEditorUI":26,"./UI/UserInterface":27,"./core/NoteEditor":31,"./core/RouteEditor":32,"./data/DataManager":36,"./data/ItineraryPoint":38,"./data/Maneuver":39,"./util/Utilities":48}],15:[function(t,e,o){!function(){"use strict";var o=t("../UI/Translator")(),n=null,r=function(t){"Escape"!==t.key&&"Esc"!==t.key||(document.removeEventListener("keydown",r,!0),document.getElementsByTagName("body")[0].removeChild(document.getElementById("TravelNotes-BaseDialog-BackgroundDiv")))};void 0!==e&&e.exports&&(e.exports=function(){n=null;var e=t("../data/ObjId")(),a=t("./HTMLElementsFactory")(),i=document.getElementsByTagName("body")[0],s=a.create("div",{id:"TravelNotes-BaseDialog-BackgroundDiv",className:"TravelNotes-BaseDialog-BackgroundDiv"},i);s.addEventListener("dragover",function(t){},!1),s.addEventListener("drop",function(t){},!1);var l=s.clientWidth,d=s.clientHeight,u=0,c=0,v=0,g=0,p=a.create("div",{id:"TravelNotes-BaseDialog-Container-"+e,className:"TravelNotes-BaseDialog-Container"},s),m=a.create("div",{id:"TravelNotes-BaseDialog-TopBar",className:"TravelNotes-BaseDialog-TopBar",draggable:!0},p);a.create("div",{innerHTML:"&#x274c",id:"TravelNotes-BaseDialog-CancelButton",title:o.getText("DialogBase - close")},m).addEventListener("click",function(){document.removeEventListener("keydown",r,!0),document.getElementsByTagName("body")[0].removeChild(s)},!1),m.addEventListener("dragstart",function(t){try{t.dataTransfer.setData("Text","1")}catch(t){}u=t.screenX,c=t.screenY},!1),m.addEventListener("dragend",function(t){v+=t.screenX-u,g+=t.screenY-c,v=Math.min(Math.max(v,20),l-p.clientWidth-20),g=Math.max(g,20);var e=d-Math.max(g,0)-20;p.setAttribute("style","top:"+g+"px;left:"+v+"px;max-height:"+e+"px;")},!1);var T=a.create("div",{className:"TravelNotes-BaseDialog-HeaderDiv"},p),f=a.create("div",{className:"TravelNotes-BaseDialog-ContentDiv"},p),N=(a.create("div",{className:"TravelNotes-BaseDialog-ErrorDiv TravelNotes-BaseDialog-ErrorDivHidden",id:"TravelNotes-BaseDialog-ErrorDiv"},p),a.create("div",{className:"TravelNotes-BaseDialog-FooterDiv"},p));return a.create("div",{innerHTML:"&#x1f4be;",id:"TravelNotes-BaseDialog-OkButton",className:"TravelNotes-BaseDialog-Button"},N).addEventListener("click",function(){n&&!n()||(document.removeEventListener("keydown",r,!0),document.getElementsByTagName("body")[0].removeChild(s))},!1),document.addEventListener("keydown",r,!0),{addClickOkButtonEventListener:function(t){n=t},get title(){return T.innerHTML},set title(t){T.innerHTML=t},center:function(){v=(l-p.clientWidth)/2,g=(d-p.clientHeight)/2,v=Math.min(Math.max(v,20),l-p.clientWidth-20),g=Math.max(g,20);var t=d-Math.max(g,0)-20;p.setAttribute("style","top:"+g+"px;left:"+v+"px;max-height:"+t+"px;")},get header(){return T},set header(t){T=t},get content(){return f},set content(t){f=t},get footer(){return N},set footer(t){N=t}}})}()},{"../UI/Translator":25,"../data/ObjId":41,"./HTMLElementsFactory":19}],16:[function(t,e,o){!function(){"use strict";var o=t("../UI/Translator")(),n=function(){return console.log("onOkButtonClick - colorDialog"),!0};void 0!==e&&e.exports&&(e.exports=function(e){var r=function(t){return{r:parseInt(t.substr(1,2),16),g:parseInt(t.substr(3,2),16),b:parseInt(t.substr(5,2),16)}},a=function(t,e,o){return"#"+parseInt(t).toString(16).padStart(2,"0")+parseInt(e).toString(16).padStart(2,"0")+parseInt(o).toString(16).padStart(2,"0")},i=e,s=t("./HTMLElementsFactory")(),l=t("../UI/BaseDialog")();l.title=o.getText("ColorDialog - Title"),l.addClickOkButtonEventListener(n),l.getNewColor=function(){return i};for(var d=s.create("div",{className:"TravelNotes-ColorDialog-ColorDiv",id:"TravelNotes-ColorDialog-ColorDiv"},l.content),u=s.create("div",{className:"TravelNotes-ColorDialog-ButtonsDiv",id:"TravelNotes-ColorDialog-ButtonsDiv"},d),c=255,v=255,g=255,p=0;++p<8;){var m=s.create("div",{className:"TravelNotes-ColorDialog-RowColorDiv",id:"TravelNotes-ColorDialog-RowColorDiv"+p},u),T=0;for(v=255;++T<7;){var f=s.create("div",{className:"TravelNotes-ColorDialog-CellColorDiv",id:"TravelNotes-ColorDialog-CellColorDiv"+p+T},m);if(p<7)f.setAttribute("style","background-color:"+a(c,v,g)),f.colorValue=a(c,v,g),f.addEventListener("click",function(t){i=t.target.colorValue;var e=r(i);b.value=e.r,h.value=e.g,y.value=e.b,document.getElementById("TravelNotes-ColorDialog-ColorSampleDiv").setAttribute("style","background-color:"+t.target.colorValue+";")},!1),v-=51;else{var N=a(255,c=51*(T-1),c);f.setAttribute("style","background-color:"+N),f.redValue=255-c,f.addEventListener("click",function(t){for(var e=t.target.redValue,o=255,n=255,r=0;++r<7;){var i=0;for(o=255;++i<7;){var s=document.getElementById("TravelNotes-ColorDialog-CellColorDiv"+r+i);s.colorValue=a(e,o,n),s.setAttribute("style","background-color:"+a(e,o,n)),o-=51}n-=51}},!1)}}g-=51}var I=s.create("div",{className:"TravelNotes-ColorDialog-DataDiv",id:"TravelNotes-ColorDialog-DataDiv"},d),E=function(){i=a(b.value,h.value,y.value),document.getElementById("TravelNotes-ColorDialog-ColorSampleDiv").setAttribute("style","background-color:"+i+";")};s.create("text",{data:o.getText("ColorDialog - red")},I);var b=s.create("input",{type:"number",className:"TravelNotes-ColorDialog-NumberInput",id:"TravelNotes-ColorDialog-RedInput"},I);b.value=r(e).r,b.min=0,b.max=255,b.addEventListener("input",E,!1),s.create("text",{data:o.getText("ColorDialog - green")},I);var h=s.create("input",{type:"number",className:"TravelNotes-ColorDialog-NumberInput",id:"TravelNotes-ColorDialog-GreenInput"},I);h.value=r(e).g,h.min=0,h.max=255,h.addEventListener("input",E,!1),s.create("text",{data:o.getText("ColorDialog - blue")},I);var y=s.create("input",{type:"number",className:"TravelNotes-ColorDialog-NumberInput",id:"TravelNotes-ColorDialog-BlueInput"},I);return y.value=r(e).b,y.min=0,y.max=255,y.addEventListener("input",E,!1),s.create("div",{className:"TravelNotes-ColorDialog-DataDiv",id:"TravelNotes-ColorDialog-ColorSampleDiv"},d).setAttribute("style","background-color:"+e+";"),l.center(),l})}()},{"../UI/BaseDialog":15,"../UI/Translator":25,"./HTMLElementsFactory":19}],17:[function(t,e,o){!function(){"use strict";var o=t("./Translator")(),n=[],r=null,a=null,i=0,s=0,l=0,d=function(){document.removeEventListener("keydown",u,!0),document.removeEventListener("keypress",c,!0),document.removeEventListener("keyup",v,!0);var t=r.childNodes;t[0].firstChild.removeEventListener("click",d,!1);for(var e=1;e<t.length;e++)t[e].firstChild.removeEventListener("click",d,!1);document.getElementsByTagName("body")[0].removeChild(r),r=null},u=function(t){r&&(t.preventDefault(),t.stopPropagation()),"Escape"!==t.key&&"Esc"!==t.key||d(),"ArrowDown"!==t.key&&"ArrowRight"!==t.key&&"Tab"!==t.key||(++i>n.length&&(i=1),r.childNodes[i].firstChild.focus()),"ArrowUp"!==t.key&&"ArrowLeft"!==t.key||(--i<1&&(i=n.length),r.childNodes[i].firstChild.focus()),"Home"===t.key&&(i=1,r.childNodes[i].firstChild.focus()),"End"===t.key&&(i=n.length,r.childNodes[i].firstChild.focus()),"Enter"===t.key&&i>0&&n[i-1].action&&(n[i-1].action(),d())},c=function(t){t.preventDefault(),t.stopPropagation()},v=function(t){t.preventDefault(),t.stopPropagation()},g=function(t){t.stopPropagation(),n[t.target.menuItem].param?n[t.target.menuItem].action.call(n[t.target.menuItem].context,n[t.target.menuItem].param,a):n[t.target.menuItem].action.call(n[t.target.menuItem].context,a),s=0,l=0,d()};void 0!==e&&e.exports&&(e.exports=function(e,i){if(e.latlng.lat===s&&e.latlng.lng===l)return s=0,void(l=0);if(s=e.latlng.lat,l=e.latlng.lng,a=e,r)d();else{n=i;var p=t("./HTMLElementsFactory")(),m=document.getElementsByTagName("body")[0],T=p.create("div",{className:"TravelNotes-ContextMenu-Panel"},m),f=T.clientWidth,N=T.clientHeight;m.removeChild(T),r=p.create("div",{id:"TravelNotes-ContextMenu-Container",className:"TravelNotes-ContextMenu-Container"},m),p.create("div",{innerHTML:"&#x274c",className:"TravelNotes-ContextMenu-CloseButton",title:o.getText("ContextMenu - close")},r).addEventListener("click",d,!1);for(var I=0;I<n.length;I++){var E=p.create("div",{className:"TravelNotes-ContextMenu-ItemContainer"},r),b=p.create("button",{innerHTML:n[I].name,id:"TravelNotes-ContextMenu-Item"+I,className:n[I].action?"TravelNotes-ContextMenu-Item":"TravelNotes-ContextMenu-Item TravelNotes-ContextMenu-ItemDisabled"},E);n[I].action&&b.addEventListener("click",g,!1),b.menuItem=I}var h=Math.min(e.originalEvent.clientY,N-r.clientHeight-20),y=Math.min(e.originalEvent.clientX,f-r.clientWidth-20);r.setAttribute("style","top:"+h+"px;left:"+y+"px;"),document.addEventListener("keydown",u,!0),document.addEventListener("keypress",c,!0),document.addEventListener("keyup",v,!0)}})}()},{"./HTMLElementsFactory":19,"./Translator":25}],18:[function(t,e,o){!function(){"use strict";var o=t("./Translator")(),n=function(t){if(t.stopPropagation(),document.getElementById("TravelNotes-Control-ErrorDataDiv").innerHTML.length){document.getElementById("TravelNotes-Control-ErrorDataDiv").classList.toggle("TravelNotes-Control-HiddenList");var e=document.getElementById("TravelNotes-Control-ErrorDataDiv").classList.contains("TravelNotes-Control-HiddenList");document.getElementById("TravelNotes-Control-ErrorExpandButton").innerHTML=e?"&#x25b6;":"&#x25b2;",document.getElementById("TravelNotes-Control-ErrorExpandButton").title=e?o.getText("ErrorEditorUI - Show"):o.getText("ErrorEditorUI - Hide")}};void 0!==e&&e.exports&&(e.exports=function(){var e=function(e){if(!document.getElementById("TravelNotes-Control-ErrorDataDiv")){var r=t("./HTMLElementsFactory")();r.create("div",{id:"TravelNotes-Control-ErrorDataDiv",className:"TravelNotes-Control-DataDiv TravelNotes-Control-HiddenList"},e);var a=r.create("div",{id:"TravelNotes-Control-ErrorHeaderDiv",className:"TravelNotes-Control-HeaderDiv"},e);r.create("span",{innerHTML:"&#x25b6;",title:o.getText("ErrorEditorUI - Show"),id:"TravelNotes-Control-ErrorExpandButton",className:"TravelNotes-Control-ExpandButton"},a).addEventListener("click",n,!1),r.create("span",{innerHTML:"Erreurs&nbsp;:",id:"TravelNotes-Control-ErrorHeaderText",className:"TravelNotes-Control-HeaderText"},a)}},r=function(){document.getElementById("TravelNotes-Control-ErrorExpandButton").innerHTML="&#x25b2;",document.getElementById("TravelNotes-Control-ErrorExpandButton").title=o.getText("ErrorEditorUI - Hide"),document.getElementById("TravelNotes-Control-ErrorDataDiv").classList.remove("TravelNotes-Control-HiddenList")},a=function(){document.getElementById("TravelNotes-Control-ErrorExpandButton").innerHTML="&#x25b6;",document.getElementById("TravelNotes-Control-ErrorExpandButton").title=o.getText("ErrorEditorUI - Show"),document.getElementById("TravelNotes-Control-ErrorDataDiv").add("TravelNotes-Control-HiddenList")};return{createUI:function(t){e(t)},expand:function(){r()},reduce:function(){a()},set message(t){document.getElementById("TravelNotes-Control-ErrorDataDiv").innerHTML=t},get message(){return document.getElementById("TravelNotes-Control-ErrorDataDiv").innerHTML}}})}()},{"./HTMLElementsFactory":19,"./Translator":25}],19:[function(t,e,o){!function(){"use strict";var t=function(){return{create:function(t,e,o){var n;if(n="text"===t.toLowerCase()?document.createTextNode(""):document.createElement(t),o&&o.appendChild(n),e)for(var r in e)try{n[r]=e[r]}catch(t){console.log("Invalid property : "+r)}return n}}};void 0!==e&&e.exports&&(e.exports=function(){return t()})}()},{}],20:[function(t,e,o){!function(){"use strict";var o=t("./Translator")(),n=t("../util/Utilities")(),r=t("../data/DataManager")(),a=function(t){t.stopPropagation(),document.getElementById("TravelNotes-Control-ItineraryHeaderDiv").classList.toggle("TravelNotes-Control-SmallHeader"),document.getElementById("TravelNotes-Control-ItineraryDataDiv").classList.toggle("TravelNotes-Control-HiddenList");var e=document.getElementById("TravelNotes-Control-ItineraryDataDiv").classList.contains("TravelNotes-Control-HiddenList");document.getElementById("TravelNotes-Control-ItineraryExpandButton").innerHTML=e?"&#x25b6;":"&#x25bc;",document.getElementById("TravelNotes-Control-ItineraryExpandButton").title=e?o.getText("ItineraryEditorUI - Show"):o.getText("ItineraryEditorUI - Hide")},i=function(e){e.stopPropagation(),t("../core/MapEditor")().zoomToItineraryPoint(e.target.itineraryPointObjId)},s=function(t){t.stopPropagation(),t.preventDefault()},l=function(e){e.stopPropagation(),t("../core/MapEditor")().addItineraryPointMarker(e.target.itineraryPointObjId)},d=function(e){e.stopPropagation(),t("../core/MapEditor")().removeObject(e.target.itineraryPointObjId)};void 0!==e&&e.exports&&(e.exports=function(){var e=function(e){if(!document.getElementById("TravelNotes-Control-ItineraryDataDiv")){var n=t("./HTMLElementsFactory")(),r=n.create("div",{id:"TravelNotes-Control-ItineraryHeaderDiv",className:"TravelNotes-Control-HeaderDiv"},e);n.create("span",{innerHTML:"&#x25bc;",id:"TravelNotes-Control-ItineraryExpandButton",className:"TravelNotes-Control-ExpandButton"},r).addEventListener("click",a,!1),n.create("span",{innerHTML:o.getText("ItineraryEditorUI - Itinerary and notes"),id:"TravelNotes-Control-ItineraryHeaderText",className:"TravelNotes-Control-HeaderText"},r),n.create("div",{id:"TravelNotes-Control-ItineraryDataDiv",className:"TravelNotes-Control-DataDiv"},e)}},u=function(t){t.addEventListener("click",i,!1),t.addEventListener("contextmenu",s,!1),t.addEventListener("mouseenter",l,!1),t.addEventListener("mouseleave",d,!1)},c=function(t){t.removeEventListener("click",i,!1),t.removeEventListener("contextmenu",s,!1),t.removeEventListener("mouseenter",l,!1),t.removeEventListener("mouseleave",d,!1)},v=function(){var e=r.editedRoute.itinerary,o=document.getElementById("TravelNotes-Control-ItineraryDataDiv");if(o){var a=document.getElementById("TravelNotes-Control-ManeuverList");if(a){for(var i=0;i<a.childNodes.length;i++)c(a.childNodes[i]);o.removeChild(a)}var s=t("./HTMLElementsFactory")();a=s.create("div",{id:"TravelNotes-Control-ManeuverList",className:"TravelNotes-Control-TableDataDiv"},o);for(var l=e.maneuvers.iterator;!l.done;){var d=s.create("div",{className:"TravelNotes-Control-RowDataDiv"},a);s.create("div",{className:"TravelNotes-Control-CellDataDiv TravelNotes-Control-iconCellDataDiv TravelNotes-Control-"+l.value.iconName+"Small"},d);var v=s.create("div",{className:"TravelNotes-Control-CellDataDiv",innerHTML:l.value.simplifiedInstruction},d);v.itineraryPointObjId=l.value.itineraryPointObjId,u(v),s.create("div",{className:"TravelNotes-Control-CellDataDiv TravelNotes-Control-ItineraryStreetName",innerHTML:l.value.streetName},d),s.create("div",{className:"TravelNotes-Control-CellDataDiv",innerHTML:l.value.direction},d),s.create("div",{className:"TravelNotes-Control-CellDataDiv TravelNotes-Control-ItineraryDistance",innerHTML:n.formatDistance(l.value.distance)},d),s.create("div",{className:"TravelNotes-Control-CellDataDiv",innerHTML:n.formatTime(l.value.duration)},d)}}};return{createUI:function(t){e(t)},setItinerary:function(){v()}}})}()},{"../core/MapEditor":30,"../data/DataManager":36,"../util/Utilities":48,"./HTMLElementsFactory":19,"./Translator":25}],21:[function(t,e,o){!function(){"use strict";var o,n,r=t("../UI/Translator")(),a={buttons:[],list:[]},i=function(){return 0===document.getElementById("TravelNotes-NoteDialog-TextArea-IconHtmlContent").value.length?(document.getElementById("TravelNotes-BaseDialog-ErrorDiv").innerHTML=r.getText("Notedialog - empty icon content"),document.getElementById("TravelNotes-BaseDialog-ErrorDiv").classList.remove("TravelNotes-BaseDialog-ErrorDivHidden"),!1):(o.iconWidth=document.getElementById("TravelNotes-NoteDialog-WidthNumberInput").value,o.iconHeight=document.getElementById("TravelNotes-NoteDialog-HeightNumberInput").value,o.iconContent=document.getElementById("TravelNotes-NoteDialog-TextArea-IconHtmlContent").value,o.popupContent=document.getElementById("TravelNotes-NoteDialog-TextArea-PopupContent").value,o.tooltipContent=document.getElementById("TravelNotes-NoteDialog-InputText-Tooltip").value,o.address=document.getElementById("TravelNotes-NoteDialog-InputText-Adress").value,o.url=document.getElementById("TravelNotes-NoteDialog-InputText-Link").value,o.phone=document.getElementById("TravelNotes-NoteDialog-InputText-Phone").value,t("../core/NoteEditor")().endNoteDialog(o,n),!0)};void 0!==e&&e.exports&&(e.exports=function(e,s){o=e,n=s;var l=[],d=[],u=t("./HTMLElementsFactory")(),c=t("../UI/BaseDialog")();c.title=r.getText("NoteDialog - Title"),c.addClickOkButtonEventListener(i);var v=u.create("div",{id:"TravelNotes-NoteDialog-MainDataDiv"},c.content),g=u.create("div",{className:"TravelNotes-NoteDialog-ToolbarDiv",id:"TravelNotes-NoteDialog-ToolbarDiv"},v),p=u.create("select",{className:"TravelNotes-NoteDialog-Select",id:"TravelNotes-NoteDialog-IconSelect"},g);p.addEventListener("change",function(t){var e=p.selectedIndex;y.value=d[e].width,L.value=d[e].height,x.value=d[e].icon,D.value=d[e].tooltip},!1);var m=function(){d=l.concat(a.list),console.log(d),d.sort(function(t,e){return t.name.localeCompare(e.name)});var t=0;for(t=p.length-1;t>=0;t--)p.remove(counter);for(t=0;t<d.length;t++){var e=u.create("option",{text:d[t].name});p.add(e)}},T=function(t){t.forEach(function(t){u.create("button",{type:"button",innerHTML:t.title||"?",htmlBefore:t.htmlBefore||"",htmlAfter:t.htmlAfter||"",className:"TravelNotes-NoteDialog-EditorButton"},g).addEventListener("click",b,!1)})},f=u.create("div",{id:"TravelNotes-NoteDialog-OpenEditorFileDiv"},g),N=u.create("input",{id:"TravelNotes-NoteDialog-OpenEditorFileInput",type:"file",accept:".json"},f);N.addEventListener("change",function(t){var e=new FileReader;e.onload=function(t){var o=JSON.parse(e.result);a.buttons=a.buttons.concat(o.buttons),a.list=a.list.concat(o.list),T(o.buttons),m()},t.target.files[0].name,e.readAsText(t.target.files[0])},!1);var I=u.create("div",{id:"TravelNotes-NoteDialog-OpenStyleFakeDiv"},f);u.create("button",{id:"TravelNotes-NoteDialog-OpenEditorFileButton",className:"TravelNotes-NoteDialog-EditorButton",title:r.getText("TravelEditorUI - Open travel"),innerHTML:"&#x23CD;"},I).addEventListener("click",function(){N.click()},!1);var E=null,b=function(t){if(E){var e=t.target.htmlAfter&&0<t.target.htmlAfter.length,o=E.selectionStart,n=E.selectionEnd,r=E.value;E.value=r.substring(0,o)+(e?t.target.htmlBefore+r.substring(o,n)+t.target.htmlAfter:t.target.htmlBefore)+r.substring(n),E.setSelectionRange(e||o===n?o+t.target.htmlBefore.length:o,(e?n:o)+t.target.htmlBefore.length),E.focus()}};T([{title:"div",htmlBefore:"<div>",htmlAfter:"</div>"},{title:"p",htmlBefore:"<p>",htmlAfter:"</p>"},{title:"span",htmlBefore:"<span>",htmlAfter:"</span>"},{title:"a",htmlBefore:'<a target="_blank" href="">',htmlAfter:"</a>"}]),T(a.buttons);var h=u.create("div",{className:"TravelNotes-NoteDialog-DataDiv",id:"TravelNotes-NoteDialog-DimensionsDataDiv"},v);u.create("text",{data:r.getText("NoteDialog - Icon width")},h);var y=u.create("input",{type:"number",className:"TravelNotes-NoteDialog-NumberInput",id:"TravelNotes-NoteDialog-WidthNumberInput"},h);y.value=e.iconWidth,u.create("text",{data:r.getText("NoteDialog - Icon height")},h);var L=u.create("input",{type:"number",className:"TravelNotes-NoteDialog-NumberInput",id:"TravelNotes-NoteDialog-HeightNumberInput"},h);L.value=e.iconHeight,u.create("div",{className:"TravelNotes-NoteDialog-TitleDiv",id:"TravelNotes-NoteDialog-IconContentTitleDiv",innerHTML:r.getText("NoteDialog - IconHtmlContentTitle")},v);var x=u.create("textarea",{className:"TravelNotes-NoteDialog-TextArea",id:"TravelNotes-NoteDialog-TextArea-IconHtmlContent"},v);x.addEventListener("focus",function(t){E=x},!1),x.value=e.iconContent,u.create("div",{className:"TravelNotes-NoteDialog-TitleDiv",innerHTML:r.getText("NoteDialog - PopupContentTitle")},v);var C=u.create("textarea",{className:"TravelNotes-NoteDialog-TextArea",id:"TravelNotes-NoteDialog-TextArea-PopupContent"},v);C.addEventListener("focus",function(t){E=C},!1),C.value=e.popupContent,u.create("div",{className:"TravelNotes-NoteDialog-TitleDiv",innerHTML:r.getText("NoteDialog - TooltipTitle")},v);var D=u.create("input",{type:"text",className:"TravelNotes-NoteDialog-InputText",id:"TravelNotes-NoteDialog-InputText-Tooltip"},v);D.addEventListener("focus",function(t){E=D},!1),D.value=e.tooltipContent,u.create("div",{className:"TravelNotes-NoteDialog-TitleDiv",innerHTML:r.getText("NoteDialog - AdressTitle")},v);var R=u.create("input",{type:"text",className:"TravelNotes-NoteDialog-InputText",id:"TravelNotes-NoteDialog-InputText-Adress"},v);R.addEventListener("focus",function(t){E=R},!1),R.value=e.address,u.create("div",{className:"TravelNotes-NoteDialog-TitleDiv",innerHTML:r.getText("NoteDialog - LinkTitle")},v);var j=u.create("input",{type:"text",className:"TravelNotes-NoteDialog-InputText",id:"TravelNotes-NoteDialog-InputText-Link"},v);j.addEventListener("focus",function(t){E=null},!1),j.value=e.url,u.create("div",{className:"TravelNotes-NoteDialog-TitleDiv",innerHTML:r.getText("NoteDialog - PhoneTitle")},v);var U=u.create("input",{type:"text",className:"TravelNotes-NoteDialog-InputText",id:"TravelNotes-NoteDialog-InputText-Phone"},v);U.addEventListener("focus",function(t){E=U},!1),U.value=e.phone;var M=new XMLHttpRequest;M.onreadystatechange=function(t){if(this.readyState===XMLHttpRequest.DONE)if(200===this.status){var e;try{e=JSON.parse(this.responseText)}catch(t){console.log("Error reading userNoteDialog.json")}T(e.buttons),(l=e.list).push({name:"",icon:"",tooltip:"",width:40,height:40}),m()}else console.log("Error sending request for userNoteDialog.json")},M.open("GET",window.location.href.substr(0,window.location.href.lastIndexOf("/")+1)+"userNoteDialog.json",!0),M.send(null),c.center()})}()},{"../UI/BaseDialog":15,"../UI/Translator":25,"../core/NoteEditor":31,"./HTMLElementsFactory":19}],22:[function(t,e,o){!function(){"use strict";var o=t("./Translator")(),n=t("../data/DataManager")(),r=function(e){e.stopPropagation();t("../core/RouteEditor")().addWayPoint()},a=function(e){e.stopPropagation();t("../core/RouteEditor")().reverseWayPoints()},i=function(e){e.stopPropagation();t("../core/RouteEditor")().removeAllWayPoints()},s=function(e){e.stopPropagation();t("../core/RouteEditor")().removeWayPoint(e.itemNode.dataObjId)},l=function(e){e.stopPropagation();t("../core/RouteEditor")().swapWayPoints(e.itemNode.dataObjId,!0)},d=function(e){e.stopPropagation();t("../core/RouteEditor")().swapWayPoints(e.itemNode.dataObjId,!1)},u=function(e){e.stopPropagation(),t("../core/RouteEditor")().renameWayPoint(e.dataObjId,e.changeValue)},c=function(e){e.stopPropagation(),t("../core/RouteEditor")().saveEdition()},v=function(e){e.stopPropagation(),t("../core/RouteEditor")().cancelEdition()},g=function(t){t.stopPropagation(),document.getElementById("TravelNotes-Control-WaypointsHeaderDiv").classList.toggle("TravelNotes-Control-SmallHeader"),document.getElementById("TravelNotes-Control-WaypointsDataDiv").classList.toggle("TravelNotes-Control-HiddenList"),document.getElementById("TravelNotes-Control-WayPointsButtonsDiv").classList.toggle("TravelNotes-Control-HiddenList");var e=document.getElementById("TravelNotes-Control-WaypointsDataDiv").classList.contains("TravelNotes-Control-HiddenList");document.getElementById("TravelNotes-Control-WayPointsExpandButton").innerHTML=e?"&#x25b6;":"&#x25bc;",document.getElementById("TravelNotes-Control-WayPointsExpandButton").title=e?o.getText("RouteEditorUI - Show"):o.getText("RouteEditorUI - Hide")},p=function(t){t.stopPropagation(),document.getElementById("TravelNotes-Control-WaypointsDataDiv").classList.toggle("TravelNotes-Control-ExpandedList");var e=document.getElementById("TravelNotes-Control-WaypointsDataDiv").classList.contains("TravelNotes-Control-ExpandedList");document.getElementById("TravelNotes-Control-ExpandWayPointsListButton").innerHTML=e?"&#x25b3;":"&#x25bd;",document.getElementById("TravelNotes-Control-ExpandWayPointsListButton").title=e?o.getText("RouteEditorUI - Reduce the list"):o.getText("RouteEditorUI - Expand the list")},m=null;void 0!==e&&e.exports&&(e.exports=function(){var e=function(e){if(!document.getElementById("TravelNotes-Control-WaypointsDataDiv")){var n=t("./HTMLElementsFactory")(),T=n.create("div",{id:"TravelNotes-Control-WaypointsHeaderDiv",className:"TravelNotes-Control-HeaderDiv"},e);n.create("span",{innerHTML:"&#x25bc;",id:"TravelNotes-Control-WayPointsExpandButton",className:"TravelNotes-Control-ExpandButton"},T).addEventListener("click",g,!1),n.create("span",{innerHTML:o.getText("RouteEditorUI - Waypoints"),id:"TravelNotes-Control-WayPointsHeaderText",className:"TravelNotes-Control-HeaderText"},T);var f=n.create("div",{id:"TravelNotes-Control-WaypointsDataDiv",className:"TravelNotes-Control-DataDiv"},e);(m=t("./SortableList")({minSize:0,listStyle:"LimitedSort",placeholders:[o.getText("RouteEditorUI - Start"),o.getText("RouteEditorUI - Via"),o.getText("RouteEditorUI - End")],indexNames:["A","index","B"],id:"TravelNotes-Control-WaypointsList"},f)).container.addEventListener("SortableListDelete",s,!1),m.container.addEventListener("SortableListUpArrow",l,!1),m.container.addEventListener("SortableListDownArrow",d,!1),m.container.addEventListener("SortableListChange",u,!1);var N=n.create("div",{id:"TravelNotes-Control-WayPointsButtonsDiv",className:"TravelNotes-Control-ButtonsDiv"},e);n.create("div",{id:"TravelNotes-Control-ExpandWayPointsListButton",className:"TravelNotes-Control-Button",title:o.getText("RouteEditorUI - Expand the list"),innerHTML:"&#x25bd;"},N).addEventListener("click",p,!1),n.create("div",{id:"TravelNotes-Control-CancelRouteButton",className:"TravelNotes-Control-Button",title:o.getText("RouteEditorUI - Cancel"),innerHTML:"&#x274c"},N).addEventListener("click",v,!1),n.create("div",{id:"TravelNotes-Control-SaveRouteButton",className:"TravelNotes-Control-Button",title:o.getText("RouteEditorUI - Save"),innerHTML:"&#x1f4be;"},N).addEventListener("click",c,!1),n.create("div",{id:"TravelNotes-Control-ReverseWayPointsButton",className:"TravelNotes-Control-Button",title:o.getText("RouteEditorUI - Invert waypoints"),innerHTML:"&#x21C5;"},N).addEventListener("click",a,!1),n.create("div",{id:"TravelNotes-Control-AddWayPointButton",className:"TravelNotes-Control-Button",title:o.getText("RouteEditorUI - Add waypoint"),innerHTML:"+"},N).addEventListener("click",r,!1),n.create("div",{id:"TravelNotes-Control-RemoveAllWayPointsButton",className:"TravelNotes-Control-Button",title:o.getText("RouteEditorUI - Delete all waypoints"),innerHTML:"&#x267b;"},N).addEventListener("click",i,!1)}},T=function(){document.getElementById("TravelNotes-Control-WayPointsExpandButton").innerHTML="&#x25bc;",document.getElementById("TravelNotes-Control-WayPointsExpandButton").title="Masquer",document.getElementById("TravelNotes-Control-WaypointsDataDiv").classList.remove("TravelNotes-Control-HiddenList"),document.getElementById("TravelNotes-Control-WaypointsDataDiv").classList.remove("TravelNotes-Control-HiddenList")},f=function(){document.getElementById("TravelNotes-Control-WayPointsExpandButton").innerHTML="&#x25b6;",document.getElementById("TravelNotes-Control-WayPointsExpandButton").title="Afficher",document.getElementById("TravelNotes-Control-WaypointsButtonsDiv").classList.add("TravelNotes-Control-HiddenList"),document.getElementById("TravelNotes-Control-WaypointsButtonsDiv").classList.add("TravelNotes-Control-HiddenList")};return{createUI:function(t){e(t)},expand:function(){T()},reduce:function(){f()},setWayPointsList:function(){if(m.removeAllItems(),-1!==n.editedRoute.routeInitialObjId)for(var t=n.editedRoute.wayPoints.iterator;!t.done;)m.addItem(t.value.UIName,t.value.objId,t.last)}}})}()},{"../core/RouteEditor":32,"../data/DataManager":36,"./HTMLElementsFactory":19,"./SortableList":24,"./Translator":25}],23:[function(t,e,o){!function(){"use strict";var o=t("../UI/Translator")();void 0!==e&&e.exports&&(e.exports=function(e){var n=t("./HTMLElementsFactory")(),r=t("../UI/ColorDialog")(e.color);r.title=o.getText("RoutePropertiesDialog - Title"),r.addClickOkButtonEventListener(function(){return e.color=r.getNewColor(),e.width=parseInt(s.value),e.chain=d.checked,t("../core/MapEditor")().editRoute(e),!0});var a=n.create("div",{id:"TravelNotes-RoutePropertiesDialog-MainDataDiv"},r.content),i=n.create("div",{className:"TravelNotes-RoutePropertiesDialog-DataDiv",id:"TravelNotes-RoutePropertiesDialog-WithDiv"},a);n.create("text",{data:o.getText("RoutePropertiesDialog - Width")},i);var s=n.create("input",{type:"number",id:"TravelNotes-RoutePropertiesDialog-WidthInput"},i);s.value=e.width,s.min=1,s.max=40;var l=n.create("div",{className:"TravelNotes-RoutePropertiesDialog-DataDiv",id:"TravelNotes-RoutePropertiesDialog-ChainDiv"},a),d=n.create("input",{type:"checkbox",id:"TravelNotes-RoutePropertiesDialog-ChainInput"},l);return d.checked=e.chain,n.create("label",{for:"TravelNotes-RoutePropertiesDialog-ChainInput",innerHTML:o.getText("RoutePropertiesDialog - Chain")},l),r})}()},{"../UI/ColorDialog":16,"../UI/Translator":25,"../core/MapEditor":30,"./HTMLElementsFactory":19}],24:[function(t,e,o){!function(){"use strict";var o=function(t){t.stopPropagation();try{t.dataTransfer.setData("Text","1")}catch(t){}console.log("onDragStart")},n=function(t){t.preventDefault(),console.log("onDragOver")},r=function(t){t.preventDefault();t.dataTransfer.getData("Text");console.log("onDrop")},a=function(t){var e=new Event("SortableListDelete");e.itemNode=t.target.parentNode,t.target.parentNode.parentNode.dispatchEvent(e),t.stopPropagation()},i=function(t){var e=new Event("SortableListUpArrow");e.itemNode=t.target.parentNode,t.target.parentNode.parentNode.dispatchEvent(e),t.stopPropagation()},s=function(t){var e=new Event("SortableListDownArrow");e.itemNode=t.target.parentNode,t.target.parentNode.parentNode.dispatchEvent(e),t.stopPropagation()},l=function(t){var e=new Event("SortableListRightArrow");e.itemNode=t.target.parentNode,t.target.parentNode.parentNode.dispatchEvent(e),t.stopPropagation()},d=function(t){console.log("onChange");var e=new Event("SortableListChange");e.dataObjId=t.target.parentNode.dataObjId,e.changeValue=t.target.value,t.target.parentNode.parentNode.dispatchEvent(e),t.stopPropagation()},u=function(e,u){var c=t("./HTMLElementsFactory")();this.items=[],this.removeAllItems=function(){for(var t=0;t<this.items.length;t++)this.container.removeChild(this.items[t]);this.items.length=0},this.addItem=function(t,e,n){t=t||"",e=e||-1;var r="";if(1===this.options.placeholders.length&&(r=this.options.placeholders[0]),3===this.options.placeholders.length){switch(this.items.length){case 0:r=this.options.placeholders[0];break;default:r=this.options.placeholders[1]}n&&(r=this.options.placeholders[2])}var u="";if(1===this.options.indexNames.length&&(u=this.options.indexNames[0]),3===this.options.indexNames.length){switch(this.items.length){case 0:u=this.options.indexNames[0];break;default:u=this.options.indexNames[1]}n&&(u=this.options.indexNames[2])}"index"===u&&(u=this.items.length);var v=c.create("div",{draggable:!1,className:"TravelNotes-SortableList-Item"});c.create("div",{className:"TravelNotes-SortableList-ItemTextIndex",innerHTML:u},v),c.create("input",{type:"text",className:"TravelNotes-SortableList-ItemInput",placeholder:r,value:t},v).addEventListener("change",d,!1),c.create("div",{className:"TravelNotes-SortableList-ItemUpArrowButton",title:"Déplacer vers le haut",innerHTML:String.fromCharCode(8679)},v).addEventListener("click",i,!1),c.create("div",{className:"TravelNotes-SortableList-ItemDownArrowButton",title:"Déplacer vers le bas",innerHTML:String.fromCharCode(8681)},v).addEventListener("click",s,!1);var g=c.create("div",{className:"TravelNotes-SortableList-ItemRightArrowButton",title:"Éditer",innerHTML:String.fromCharCode(8688)},v);"AllSort"===this.options.listStyle&&g.addEventListener("click",l,!1),c.create("div",{className:"TravelNotes-SortableList-ItemDeleteButton",title:"Supprimer",innerHTML:"&#x267b;"},v).addEventListener("click",a,!1),v.dataObjId=e,this.items.push(v),("LimitedSort"!==this.options.listStyle||1<this.items.length)&&!n&&(v.draggable=!0,v.addEventListener("dragstart",o,!1),v.classList.add("TravelNotes-SortableList-MoveCursor")),this.container.appendChild(v)},this._create=function(t,e){this.options={minSize:2,listStyle:"AllSort",placeholders:[],indexNames:[],id:"TravelNotes-SortableList-Container"};for(var o in t)this.options[o]=t[o];"LimitedSort"===this.options.listStyle&&2>this.options.minSize&&(this.options.minSize=0),this.container=c.create("div",{id:t.id,className:"TravelNotes-SortableList-Container"}),this.container.classList.add(this.options.listStyle),this.container.addEventListener("dragover",n,!1),this.container.addEventListener("drop",r,!1),e&&e.appendChild(this.container);for(var a=0;a<this.options.minSize;a++)this.addItem()},this._create(e,u)};void 0!==e&&e.exports&&(e.exports=function(t,e){return new u(t,e)})}()},{"./HTMLElementsFactory":19}],25:[function(t,e,o){!function(){"use strict";var t=[{msgid:"ColorDialog - Title",msgstr:"Couleurs"},{msgid:"ColorDialog - red",msgstr:"Rouge"},{msgid:"ColorDialog - green",msgstr:"Vert"},{msgid:"ColorDialog - blue",msgstr:"Bleu"},{msgid:"ContextMenu - close",msgstr:"Fermer"},{msgid:"ErrorEditorUI - Show",msgstr:"Afficher"},{msgid:"ErrorEditorUI - Hide",msgstr:"Masquer"},{msgid:"ItineraryEditorUI - Itinerary and notes",msgstr:"Itinéraire et notes"},{msgid:"ItineraryEditorUI - Show",msgstr:"Afficher"},{msgid:"ItineraryEditorUI - Hide",msgstr:"Masquer"},{msgid:"MapEditor - Distance",msgstr:"<span>Distance</span>&nbsp;:&nbsp;"},{msgid:"MapEditor - Duration",msgstr:"<span>Temps</span>&nbsp;:&nbsp;"},{msgid:"MapEditor - popup address",msgstr:"<span>Adresse</span>&nbsp;:&nbsp;"},{msgid:"MapEditor - popup phone",msgstr:"<span>Téléphone</span>&nbsp;:&nbsp;"},{msgid:"MapEditor - popup url",msgstr:"<span>Latitude</span>&nbsp;:&nbsp;"},{msgid:"MapEditor - popup lng",msgstr:"<span>&nbsp;-&nbsp;Longitude</span>&nbsp;:&nbsp;"},{msgid:"MapEditor - popup lat",msgstr:"<span>Lattitude</span>&nbsp;:&nbsp;"},{msgid:"MapEditor - popup distance",msgstr:"&nbsp;-&nbsp;<span>Distance</span>&nbsp;:&nbsp;"},{msgid:"NoteDialog - Title",msgstr:"Note"},{msgid:"NoteDialog - IconHtmlContentTitle",msgstr:"Contenu de l'icône&nbsp;:"},{msgid:"NoteDialog - PopupContentTitle",msgstr:"Contenu du popup&nbsp;:"},{msgid:"NoteDialog - AdressTitle",msgstr:"Adresse&nbsp;:"},{msgid:"NoteDialog - LinkTitle",msgstr:"Lien&nbsp;:"},{msgid:"NoteDialog - PhoneTitle",msgstr:"Téléphone&nbsp:"},{msgid:"NoteDialog - TooltipTitle",msgstr:"Contenu du tooltip&nbsp;:"},{msgid:"NoteDialog - Standard icon",msgstr:"Icône standard"},{msgid:"NoteDialog - Personnel icon",msgstr:"Icône personnalisée"},{msgid:"NoteDialog - Choose an icon",msgstr:"Icône : "},{msgid:"NoteDialog - Icon width",msgstr:"Largeur : "},{msgid:"NoteDialog - Icon height",msgstr:"Hauteur : "},{msgid:"NoteEditor - new travel note",msgstr:"Ajouter une note"},{msgid:"NoteEditor - edit note",msgstr:"Éditer cette note"},{msgid:"NoteEditor - delete note",msgstr:"Effacer cette note"},{msgid:"Notedialog - empty icon content",msgstr:"Le contenu de l'icône doit être complété."},{msgid:"RouteEditor-Not possible to edit a route without a save or cancel",msgstr:"Il n'est pas possible d'éditer une route sans sauver ou abandonner les modifications"},{msgid:"RouteEditor - Add a note on the route",msgstr:"Ajouter une note à ce trajet"},{msgid:"RouteEditor - Select this point as start point",msgstr:"Sélectionner cet endroit comme point de départ"},{msgid:"RouteEditor - Select this point as way point",msgstr:"Sélectionner cet endroit comme point intermédiaire"},{msgid:"RouteEditor - Select this point as end point",msgstr:"Sélectionner cet endroit comme point de fin"},{msgid:"RouteEditor - Edit this route",msgstr:"Éditer cette route"},{msgid:"RouteEditor - Delete this route",msgstr:"Supprimer cette route"},{msgid:"RouteEditor - Save modifications on this route",msgstr:"Sauver les modifications"},{msgid:"RouteEditor - Cancel modifications on this route",msgstr:"Abandonner les modifications"},{msgid:"RouteEditorUI - Show",msgstr:"Afficher"},{msgid:"RouteEditorUI - Hide",msgstr:"Masquer"},{msgid:"RouteEditorUI - Waypoints",msgstr:"Points de passage&nbsp;de la route:"},{msgid:"RouteEditorUI - Start",msgstr:"Départ"},{msgid:"RouteEditorUI - Via",msgstr:"Point de passage"},{msgid:"RouteEditorUI - End",msgstr:"Fin"},{msgid:"RouteEditorUI - Save",msgstr:"Sauver les modifications"},{msgid:"RouteEditorUI - Cancel",msgstr:"Abandonner les modifications"},{msgid:"RouteEditorUI - Invert waypoints",msgstr:"Inverser les points de passage"},{msgid:"RouteEditorUI - Add waypoint",msgstr:"Ajouter un point de passage"},{msgid:"RouteEditorUI - Delete all waypoints",msgstr:"Supprimer tous les points de passage"},{msgid:"RouteEditorUI - Reduce the list",msgstr:"Réduire"},{msgid:"RouteEditorUI - Expand the list",msgstr:"Étendre"},{msgid:"RoutePropertiesDialog - Title",msgstr:"Propriétés du trajet"},{msgid:"RoutePropertiesDialog - Width",msgstr:"Largeur : "},{msgid:"RoutePropertiesDialog - Chain",msgstr:"Trajet&nbsp;chaîné"},{msgid:"TravelEditorUI - Show",msgstr:"Afficher"},{msgid:"TravelEditorUI - Hide",msgstr:"Masquer"},{msgid:"TravelEditorUI - Routes",msgstr:"Routes du voyage&nbsp;:"},{msgid:"TravelEditorUI - Route",msgstr:"Route"},{msgid:"TravelEditorUI - Reduce the list",msgstr:"Réduire"},{msgid:"TravelEditorUI - Expand the list",msgstr:"Étendre"},{msgid:"TravelEditorUI - New route",msgstr:"Nouvelle route"},{msgid:"TravelEditorUI - Delete all routes",msgstr:"Supprimer toutes les routes"},{msgid:"TravelEditorUI - Save travel",msgstr:"Sauver dans un fichier"},{msgid:"TravelEditorUI - Open travel",msgstr:"Ouvrir un fichier"},{msgid:"TravelEditorUI - Undo",msgstr:"Réouvrir une route supprimée"},{msgid:"TravelEditor - cannot remove an edited route",msgstr:"Il n'est pas possible de supprimer une route quand celle-ci est en cours d'édition"},{msgid:"TravelEditor - Not possible to save a travel without a save or cancel",msgstr:"Des données non sauvées sont présentes dans l'éditeur de route. Sauvez ou abandonnez celles-ci avant de sauver le voyage dans un fichier"},{msgid:"TravelEditorUI - Cancel travel",msgstr:"Abandonner ce voyage"},{msgid:"Utilities - day",msgstr:"jours"},{msgid:"Utilities - hour",msgstr:"h"},{msgid:"Utilities - minute",msgstr:"m"},{msgid:"Utilities - second",msgstr:"s"},{msgid:"TravelEditorUI - ",msgstr:"xxx"}],o=null;void 0!==e&&e.exports&&(e.exports=function(e){if(!o){o=new Map;for(var n=0;n<t.length;n++)o.set(t[n].msgid,t[n].msgstr);o.set("Version","1.0.0")}return{getText:function(t){var e=o.get(t);return void 0===e?t:e}}})}()},{}],26:[function(t,e,o){!function(){"use strict";var o=t("./Translator")(),n=t("../data/DataManager")(),r=function(e){e.stopPropagation(),t("../core/TravelEditor")().clear()},a=function(e){e.stopPropagation(),t("../core/TravelEditor")().addRoute()},i=function(e){e.stopPropagation(),t("../core/TravelEditor")().removeRoute(e.itemNode.dataObjId)},s=function(e){e.stopPropagation(),t("../core/TravelEditor")().swapRoute(e.itemNode.dataObjId,!0)},l=function(e){e.stopPropagation(),t("../core/TravelEditor")().swapRoute(e.itemNode.dataObjId,!1)},d=function(e){e.stopPropagation(),t("../core/TravelEditor")().editRoute(e.itemNode.dataObjId)},u=function(e){e.stopPropagation(),t("../core/TravelEditor")().renameRoute(e.dataObjId,e.changeValue)},c=function(e){e.stopPropagation(),t("../core/TravelEditor")().saveTravel()},v=function(e){e.stopPropagation(),t("../core/TravelEditor")().openTravel(e)},g=function(t){t.stopPropagation()},p=function(t){t.stopPropagation(),document.getElementById("TravelNotes-Control-RoutesHeaderDiv").classList.toggle("TravelNotes-Control-SmallHeader"),document.getElementById("TravelNotes-Control-RoutesDataDiv").classList.toggle("TravelNotes-Control-HiddenList"),document.getElementById("TravelNotes-Control-RoutesButtonsDiv").classList.toggle("TravelNotes-Control-HiddenList");var e=document.getElementById("TravelNotes-Control-RoutesDataDiv").classList.contains("TravelNotes-Control-HiddenList");document.getElementById("TravelNotes-Control-RoutesExpandButton").innerHTML=e?"&#x25b6;":"&#x25bc;",document.getElementById("TravelNotes-Control-RoutesExpandButton").title=e?o.getText("TravelEditorUI - Show"):o.getText("TravelEditorUI - Hide"),t.stopPropagation()},m=function(t){t.stopPropagation(),document.getElementById("TravelNotes-Control-RoutesDataDiv").classList.toggle("TravelNotes-Control-ExpandedList");var e=document.getElementById("TravelNotes-Control-RoutesDataDiv").classList.contains("TravelNotes-Control-ExpandedList");document.getElementById("TravelNotes-Control-ExpandRoutesListButton").innerHTML=e?"&#x25b3;":"&#x25bd;",document.getElementById("TravelNotes-Control-ExpandRoutesListButton").title=e?o.getText("TravelEditorUI - Reduce the list"):o.getText("TravelEditorUI - Expand the list")},T=null;void 0!==e&&e.exports&&(e.exports=function(){var e=function(e){if(!document.getElementById("TravelNotes-Control-RoutesDataDiv")){var n=t("./HTMLElementsFactory")(),f=n.create("div",{id:"TravelNotes-Control-RoutesHeaderDiv",className:"TravelNotes-Control-HeaderDiv"},e);n.create("span",{innerHTML:"&#x25bc;",id:"TravelNotes-Control-RoutesExpandButton",className:"TravelNotes-Control-ExpandButton"},f).addEventListener("click",p,!1),n.create("span",{innerHTML:o.getText("TravelEditorUI - Routes"),id:"TravelNotes-Control-RoutesHeaderText",className:"TravelNotes-Control-HeaderText"},f);var N=n.create("div",{id:"TravelNotes-Control-RoutesDataDiv",className:"TravelNotes-Control-DataDiv"},e);(T=t("./SortableList")({minSize:0,placeholders:[o.getText("TravelEditorUI - Route")],id:"TravelNotes-Control-RouteList"},N)).container.addEventListener("SortableListDelete",i,!1),T.container.addEventListener("SortableListUpArrow",s,!1),T.container.addEventListener("SortableListDownArrow",l,!1),T.container.addEventListener("SortableListRightArrow",d,!1),T.container.addEventListener("SortableListChange",u,!1);var I=n.create("div",{id:"TravelNotes-Control-RoutesButtonsDiv",className:"TravelNotes-Control-ButtonsDiv"},e);n.create("div",{id:"TravelNotes-Control-ExpandRoutesListButton",className:"TravelNotes-Control-Button",title:o.getText("TravelEditorUI - Expand the list"),innerHTML:"&#x25bd;"},I).addEventListener("click",m,!1),n.create("div",{id:"TravelNotes-Control-CancelTravelButton",className:"TravelNotes-Control-Button",title:o.getText("TravelEditorUI - Cancel travel"),innerHTML:"&#x274c"},I).addEventListener("click",r,!1),n.create("div",{id:"TravelNotes-Control-SaveTravelButton",className:"TravelNotes-Control-Button",title:o.getText("TravelEditorUI - Save travel"),innerHTML:"&#x1f4be;"},I).addEventListener("click",c,!1);var E=n.create("div",{id:"TravelNotes-Control-OpenTravelDiv"},I),b=n.create("input",{id:"TravelNotes-Control-OpenTravelInput",type:"file",accept:".trv"},E);b.addEventListener("change",v,!1);var h=n.create("div",{id:"TravelNotes-Control-OpenTravelFakeDiv"},E);n.create("div",{id:"TravelNotes-Control-OpenTravelButton",className:"TravelNotes-Control-Button",title:o.getText("TravelEditorUI - Open travel"),innerHTML:"&#x23CD;"},h).addEventListener("click",function(){b.click()},!1),n.create("div",{id:"TravelNotes-Control-UndoButton",className:"TravelNotes-Control-Button",title:o.getText("TravelEditorUI - Undo"),innerHTML:"&#x21ba;"},I).addEventListener("click",g,!1),n.create("div",{id:"TravelNotes-Control-AddRoutesButton",className:"TravelNotes-Control-Button",title:o.getText("TravelEditorUI - New route"),innerHTML:"+"},I).addEventListener("click",a,!1)}};return{createUI:function(t){e(t)},setRoutesList:function(){T.removeAllItems();for(var t=n.travel.routes.iterator;!t.done;)T.addItem(t.value.name,t.value.objId,!1)}}})}()},{"../core/TravelEditor":34,"../data/DataManager":36,"./HTMLElementsFactory":19,"./SortableList":24,"./Translator":25}],27:[function(t,e,o){!function(){"use strict";void 0!==e&&e.exports&&(e.exports=function(){var e=document.getElementById("TravelNotes-Control-MainDiv");return e||function(){var o=t("./HTMLElementsFactory")();e=o.create("div",{id:"TravelNotes-Control-MainDiv"}),t("./TravelEditorUI")().createUI(e),t("./RouteEditorUI")().createUI(e),t("./ItineraryEditorUI")().createUI(e),t("./ErrorEditorUI")().createUI(e)}(),{get UI(){return e}}})}()},{"./ErrorEditorUI":18,"./HTMLElementsFactory":19,"./ItineraryEditorUI":20,"./RouteEditorUI":22,"./TravelEditorUI":26}],28:[function(t,e,o){!function(){"use strict";void 0!==e&&e.exports&&(e.exports=function(){return{showError:function(e){t("../UI/ErrorEditorUI")().message='<span class="TravelNotes-Control-Error">'+e+"</span>",t("../UI/ErrorEditorUI")().expand()},clear:function(e){t("../UI/ErrorEditorUI")().message=""}}})}()},{"../UI/ErrorEditorUI":18}],29:[function(t,e,o){!function(){"use strict";void 0!==e&&e.exports&&(e.exports=function(){var e=function(){t("../UI/ItineraryEditorUI")().setItinerary()};return{setItinerary:function(){e()}}})}()},{"../UI/ItineraryEditorUI":20}],30:[function(t,e,o){!function(){"use strict";var o=t("../UI/Translator")(),n=t("../util/Config")(),r=t("../Data/DataManager")(),a=function(t){var e=r.getNoteAndRoute(t.objId).note;return e?e.tooltipContent:""},i=function(t){var e=r.getNoteAndRoute(t.objId).note;if(!e)return"";var n="";return 0!==e.tooltipContent.length&&(n+='<div class="TravelNotes-PopupMapTooltipContent">'+e.tooltipContent+"</div>"),0!==e.popupContent.length&&(n+='<div class="TravelNotes-PopupContent">'+e.popupContent+"</div>"),0!==e.address.length&&(n+='<div class="TravelNotes-PopupAddress">'+o.getText("MapEditor - popup address")+e.address+"</div>"),0!==e.phone.length&&(n+='<div class="TravelNotes-PopupPhone">'+o.getText("MapEditor - popup phone")+e.phone+"</div>"),0!==e.url.length&&(n+='<div class="TravelNotes-PopupUrl">'+o.getText("MapEditor - popup url")+'<a href="'+e.url+'" target="_blank">'+e.url+"</a></div>"),n+='<div class="TravelNotes-PopupLatLng"><span>'+o.getText("MapEditor - popup lat")+"</span>"+e.lat.toFixed(6)+"<span>"+o.getText("MapEditor - popup lng")+"</span>"+e.lng.toFixed(6)+(-1===e.distance?"":o.getText("MapEditor - popup distance")+e.distance.toFixed(0))+"</div>"},s=function(t){var e=r.getRoute(t.objId);return e?e.name:""},l=function(e){for(var n=r.getRoute(e.objId),a=0,i=0,s=n.itinerary.maneuvers.iterator;!s.done;)a+=s.value.distance,i+=s.value.duration;return a=t("../util/Utilities")().formatDistance(a),i=t("../util/Utilities")().formatTime(i),'<div class="TravelNotes-Popup-Route-Header">'+n.name+'</div><div class="TravelNotes-Popup-Route-Distance">'+o.getText("MapEditor - Distance")+a+'</div><div class="TravelNotes-Popup-Route-Duration">'+o.getText("MapEditor - Duration")+i+"</div>"},d=function(t){t.target.openPopup(t.latlng)},u=function(e){t("../UI/ContextMenu")(e,t("./RouteEditor")().getRouteContextMenu(e.target.objId))},c=function(e){t("../UI/ContextMenu")(e,t("./NoteEditor")().getNoteContextMenu(e.target.objId))},v=function(t){var e=r.getNoteAndRoute(t.target.objId).note;e.iconLatLng=[t.target.getLatLng().lat,t.target.getLatLng().lng];var o=r.mapObjects.get(t.target.objId);o.getLayer(o.polylineId).setLatLngs([e.latLng,e.iconLatLng])},g=function(e){r.editedRoute.wayPoints.getAt(e.target.objId).latLng=[e.target.getLatLng().lat,e.target.getLatLng().lng],t("../core/RouteEditor")().wayPointDragEnd(e.target.objId)},p=function(t){var e=r.getNoteAndRoute(t.target.objId).note,o=r.mapObjects.get(t.target.objId);o.getLayer(o.polylineId).setLatLngs([e.latLng,[t.latlng.lat,t.latlng.lng]])},m=function(e){var o=r.getNoteAndRoute(e.target.objId),n=o.note,a=o.route,i=r.mapObjects.get(e.target.objId);if(null!=a){var s=t("../util/TravelUtilities")().getClosestLatLngDistance(a,[e.target.getLatLng().lat,e.target.getLatLng().lng]);n.latLng=s.latLng,n.distance=s.distance,i.getLayer(i.bulletId).setLatLng(s.latLng)}else n.latLng=[e.target.getLatLng().lat,e.target.getLatLng().lng];i.getLayer(i.polylineId).setLatLngs([n.latLng,n.iconLatLng])},T=function(t){var e=r.getNoteAndRoute(t.target.objId).note,o=r.mapObjects.get(t.target.objId);o.getLayer(o.polylineId).setLatLngs([[t.latlng.lat,t.latlng.lng],e.iconLatLng])};void 0!==e&&e.exports&&(e.exports=function(){var t=function(t,e){e.objId=t,e.addTo(r.map),r.mapObjects.set(t,e)},e=function(t){var e=r.mapObjects.get(t);e?(L.DomEvent.off(e),r.map.removeLayer(e),r.mapObjects.delete(t)):console.log("Object not found for deletion : "+t)};return{removeRoute:function(t,e,o){if(this.removeObject(t.objId),e)for(var n=t.notes.iterator;!n.done;)this.removeObject(n.value.objId);if(o)for(var r=t.wayPoints.iterator;!r.done;)this.removeObject(r.value.objId)},addRoute:function(e,o,n){for(var a=[],i=e.itinerary.itineraryPoints.iterator;!i.done;)a.push(i.value.latLng);var c=L.polyline(a,{color:e.color,weight:e.width});if(t(e.objId,c),c.addTo(r.map),c.bindTooltip(s),c.bindPopup(l),L.DomEvent.on(c,"click",d),L.DomEvent.on(c,"contextmenu",u),o)for(var v=e.notes.iterator;!v.done;)this.addNote(v.value);if(n)for(var g=r.editedRoute.wayPoints.iterator,p=0;!g.done;)this.addWayPoint(g.value,g.first?"A":g.last?"B":(++p).toFixed(0))},editRoute:function(t){r.mapObjects.get(t.objId).setStyle({color:t.color,weight:t.width})},removeObject:function(t){e(t)},removeAllObjects:function(){r.mapObjects.forEach(function(t,e,o){L.DomEvent.off(t),r.map.removeLayer(t)}),r.mapObjects.clear()},zoomToItineraryPoint:function(t){map.setView(r.editedRoute.itinerary.itineraryPoints.getAt(t).latLng,n.itineraryPointZoom)},addItineraryPointMarker:function(e){t(e,L.circle(r.editedRoute.itinerary.itineraryPoints.getAt(e).latLng,n.itineraryPointMarker))},addWayPoint:function(e,o){if(0!==e.lat||0!==e.lng){var n='<div class="TravelNotes-WayPoint TravelNotes-WayPoint'+("A"===o?"Start":"B"===o?"End":"Via")+'"></div><div class="TravelNotes-WayPointText">'+o+"</div>",r=L.marker(e.latLng,{icon:L.divIcon({iconSize:[40,40],iconAnchor:[20,40],html:n,className:"TravelNotes-WayPointStyle"}),draggable:!0});r.objId=e.objId,t(e.objId,r),L.DomEvent.on(r,"dragend",g)}},addNote:function(e){var o=L.marker(e.latLng,{icon:L.divIcon({iconSize:[n.note.grip.size,n.note.grip.size],iconAnchor:[n.note.grip.size/2,n.note.grip.size/2],html:"<div></div>"}),zIndexOffset:-1e3,opacity:n.note.grip.opacity,draggable:!0});o.objId=e.objId,L.DomEvent.on(o,"dragend",m),L.DomEvent.on(o,"drag",T);var r=L.divIcon({iconSize:[e.iconWidth,e.iconHeight],iconAnchor:[e.iconWidth/2,e.iconHeight/2],popupAnchor:[0,-e.iconHeight/2],html:e.iconContent,className:n.note.style}),s=L.marker(e.iconLatLng,{icon:r,draggable:!0});s.bindPopup(i),0!==e.tooltipContent.length&&(s.bindTooltip(a),s.getTooltip().options.offset[0]=e.iconWidth/2),s.objId=e.objId;var l=L.polyline([e.latLng,e.iconLatLng],n.note.polyline);l.objId=e.objId;var d=L.layerGroup([s,l,o]);d.markerId=L.Util.stamp(s),d.polylineId=L.Util.stamp(l),d.bulletId=L.Util.stamp(o),t(e.objId,d),L.DomEvent.on(s,"contextmenu",c),L.DomEvent.on(s,"dragend",v),L.DomEvent.on(s,"drag",p)},editNote:function(t){var e=L.divIcon({iconSize:[t.iconWidth,t.iconHeight],iconAnchor:[t.iconWidth/2,t.iconHeight/2],popupAnchor:[0,-t.iconHeight/2],html:t.iconContent,className:n.note.style}),o=r.mapObjects.get(t.objId),i=o.getLayer(o.markerId);i.setIcon(e),i.unbindTooltip(),0!==t.tooltipContent.length&&(i.bindTooltip(a),i.getTooltip().options.offset[0]=t.iconWidth/2)}}})}()},{"../Data/DataManager":2,"../UI/ContextMenu":17,"../UI/Translator":25,"../core/RouteEditor":32,"../util/Config":46,"../util/TravelUtilities":47,"../util/Utilities":48,"./NoteEditor":31,"./RouteEditor":32}],31:[function(t,e,o){!function(){"use strict";var o=t("../UI/Translator")(),n=t("../Data/DataManager")(),r=t("../util/TravelUtilities")();void 0!==e&&e.exports&&(e.exports=function(){return{newNote:function(e){var o=t("../data/Note")();return o.latLng=e,o.iconLatLng=e,o},newRouteNote:function(e,o){var a=r.getClosestLatLngDistance(n.getRoute(e),[o.latlng.lat,o.latlng.lng]),i=this.newNote(a.latLng);i.distance=a.distance,t("../UI/NoteDialog")(i,e)},newTravelNote:function(e){var o=this.newNote(e);t("../UI/NoteDialog")(o,-1)},endNoteDialog:function(e,o){n.getNoteAndRoute(e.objId).note?t("../core/MapEditor")().editNote(e):this.addNote(e,o)},addNote:function(e,o){-1===e.distance?n.travel.notes.add(e):n.getRoute(o).notes.add(e),t("../core/MapEditor")().addNote(e)},editNote:function(e){var o=n.getNoteAndRoute(e);t("../UI/NoteDialog")(o.note,null===o.route?-1:o.route.objId)},removeNote:function(e){var o=n.getNoteAndRoute(e);t("../core/MapEditor")().removeObject(e),o.route?n.notes.remove(e):n.travel.notes.remove(e)},getMapContextMenu:function(t){var e=[];return e.push({context:this,name:o.getText("NoteEditor - new travel note"),action:this.newTravelNote,param:t}),e},getNoteContextMenu:function(t){var e=[],r=n.getNoteAndRoute(t);return e.push({context:this,name:o.getText("NoteEditor - edit note"),action:this.editNote,param:t}),e.push({context:this,name:o.getText("NoteEditor - delete note"),action:r.route?null:this.removeNote,param:t}),e}}})}()},{"../Data/DataManager":2,"../UI/NoteDialog":21,"../UI/Translator":25,"../core/MapEditor":30,"../data/Note":40,"../util/TravelUtilities":47}],32:[function(t,e,o){!function(){"use strict";var o=t("../Data/DataManager")(),n=t("../util/Config")(),r=t("../UI/Translator")(),a=t("../core/NoteEditor")(),i=t("../core/MapEditor")(),s=t("../UI/RouteEditorUI")(),l=t("../core/ItineraryEditor")();void 0!==e&&e.exports&&(e.exports=function(){return{startRouting:function(){n.routing.auto&&t("../core/Router")().startRouting(o.editedRoute)},endRouting:function(){i.removeRoute(o.editedRoute,!0,!0);for(var e=o.editedRoute.notes.iterator;!e.done;){var n=t("../util/TravelUtilities")().getClosestLatLngDistance(o.editedRoute,e.value.latLng);e.value.latLng=n.latLng,e.value.distance=n.distance}l.setItinerary(),i.addRoute(o.editedRoute,!0,!0),s.setWayPointsList()},saveEdition:function(){var e=t("../data/Route")();e.object=o.editedRoute.object,o.travel.routes.replace(o.editedRoute.routeInitialObjId,e),o.editedRoute.routeInitialObjId=e.objId,this.clear()},cancelEdition:function(){this.clear()},clear:function(){i.removeRoute(o.editedRoute,!0,!0),i.addRoute(o.getRoute(o.editedRoute.routeInitialObjId),!0,!1),o.editedRoute=t("../data/Route")(),o.editedRoute.routeChanged=!1,o.editedRoute.routeInitialObjId=-1,t("../UI/TravelEditorUI")().setRoutesList(),s.setWayPointsList(),l.setItinerary()},editRoute:function(e){if(o.editedRoute.routeChanged)t("../core/ErrorEditor")().showError(r.getText("RouteEditor-Not possible to edit a route without a save or cancel"));else{var n=o.getRoute(e);o.editedRoute=t("../data/Route")(),o.editedRoute.object=n.object,o.editedRoute.routeInitialObjId=n.objId,i.removeRoute(n,!0,!1),i.addRoute(o.editedRoute,!0,!0),s.expand(),s.setWayPointsList(),l.setItinerary()}},removeRoute:function(e){t("../core/TravelEditor")().removeRoute(e)},routeProperties:function(e){var n=o.getRoute(e);t("../UI/RoutePropertiesDialog")(n)},addWayPoint:function(e){o.editedRoute.routeChanged=!0;var n=t("../data/Waypoint.js")();e&&(n.latLng=e),o.editedRoute.wayPoints.add(n),i.addWayPoint(o.editedRoute.wayPoints.last,o.editedRoute.wayPoints.length-2),o.editedRoute.wayPoints.swap(n.objId,!0),s.setWayPointsList(),this.startRouting()},reverseWayPoints:function(){o.editedRoute.routeChanged=!0;for(var t=o.editedRoute.wayPoints.iterator;!t.done;)i.removeObject(t.value.objId);o.editedRoute.wayPoints.reverse(),t=o.editedRoute.wayPoints.iterator;for(var e=0;!t.done;)i.addWayPoint(t.value,t.first?"A":t.last?"B":(++e).toFixed(0));s.setWayPointsList(),this.startRouting()},removeAllWayPoints:function(){o.editedRoute.routeChanged=!0;for(var t=o.editedRoute.wayPoints.iterator;!t.done;)i.removeObject(t.value.objId);o.editedRoute.wayPoints.removeAll(!0),s.setWayPointsList(),this.startRouting()},removeWayPoint:function(t){o.editedRoute.routeChanged=!0,i.removeObject(t),o.editedRoute.wayPoints.remove(t),s.setWayPointsList(),this.startRouting()},renameWayPoint:function(t,e){o.editedRoute.routeChanged=!0,o.editedRoute.wayPoints.getAt(t).name=e,s.setWayPointsList()},swapWayPoints:function(t,e){o.editedRoute.routeChanged=!0,o.editedRoute.wayPoints.swap(t,e),s.setWayPointsList(),this.startRouting()},setStartPoint:function(t){o.editedRoute.routeChanged=!0,0!==o.editedRoute.wayPoints.first.lat&&i.removeObject(o.editedRoute.wayPoints.first.objId),o.editedRoute.wayPoints.first.latLng=t,i.addWayPoint(o.editedRoute.wayPoints.first,"A"),s.setWayPointsList(),this.startRouting()},setEndPoint:function(t){o.editedRoute.routeChanged=!0,0!==o.editedRoute.wayPoints.last.lat&&i.removeObject(o.editedRoute.wayPoints.last.objId),o.editedRoute.wayPoints.last.latLng=t,i.addWayPoint(o.editedRoute.wayPoints.last,"B"),s.setWayPointsList(),this.startRouting()},wayPointDragEnd:function(t){s.setWayPointsList(),this.startRouting()},getMapContextMenu:function(t){var e=[];return e.push({context:this,name:r.getText("RouteEditor - Select this point as start point"),action:-1!==o.editedRoute.routeInitialObjId?this.setStartPoint:null,param:t}),e.push({context:this,name:r.getText("RouteEditor - Select this point as way point"),action:-1!==o.editedRoute.routeInitialObjId?this.addWayPoint:null,param:t}),e.push({context:this,name:r.getText("RouteEditor - Select this point as end point"),action:-1!==o.editedRoute.routeInitialObjId?this.setEndPoint:null,param:t}),e},getRouteContextMenu:function(t){var e=[];return e.push({context:this,name:r.getText("RouteEditor - Edit this route"),action:o.editedRoute.routeInitialObjId===t||o.editedRoute.routeChanged?null:this.editRoute,param:t}),e.push({context:this,name:r.getText("RouteEditor - Delete this route"),action:o.editedRoute.routeInitialObjId===t||o.editedRoute.routeChanged?null:this.removeRoute,param:t}),e.push({context:a,name:r.getText("RouteEditor - Add a note on the route"),action:a.newRouteNote,param:t}),e.push({context:this,name:r.getText("RouteEditor - Properties"),action:this.routeProperties,param:t}),e.push({context:this,name:r.getText("RouteEditor - Save modifications on this route"),action:o.editedRoute.objId===t?this.saveEdition:null}),e.push({context:this,name:r.getText("RouteEditor - Cancel modifications on this route"),action:o.editedRoute.objId===t?this.cancelEdition:null}),e}}})}()},{"../Data/DataManager":2,"../UI/RouteEditorUI":22,"../UI/RoutePropertiesDialog":23,"../UI/Translator":25,"../UI/TravelEditorUI":26,"../core/ErrorEditor":28,"../core/ItineraryEditor":29,"../core/MapEditor":30,"../core/NoteEditor":31,"../core/Router":33,"../core/TravelEditor":34,"../data/Route":43,"../data/Waypoint.js":45,"../util/Config":46,"../util/TravelUtilities":47}],33:[function(t,e,o){(function(o){!function(){"use strict";var n=o.providers.get("mapzen"),r=!1,a=t("../Data/DataManager")();void 0!==e&&e.exports&&(e.exports=function(){var e=function(){return a.editedRoute.wayPoints.forEach(function(t,e){return null===e&&(e=!0),e&=0!==t.lat&&0!==t.lng})},o=function(e){n.parseResponse(e,a.editedRoute),r=!1,t("./RouteEditor")().endRouting()},i=function(){r=!0,o('{"trip":{"language":"fr","summary":{"max_lon":5.494842,"max_lat":50.509418,"time":61,"length":0.542,"min_lat":50.506657,"min_lon":5.491873},"locations":[{"lon":5.494623,"lat":50.509399,"type":"break"},{"lon":5.491877,"lat":50.506638,"type":"break"}],"units":"kilometers","legs":[{"shape":"sezi_BswjnIbLhe@lExTfIjU`HjLbFgMlU_`@vHqNlEyOzAmOnCyIt@rA~ClI|^xfAfd@hxAvClJ","summary":{"max_lon":5.494842,"max_lat":50.509418,"time":61,"length":0.542,"min_lat":50.506657,"min_lon":5.491873},"maneuvers":[{"travel_type":"car","street_names":["Chemin du Sârtê"],"verbal_pre_transition_instruction":"Conduisez vers le sud-est sur Chemin du Sârtê pendant 100 mètres. Ensuite, Tournez à gauche dans Basse Voie.","instruction":"Conduisez vers le sud-est sur Chemin du Sârtê.","end_shape_index":4,"type":1,"time":9,"verbal_multi_cue":true,"length":0.130,"begin_shape_index":0,"travel_mode":"drive"},{"travel_type":"car","travel_mode":"drive","verbal_pre_transition_instruction":"Tournez à gauche dans Basse Voie.","verbal_transition_alert_instruction":"Tournez à gauche dans Basse Voie.","length":0.156,"instruction":"Tournez à gauche dans Basse Voie.","end_shape_index":10,"type":15,"time":29,"verbal_post_transition_instruction":"Continuez pendant 200 mètres.","street_names":["Basse Voie"],"begin_shape_index":4},{"travel_type":"car","travel_mode":"drive","verbal_pre_transition_instruction":"Tournez à droite dans Chemin des Patars.","verbal_transition_alert_instruction":"Tournez à droite dans Chemin des Patars.","length":0.256,"instruction":"Tournez à droite dans Chemin des Patars.","end_shape_index":15,"type":10,"time":23,"verbal_post_transition_instruction":"Continuez pendant 300 mètres.","street_names":["Chemin des Patars"],"begin_shape_index":10},{"travel_type":"car","travel_mode":"drive","begin_shape_index":15,"time":0,"type":4,"end_shape_index":15,"instruction":"Vous êtes arrivé à votre destination.","length":0.000,"verbal_transition_alert_instruction":"Vous arriverez à votre destination.","verbal_pre_transition_instruction":"Vous êtes arrivé à votre destination."}]}],"status_message":"Found route between points","status":0}}')},s=function(){return!r&&!!e()&&(i(),!0)};return{startRouting:function(){s()}}})}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../Data/DataManager":2,"./RouteEditor":32}],34:[function(t,e,o){!function(){"use strict";t("../util/Config")(),t("../UI/Translator")();var o=t("../Data/DataManager")();void 0!==e&&e.exports&&(e.exports=function(){var e=t("../UI/TravelEditorUI")(),n=t("../UI/Translator")();return{addRoute:function(){o.travel.routes.add(t("../Data/Route")()),e.setRoutesList()},editRoute:function(e){t("./RouteEditor")().editRoute(e)},removeRoute:function(r){r===o.editedRoute.routeInitialObjId&&o.editedRoute.routeChanged?t("./ErrorEditor")().showError(n.getText("TravelEditor - cannot remove an edited route")):(t("./MapEditor")().removeObject(r),o.travel.routes.remove(r),e.setRoutesList(),r===o.editedRoute.routeInitialObjId&&t("./RouteEditor")().clear())},renameRoute:function(t,n){o.getRoute(t).name=n,e.setRoutesList(),t===o.editedRoute.routeInitialObjId&&(o.editedRoute.name=n)},swapRoute:function(t,n){o.travel.routes.swap(t,n),e.setRoutesList()},saveTravel:function(){o.editedRoute.routeChanged?t("./ErrorEditor")().showError(n.getText("TravelEditor - Not possible to save a travel without a save or cancel")):t("../util/Utilities")().saveFile(o.travel.name,JSON.stringify(o.travel.object))},openTravel:function(e){var n=new FileReader;n.onload=function(e){o.travel.object=JSON.parse(n.result),o.travel.name=r,t("../UI/TravelEditorUI")().setRoutesList(),t("../core/MapEditor")().removeAllObjects();for(var a=o.travel.routes.iterator;!a.done;)t("../core/MapEditor")().addRoute(a.value,!0,!1);for(var i=o.travel.notes.iterator;!i.done;)t("../core/MapEditor")().addNote(i.value)};var r=e.target.files[0].name;n.readAsText(e.target.files[0])},clear:function(){o.editedRoute=t("../Data/Route")(),o.editedRoute.routeChanged=!1,o.editedRoute.routeInitialObjId=-1,o.travel=t("../Data/Travel")(),t("../core/RouteEditor")().clear(),t("../UI/TravelEditorUI")().setRoutesList(),t("../core/MapEditor")().removeAllObjects()}}})}()},{"../Data/DataManager":2,"../Data/Route":9,"../Data/Travel":10,"../UI/Translator":25,"../UI/TravelEditorUI":26,"../core/MapEditor":30,"../core/RouteEditor":32,"../util/Config":46,"../util/Utilities":48,"./ErrorEditor":28,"./MapEditor":30,"./RouteEditor":32}],35:[function(t,e,o){arguments[4][1][0].apply(o,arguments)},{"./ItineraryPoint":38,"./Maneuver":39,"./Note":40,"./Route":43,"./WayPoint":44,dup:1}],36:[function(t,e,o){arguments[4][2][0].apply(o,arguments)},{"../Data/Route":9,"../Data/Travel":10,dup:2}],37:[function(t,e,o){arguments[4][3][0].apply(o,arguments)},{"../UI/Translator":25,"./Collection":35,"./ObjId":41,"./ObjType":42,dup:3}],38:[function(t,e,o){arguments[4][4][0].apply(o,arguments)},{"../UI/Translator":25,"./ObjId":41,"./ObjType":42,dup:4}],39:[function(t,e,o){arguments[4][5][0].apply(o,arguments)},{"../UI/Translator":25,"./ObjId":41,"./ObjType":42,dup:5}],40:[function(t,e,o){arguments[4][6][0].apply(o,arguments)},{"../UI/Translator":25,"./ObjId":41,"./ObjType":42,dup:6}],41:[function(t,e,o){arguments[4][7][0].apply(o,arguments)},{dup:7}],42:[function(t,e,o){arguments[4][8][0].apply(o,arguments)},{dup:8}],43:[function(t,e,o){arguments[4][9][0].apply(o,arguments)},{"../UI/Translator":25,"../util/Config":46,"./Collection":35,"./Itinerary":37,"./ObjId":41,"./ObjType":42,"./Waypoint":45,dup:9}],44:[function(t,e,o){arguments[4][11][0].apply(o,arguments)},{"../UI/Translator":25,"./ObjId":41,"./ObjType":42,dup:11}],45:[function(t,e,o){arguments[4][11][0].apply(o,arguments)},{"../UI/Translator":25,"./ObjId":41,"./ObjType":42,dup:11}],46:[function(t,e,o){!function(){"use strict";void 0!==e&&e.exports&&(e.exports=function(){return{routing:{auto:!0},language:"fr",itineraryPointMarker:{color:"red",weight:2,radius:7,fill:!1},route:{color:"#ff0000",width:3},note:{grip:{size:10,opacity:0},polyline:{color:"gray",weight:1},style:"TravelNotes-NotesStyle"},itineraryPointZoom:17,routeEditor:{clearAfterCancel:!0,clearAfterSave:!1},travelEditor:{clearAfterSave:!0}}})}()},{}],47:[function(t,e,o){!function(){"use strict";t("../Data/DataManager")();void 0!==e&&e.exports&&(e.exports=function(){return{getClosestLatLngDistance:function(t,e){for(var o=t.itinerary.itineraryPoints.iterator,n=(o.done,Number.MAX_VALUE),r=L.Projection.SphericalMercator.project(L.latLng(e[0],e[1])),a=L.Projection.SphericalMercator.project(L.latLng(o.value.lat,o.value.lng)),i=null,s=0,l=o.value.distance;!o.done;){var d=L.Projection.SphericalMercator.project(L.latLng(o.value.lat,o.value.lng)),u=L.LineUtil.pointToSegmentDistance(r,a,d);u<n&&(n=u,s=l-(i=L.Projection.SphericalMercator.unproject(L.LineUtil.closestPointOnSegment(r,a,d))).distanceTo(L.latLng(o.value.lat,o.value.lng))),l+=o.value.distance,a=d}return{latLng:[i.lat,i.lng],distance:s}}}})}()},{"../Data/DataManager":2}],48:[function(t,e,o){!function(){"use strict";var o=t("../UI/Translator")();void 0!==e&&e.exports&&(e.exports=function(){return{storageAvailable:function(t){try{var e=window[t],o="__storage_test__";return e.setItem(o,o),e.removeItem(o),!0}catch(t){return!1}},fileAPIAvailable:function(){try{return new File(["testdata"],{type:"text/plain"}),!0}catch(t){return!!window.navigator.msSaveOrOpenBlob}},saveFile:function(t,e,o){if(o||(o="text/plain"),window.navigator.msSaveOrOpenBlob)try{window.navigator.msSaveOrOpenBlob(new Blob([e]),t)}catch(t){}else try{var n=window.URL.createObjectURL(new File([e],{type:o})),r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(n)}catch(t){}},formatTime:function(t){if(0===(t=Math.floor(t)))return"";var e=Math.floor(t/86400),n=Math.floor(t%86400/3600),r=Math.floor(t%3600/60),a=Math.floor(t%60);return 0<e?e+"&nbsp;"+o.getText("Utilities - day")+"&nbsp;"+n+"&nbsp;h":0<n?n+"&nbsp;"+o.getText("Utilities - hour")+"&nbsp;"+r+"&nbsp;"+o.getText("Utilities - minute"):0<r?r+"&nbsp;"+o.getText("Utilities - minute"):a+"&nbsp;"+o.getText("Utilities - second")},formatDistance:function(t){return 0===(t=Math.floor(t))?"":1e3>t?t+"&nbsp;m":Math.floor(t/1e3)+"."+Math.floor(t%1e3/100)+"&nbsp;km"},readURL:function(){for(var t=decodeURI(window.location.search).substr(1).split("&"),e="?",o=0;o<t.length;o++){var n=t[o].split("=");2===n.length&&-1!==n[0].indexOf("ProviderKey")?this.storageAvailable("sessionStorage")&&sessionStorage.setItem(n[0].substr(0,n[0].length-11).toLowerCase(),btoa(n[1])):(e+="?"===e?"":"&",e+=t[o])}var r={index:"bar"};history.pushState(r,"page",e)}}})}()},{"../UI/Translator":25}]},{},[14]);