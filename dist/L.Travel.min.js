/*! leaflet.Travel - version 0.1.0 - 2017-09-01 - Copyright 2015 2017 Christian Guyette - Contact: http//www.ouaie.be/ - This  program is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 3 of the License, or any later version.*/


!function t(e,o,r){function n(a,s){if(!o[a]){if(!e[a]){var d="function"==typeof require&&require;if(!s&&d)return d(a,!0);if(i)return i(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=o[a]={exports:{}};e[a][0].call(u.exports,function(t){var o=e[a][1][t];return n(o||t)},u,u.exports,t,e,o,r)}return o[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)n(r[a]);return n}({1:[function(t,e,o){!function(){"use strict";void 0!==e&&e.exports&&(e.exports=function(t){var e=[],o=t,r=function(t){return e.findIndex(function(e){return e.objId===t})},n=function(t){if(!t.objType||!t.objType.name||t.objType.name!==o)throw"invalid object name for add function";e.push(t)},i=function(t){var o=r(t);if(-1===o)throw"invalid objId for getAt function";return e[o]},a=function(){e.reverse()},s=function(t){if(-1===r(t))throw"invalid objId for remove function";e.splice(r(t),1)},d=function(t,o){var n=r(t);if(-1===n)throw"invalid objId for replace function";e[n]=o},l=function(t){t?e.splice(1,e.length-2):e.length=0},u=function(t,o){var n=r(t);if(-1===n||0===n&&o||e.length-1===n&&!o)throw"invalid objId for swap function";var i=e[n];e[n]=e[n+(o?-1:1)],e[n+(o?-1:1)]=i},c=function(){var t=-1;return{get value(){return t<e.length?e[t]:null},get done(){return++t>=e.length},get first(){return 0===t},get last(){return t>=e.length-1}}},g=function(){return e[0]},v=function(){return e[e.length-1]};return{add:function(t){n(t)},getAt:function(t){return i(t)},reverse:function(){a()},remove:function(t){s(t)},replace:function(t,e){d(t,e)},removeAll:function(t){l(t)},swap:function(t,e){u(t,e)},get iterator(){return c()},get first(){return g()},get last(){return v()}}})}()},{}],2:[function(t,e,o){!function(){"use strict";var o=t("./ObjType")("Geom","1.0.0");void 0!==e&&e.exports&&(e.exports=function(){var e="",r=6,n="#000000",i=5,a=t("./ObjId")();return{get pnts(){return e},set pnts(t){e=t},get precision(){return r},set precision(t){r=t},get color(){return n},set color(t){n=t},get weight(){return i},set weight(t){i=t},get objId(){return a},get objType(){return o},get object(){return{pnts:e,precision:r,color:n,weight:i,objId:a,objType:o}},set object(s){s=o.validate(s),e=s.pnts||"",r=s.precision||6,n=s.color||"#000000",i=s.weight||5,a=t("./ObjId")()}}})}()},{"./ObjId":4,"./ObjType":5}],3:[function(t,e,o){!function(){"use strict";var o=t("./ObjType")("Note","1.0.0");void 0!==e&&e.exports&&(e.exports=function(){var e=t("./ObjId")(),r="",n="",i="",a="",s="",d=0,l=0,u=0,c=0;return{get text(){return r},set text(t){r=t},get phone(){return n},set phone(t){n=t},get url(){return i},set url(t){i=t},get address(){return a},set address(t){a=t},get categoryId(){return s},set categoryId(t){s=t},get iconLat(){return d},set iconLat(t){d=t},get iconLng(){return l},set iconLng(t){l=t},get iconLatLng(){return[d,l]},set iconLatLng(t){d=t[0],l=t[1]},get lat(){return u},set lat(t){u=t},get lng(){return c},set lng(t){c=t},get latLng(){return[u,c]},set latLng(t){u=t[0],c=t[1]},get objId(){return e},get objType(){return o},get object(){return{text:r,phone:n,url:i,address:a,categoryId:s,iconLat:d,iconLng:l,lat:u,lng:c,objId:e,objType:o}},set object(g){g=o.validate(g),r=g.text||"",n=g.phone||"",i=g.url||"",a=g.address||"",s=g.categoryId||"",d=g._IconLat||0,l=g._IconLng||0,u=g.lat||0,c=g.lng||0,e=t("./ObjId")()}}})}()},{"./ObjId":4,"./ObjType":5}],4:[function(t,e,o){!function(){"use strict";var t=0;void 0!==e&&e.exports&&(e.exports=function(){return++t})}()},{}],5:[function(t,e,o){!function(){"use strict";void 0!==e&&e.exports&&(e.exports=function(t,e){var o=t,r=e;return{get name(){return o},get version(){return r},get object(){return{name:o,version:r}},validate:function(t){if(!t.objType)throw"No objType for "+o;if(!t.objType.name)throw"No name for "+o;if(o!==t.objType.name)throw"Invalid name for "+o;if(!t.objType.version)throw"No version for "+o;if(r!==t.objType.version)throw"invalid version for "+o;if(!t.objId)throw"No objId for "+o;return t}}})}()},{}],6:[function(t,e,o){!function(){"use strict";var o=t("./ObjType")("Route","1.0.0");void 0!==e&&e.exports&&(e.exports=function(){var e="",r=t("./Collection")("WayPoint");r.add(t("./Waypoint")()),r.add(t("./Waypoint")());var n=t("./Collection")("Note"),i=t("./Geom")(),a=t("./ObjId")();return{get name(){return e},set name(t){e=t},get wayPoints(){return r},get notes(){return n},get geom(){return i},set geom(t){i=t},get objId(){return a},get objType(){return o},get object(){for(var t=[],r=this.wayPoints.iterator;!r.done;)t.push(r.value.object);for(var n=[],s=this.notes.iterator;!s.done;)n.push(s.value.object);return{name:e,wayPoints:t,notes:n,geom:i.object,objId:a,objType:o}},set object(s){s=o.validate(s),e=s.name||"",r.removeAll();for(var d=0;d<s.wayPoints.length;d++){var l=t("./WayPoint")();l.object=s.wayPoints[d],r.add(l)}n.removeAll();for(var u=0;u<s.notes.length;u++){var c=t("./Note")();c.object=s.notes[u],n.add(c)}var g=t("./Geom")();g.object=s.geom,i=g,a=t("./ObjId")()}}})}()},{"./Collection":1,"./Geom":2,"./Note":3,"./ObjId":4,"./ObjType":5,"./WayPoint":8,"./Waypoint":9}],7:[function(t,e,o){!function(){"use strict";var o=t("./ObjType")("TravelData","1.0.0"),r="",n=t("./Collection")("Route"),i=t("./Collection")("Note"),a=-1;void 0!==e&&e.exports&&(e.exports=function(){return{get routes(){return n},get notes(){return i},get objId(){return a},get objType(){return o},get object(){for(var t=[],e=this.routes.iterator;!e.done;)t.push(e.value.object);for(var n=[],i=this.notes.iterator;!i.done;)n.push(i.value.object);return{name:r,routes:t,notes:n,objId:a,objType:o}},set object(e){e=o.validate(e),r=e.name||"",n.removeAll();for(var s=0;s<e.routes.length;s++){var d=t("./Route")();d.object=e.routes[s],n.add(d)}i.removeAll();for(var l=0;l<e.notes.length;l++){var u=t("./Note")();u.object=e.notes[l],i.add(u)}a=t("./ObjId")()}}})}()},{"./Collection":1,"./Note":3,"./ObjId":4,"./ObjType":5,"./Route":6}],8:[function(t,e,o){!function(){"use strict";var o=t("./ObjType")("WayPoint","1.0.0");void 0!==e&&e.exports&&(e.exports=function(){var e="",r=0,n=0,i=t("./ObjId")();return{get name(){return e},set name(t){e=t},get UIName(){return""!==e?e:0!==r&&0!==n?r.toFixed(5)+(0<r?" N - ":" S - ")+n.toFixed(5)+(0<n?" E":" W"):""},get lat(){return r},set lat(t){r=t},get lng(){return n},set lng(t){n=t},get latLng(){return[r,n]},set latLng(t){r=t[0],n=t[1]},get objId(){return i},get objType(){return o},get object(){return{name:e,lat:r,lng:n,objId:i,objType:o}},set object(a){a=o.validate(a),e=a.name||"",r=a.lat||0,n=a.lng||0,i=t("./ObjId")()}}})}()},{"./ObjId":4,"./ObjType":5}],9:[function(t,e,o){arguments[4][8][0].apply(o,arguments)},{"./ObjId":4,"./ObjType":5,dup:8}],10:[function(t,e,o){!function(){"use strict";L.Travel=L.Travel||{},L.travel=L.travel||{},L.Travel.Control=L.Control.extend({options:{position:"topright"},initialize:function(t){L.Util.setOptions(this,t)},onAdd:function(e){var o=t("./UI/UserInterface")().UI,r=t("./Data/TravelData")().routes;return t("./UI/RoutesListEditorUI")().writeRoutesList(r),o}}),L.travel.control=function(t){return new L.Travel.Control(t)},void 0!==e&&e.exports&&(e.exports=L.travel.control)}()},{"./Data/TravelData":7,"./UI/RoutesListEditorUI":16,"./UI/UserInterface":19}],11:[function(t,e,o){!function(){"use strict";L.Travel=L.Travel||{},L.travel=L.travel||{};var o=[],r=[],n=!1,i=!1;L.Travel.getInterface=function(){t("./Data/TravelData")().object={name:"TravelData sample",routes:[{name:"Chemin du Sârtê",wayPoints:[{name:"Chemin du Sârtê 1 - Anthisnes",lat:50.50881,lng:5.49314,objId:-1,objType:{name:"WayPoint",version:"1.0.0"}},{name:"Chemin du Sârtê 22 - Anthisnes",lat:50.50937,lng:5.4947,objId:-2,objType:{name:"WayPoint",version:"1.0.0"}}],notes:[],geom:{pnts:"w~xi_BwwgnIaHkLgIkUmEyTcLie@",precision:6,color:"#0000ff",weight:"5",objId:-3,objType:{name:"Geom",version:"1.0.0"}},objId:-4,objType:{name:"Route",version:"1.0.0"}}],notes:[],objId:-5,objType:{name:"TravelData",version:"1.0.0"}};var a,s=function(e){t("./UI/ContextMenu")(e,o)},d=function(e){t("./UI/ContextMenu")(e,r)};return{addControl:function(o,r,n){if(r){document.getElementById(r).appendChild(t("./UI/UserInterface")().UI);var i=t("./Data/TravelData")().routes;t("./UI/RoutesListEditorUI")().writeRoutesList(i)}else void 0!==e&&e.exports&&o.addControl(t("./L.Travel.Control")(n));a=o},addMapContextMenu:function(t,e){t&&a.on("click",s),e&&a.on("contextmenu",s)},get rightContextMenu(){return n},set rightContextMenu(t){t&&!n?(a.on("contextmenu",d),n=!0):!t&&n&&(a.off("contextmenu",d),n=!1)},get leftContextMenu(){return i},set leftContextMenu(t){t&&!i?(a.on("click",s),i=!0):!t&&i&&(a.off("click",s),i=!1)},get leftUserContextMenu(){return o},set leftUserContextMenu(t){o=t},get rightUserContextMenu(){return r},set rightUserContextMenu(t){r=t},get version(){return"1.0.0"}}},L.travel.interface=function(){return L.Travel.getInterface()},void 0!==e&&e.exports&&(e.exports=L.travel.interface)}()},{"./Data/TravelData":7,"./L.Travel.Control":10,"./UI/ContextMenu":12,"./UI/RoutesListEditorUI":16,"./UI/UserInterface":19}],12:[function(t,e,o){!function(){"use strict";var o=t("./Translator")(),r=[],n=null,i=null,a=0,s=function(){document.removeEventListener("keydown",d,!0),document.removeEventListener("keypress",l,!0),document.removeEventListener("keyup",u,!0);var t=n.childNodes;t[0].firstChild.removeEventListener("click",s,!1);for(var e=1;e<t.length;e++)t[e].firstChild.removeEventListener("click",s,!1);document.getElementsByTagName("body")[0].removeChild(n),n=null},d=function(t){n&&(t.preventDefault(),t.stopPropagation()),"Escape"!==t.key&&"Esc"!==t.key||s(),"ArrowDown"!==t.key&&"ArrowRight"!==t.key&&"Tab"!==t.key||(++a>r.length&&(a=1),n.childNodes[a].firstChild.focus()),"ArrowUp"!==t.key&&"ArrowLeft"!==t.key||(--a<1&&(a=r.length),n.childNodes[a].firstChild.focus()),"Home"===t.key&&(a=1,n.childNodes[a].firstChild.focus()),"End"===t.key&&(a=r.length,n.childNodes[a].firstChild.focus()),"Enter"===t.key&&a>0&&r[a-1].action&&(r[a-1].action(),s())},l=function(t){t.preventDefault(),t.stopPropagation()},u=function(t){t.preventDefault(),t.stopPropagation()},c=function(t){t.stopPropagation(),r[t.target.menuItem].action.call(r[t.target.menuItem].context,i),s()};void 0!==e&&e.exports&&(e.exports=function(e,a){if(i=e,n)s();else{r.length=0,r=t("../core/RouteEditor")().contextMenu.concat(a);var g=t("./HTMLElementsFactory")(),v=document.getElementsByTagName("body")[0],m=g.create("div",{className:"ContextMenu-Panel"},v),p=m.clientWidth,f=m.clientHeight;v.removeChild(m),n=g.create("div",{id:"ContextMenu-Container",className:"ContextMenu-Container"},v),g.create("div",{innerHTML:"&#x274c",className:"ContextMenu-CloseButton",title:o.getText("ContextMenu - close")},n).addEventListener("click",s,!1);for(var h=0;h<r.length;h++){var L=g.create("div",{className:"ContextMenu-ItemContainer"},n),T=g.create("button",{innerHTML:r[h].name,id:"ContextMenu-Item"+h,className:r[h].action?"ContextMenu-Item":"ContextMenu-Item ContextMenu-ItemDisabled"},L);r[h].action&&T.addEventListener("click",c,!1),T.menuItem=h}var I=Math.min(e.originalEvent.clientY,f-n.clientHeight-20),E=Math.min(e.originalEvent.clientX,p-n.clientWidth-20);n.setAttribute("style","top:"+I+"px;left:"+E+"px;"),document.addEventListener("keydown",d,!0),document.addEventListener("keypress",l,!0),document.addEventListener("keyup",u,!0)}})}()},{"../core/RouteEditor":21,"./HTMLElementsFactory":14,"./Translator":18}],13:[function(t,e,o){!function(){"use strict";var o=t("./Translator")(),r=function(t){t.stopPropagation(),n.childNodes[0].innerHTML.length&&(t.target.parentNode.parentNode.childNodes[0].classList.toggle("TravelControl-HiddenList"),t.target.innerHTML=t.target.parentNode.parentNode.childNodes[0].classList.contains("TravelControl-HiddenList")?"&#x25b6;":"&#x25b2;",t.target.title=t.target.parentNode.parentNode.childNodes[0].classList.contains("TravelControl-HiddenList")?o.getText("ErrorEditorUI - Show"):o.getText("ErrorEditorUI - Hide"))},n=null,i=null;void 0!==e&&e.exports&&(e.exports=function(){var e=function(){n.childNodes[1].firstChild.innerHTML="&#x25b2;",n.childNodes[1].firstChild.title=o.getText("ErrorEditorUI - Hide"),n.childNodes[0].classList.remove("TravelControl-HiddenList")},a=function(){n.childNodes[1].firstChild.innerHTML="&#x25b6;",n.childNodes[1].firstChild.title=o.getText("ErrorEditorUI - Show"),n.childNodes[0].classList.add("TravelControl-HiddenList")};return n||(function(){var e=t("./HTMLElementsFactory")();n=e.create("div",{id:"TravelControl-ErrorDiv",className:"TravelControl-Div"}),i=e.create("div",{id:"TravelControl-ErrorDataDiv",className:"TravelControl-DataDiv"},n);var o=e.create("div",{id:"TravelControl-ErrorHeaderDiv",className:"TravelControl-HeaderDiv"},n);e.create("span",{innerHTML:"&#x25b2;",id:"TravelControl-ErrorExpandButton",className:"TravelControl-ExpandButton"},o).addEventListener("click",r,!1),e.create("span",{innerHTML:"Erreurs&nbsp;:",id:"TravelControl-ErrorHeaderText",className:"TravelControl-HeaderText"},o)}(),a()),{get UI(){return n},expand:function(){e()},reduce:function(){a()},set message(t){i.innerHTML=t},get message(){return i.innerHTML}}})}()},{"./HTMLElementsFactory":14,"./Translator":18}],14:[function(t,e,o){!function(){"use strict";var t=function(){return{create:function(t,e,o){var r;if(r="text"===t.toLowerCase()?document.createTextNode(""):document.createElement(t),o&&o.appendChild(r),e)for(var n in e)try{r[n]=e[n]}catch(t){console.log("Invalid property : "+n)}return r}}};void 0!==e&&e.exports&&(e.exports=function(){return t()})}()},{}],15:[function(t,e,o){!function(){"use strict";var o=t("./Translator")(),r=function(e){e.stopPropagation();t("../core/RouteEditor")().addWayPoint()},n=function(e){e.stopPropagation();t("../core/RouteEditor")().reverseWayPoints()},i=function(e){e.stopPropagation();t("../core/RouteEditor")().removeAllWayPoints()},a=function(e){e.stopPropagation();t("../core/RouteEditor")().removeWayPoint(e.itemNode.dataObjId)},s=function(e){e.stopPropagation();t("../core/RouteEditor")().swapWayPoints(e.itemNode.dataObjId,!0)},d=function(e){e.stopPropagation();t("../core/RouteEditor")().swapWayPoints(e.itemNode.dataObjId,!1)},l=function(e){e.stopPropagation(),t("../core/RouteEditor")().renameWayPoint(e.dataObjId,e.changeValue)},u=function(e){e.stopPropagation(),t("../core/RouteEditor")().saveEdition()},c=function(e){e.stopPropagation(),t("../core/RouteEditor")().cancelEdition()},g=function(t){t.stopPropagation(),t.target.parentNode.classList.toggle("TravelControl-SmallHeader"),t.target.parentNode.parentNode.classList.toggle("TravelControl-SmallHeader"),t.target.parentNode.parentNode.childNodes[1].classList.toggle("TravelControl-HiddenList"),t.target.parentNode.parentNode.childNodes[2].classList.toggle("TravelControl-HiddenList"),t.target.innerHTML=t.target.parentNode.parentNode.childNodes[1].classList.contains("TravelControl-HiddenList")?"&#x25b6;":"&#x25bc;",t.target.title=t.target.parentNode.parentNode.childNodes[1].classList.contains("TravelControl-HiddenList")?o.getText("RouteEditorUI - Show"):o.getText("RouteEditorUI - Hide")},v=null,m=null;void 0!==e&&e.exports&&(e.exports=function(){var e=function(){m.childNodes[0].firstChild.innerHTML="&#x25bc;",m.childNodes[0].firstChild.title="Masquer",m.childNodes[1].classList.remove("TravelControl-HiddenList"),m.childNodes[2].classList.remove("TravelControl-HiddenList")},p=function(){m.childNodes[0].firstChild.innerHTML="&#x25b6;",m.childNodes[0].firstChild.title="Afficher",m.childNodes[1].classList.add("TravelControl-HiddenList"),m.childNodes[2].classList.add("TravelControl-HiddenList")};return m||function(){var e=t("./HTMLElementsFactory")();m=e.create("div",{id:"TravelControl-WayPointsDiv",className:"TravelControl-Div"});var p=e.create("div",{id:"TravelControl-WaypointsHeaderDiv",className:"TravelControl-HeaderDiv"},m);e.create("span",{innerHTML:"&#x25bc;",id:"TravelControl-WayPointsExpandButton",className:"TravelControl-ExpandButton"},p).addEventListener("click",g,!1),e.create("span",{innerHTML:o.getText("RouteEditorUI - Waypoints"),id:"TravelControl-WayPointsHeaderText",className:"TravelControl-HeaderText"},p);var f=e.create("div",{id:"TravelControl-WaypointsDataDiv",className:"TravelControl-DataDiv"},m);(v=t("./SortableList")({minSize:0,listStyle:"LimitedSort",placeholders:[o.getText("RouteEditorUI - Start"),o.getText("RouteEditorUI - Via"),o.getText("RouteEditorUI - End")],indexNames:["A","index","B"],id:"TravelControl-WaypointsList"},f)).container.addEventListener("SortableListDelete",a,!1),v.container.addEventListener("SortableListUpArrow",s,!1),v.container.addEventListener("SortableListDownArrow",d,!1),v.container.addEventListener("SortableListChange",l,!1);var h=e.create("div",{id:"TravelControl-WayPointsButtonsDiv",className:"TravelControl-ButtonsDiv"},m);e.create("span",{id:"TravelControl-SaveRouteButton",className:"TravelControl-Button",title:o.getText("RouteEditorUI - Save"),innerHTML:"&#x1f4be;"},h).addEventListener("click",u,!1),e.create("span",{id:"TravelControl-CancelRouteButton",className:"TravelControl-Button",title:o.getText("RouteEditorUI - Cancel"),innerHTML:"&#x274c"},h).addEventListener("click",c,!1),e.create("span",{id:"TravelControl-ReverseWayPointsButton",className:"TravelControl-Button",title:o.getText("RouteEditorUI - Invert waypoints"),innerHTML:"&#x21C5;"},h).addEventListener("click",n,!1),e.create("span",{id:"TravelControl-AddWayPointButton",className:"TravelControl-Button",title:o.getText("RouteEditorUI - Add waypoint"),innerHTML:"+"},h).addEventListener("click",r,!1),e.create("span",{id:"TravelControl-RemoveAllWayPointsButton",className:"TravelControl-Button",title:o.getText("RouteEditorUI - Delete all waypoints"),innerHTML:"&#x267b;"},h).addEventListener("click",i,!1)}(),{get UI(){return m},expand:function(){e()},reduce:function(){p()},writeWayPointsList:function(t){v.removeAllItems();for(var e=t.iterator;!e.done;)v.addItem(e.value.UIName,e.value.objId,e.last)}}})}()},{"../core/RouteEditor":21,"./HTMLElementsFactory":14,"./SortableList":17,"./Translator":18}],16:[function(t,e,o){!function(){"use strict";var o=t("./Translator")(),r=function(t){t.target.parentNode.classList.toggle("TravelControl-SmallHeader"),t.target.parentNode.parentNode.classList.toggle("TravelControl-SmallHeader"),t.target.parentNode.parentNode.childNodes[1].classList.toggle("TravelControl-HiddenList"),t.target.parentNode.parentNode.childNodes[2].classList.toggle("TravelControl-HiddenList"),t.target.innerHTML=t.target.parentNode.parentNode.childNodes[1].classList.contains("TravelControl-HiddenList")?"&#x25b6;":"&#x25bc;",t.target.title=t.target.parentNode.parentNode.childNodes[1].classList.contains("TravelControl-HiddenList")?o.getText("RoutesListEditorUI - Show"):o.getText("RoutesListEditorUI - Hide"),t.stopPropagation()},n=function(e){e.stopPropagation(),t("../core/RoutesListEditor")().removeAllRoutes()},i=function(e){e.stopPropagation(),t("../core/RoutesListEditor")().addRoute()},a=function(e){e.stopPropagation(),t("../core/RoutesListEditor")().removeRoute(e.itemNode.dataObjId)},s=function(e){e.stopPropagation(),t("../core/RoutesListEditor")().swapRoute(e.itemNode.dataObjId,!0)},d=function(e){e.stopPropagation(),t("../core/RoutesListEditor")().swapRoute(e.itemNode.dataObjId,!1)},l=function(e){e.stopPropagation(),t("../core/RoutesListEditor")().editRoute(e.itemNode.dataObjId)},u=function(e){e.stopPropagation(),t("../core/RoutesListEditor")().renameRoute(e.dataObjId,e.changeValue)},c=null,g=null;void 0!==e&&e.exports&&(e.exports=function(){return c||function(){var e=t("./HTMLElementsFactory")();c=e.create("div",{id:"TravelControl-RoutesDiv",className:"TravelControl-Div"});var v=e.create("div",{id:"TravelControl-RoutesHeaderDiv",className:"TravelControl-HeaderDiv"},c);e.create("span",{innerHTML:"&#x25bc;",id:"TravelControl-RoutesExpandButton",className:"TravelControl-ExpandButton"},v).addEventListener("click",r,!1),e.create("span",{innerHTML:o.getText("RoutesListEditorUI - Routes"),id:"TravelControl-RoutesHeaderText",className:"TravelControl-HeaderText"},v);var m=e.create("div",{id:"TravelControlRoutesDataDiv",className:"TravelControl-DataDiv"},c);(g=t("./SortableList")({minSize:0,placeholders:[o.getText("RoutesListEditorUI - Route")],id:"TravelControl-RouteList"},m)).container.addEventListener("SortableListDelete",a,!1),g.container.addEventListener("SortableListUpArrow",s,!1),g.container.addEventListener("SortableListDownArrow",d,!1),g.container.addEventListener("SortableListRightArrow",l,!1),g.container.addEventListener("SortableListChange",u,!1);var p=e.create("div",{id:"TravelControl-RoutesButtonsDiv",className:"TravelControl-ButtonsDiv"},c);e.create("span",{id:"TravelControl-AddRoutesButton",className:"TravelControl-Button",title:o.getText("RoutesListEditorUI - New route"),innerHTML:"+"},p).addEventListener("click",i,!1),e.create("span",{id:"TravelControl-DeleteAllRoutesButton",className:"TravelControl-Button",title:o.getText("RoutesListEditorUI - Delete all routes"),innerHTML:"&#x267b;"},p).addEventListener("click",n,!1)}(),{get UI(){return c},writeRoutesList:function(t){g.removeAllItems();for(var e=t.iterator;!e.done;)g.addItem(e.value.name,e.value.objId,!1)}}})}()},{"../core/RoutesListEditor":22,"./HTMLElementsFactory":14,"./SortableList":17,"./Translator":18}],17:[function(t,e,o){!function(){"use strict";var o=function(t){t.stopPropagation();try{t.dataTransfer.setData("Text","1")}catch(t){}console.log("onDragStart")},r=function(t){t.preventDefault(),console.log("onDragOver")},n=function(t){t.preventDefault();t.dataTransfer.getData("Text");console.log("onDrop")},i=function(t){var e=new Event("SortableListDelete");e.itemNode=t.target.parentNode,t.target.parentNode.parentNode.dispatchEvent(e),t.stopPropagation()},a=function(t){var e=new Event("SortableListUpArrow");e.itemNode=t.target.parentNode,t.target.parentNode.parentNode.dispatchEvent(e),t.stopPropagation()},s=function(t){var e=new Event("SortableListDownArrow");e.itemNode=t.target.parentNode,t.target.parentNode.parentNode.dispatchEvent(e),t.stopPropagation()},d=function(t){var e=new Event("SortableListRightArrow");e.itemNode=t.target.parentNode,t.target.parentNode.parentNode.dispatchEvent(e),t.stopPropagation()},l=function(t){console.log("onChange");var e=new Event("SortableListChange");e.dataObjId=t.target.parentNode.dataObjId,e.changeValue=t.target.value,t.target.parentNode.parentNode.dispatchEvent(e),t.stopPropagation()},u=function(e,u){var c=t("./HTMLElementsFactory")();this.items=[],this.removeAllItems=function(){for(var t=0;t<this.items.length;t++)this.container.removeChild(this.items[t]);this.items.length=0},this.addItem=function(t,e,r){t=t||"",e=e||-1;var n="";if(1===this.options.placeholders.length&&(n=this.options.placeholders[0]),3===this.options.placeholders.length){switch(this.items.length){case 0:n=this.options.placeholders[0];break;default:n=this.options.placeholders[1]}r&&(n=this.options.placeholders[2])}var u="";if(1===this.options.indexNames.length&&(u=this.options.indexNames[0]),3===this.options.indexNames.length){switch(this.items.length){case 0:u=this.options.indexNames[0];break;default:u=this.options.indexNames[1]}r&&(u=this.options.indexNames[2])}"index"===u&&(u=this.items.length);var g=c.create("div",{draggable:!1,className:"SortableList-Item"});c.create("div",{className:"SortableList-ItemTextIndex",innerHTML:u},g),c.create("input",{type:"text",className:"SortableList-ItemInput",placeholder:n,value:t},g).addEventListener("change",l,!1),c.create("div",{className:"SortableList-ItemUpArrowButton",title:"Déplacer vers le haut",innerHTML:String.fromCharCode(8679)},g).addEventListener("click",a,!1),c.create("div",{className:"SortableList-ItemDownArrowButton",title:"Déplacer vers le bas",innerHTML:String.fromCharCode(8681)},g).addEventListener("click",s,!1);var v=c.create("div",{className:"SortableList-ItemRightArrowButton",title:"Éditer",innerHTML:String.fromCharCode(8688)},g);"AllSort"===this.options.listStyle&&v.addEventListener("click",d,!1),c.create("div",{className:"SortableList-ItemDeleteButton",title:"Supprimer",innerHTML:"&#x267b;"},g).addEventListener("click",i,!1),g.dataObjId=e,this.items.push(g),("LimitedSort"!==this.options.listStyle||1<this.items.length)&&!r&&(g.draggable=!0,g.addEventListener("dragstart",o,!1),g.classList.add("SortableList-MoveCursor")),this.container.appendChild(g)},this._create=function(t,e){this.options={minSize:2,listStyle:"AllSort",placeholders:[],indexNames:[],id:"SortableList-Container"};for(var o in t)this.options[o]=t[o];"LimitedSort"===this.options.listStyle&&2>this.options.minSize&&(this.options.minSize=0),this.container=c.create("div",{id:t.id,className:"SortableList-Container"}),this.container.classList.add(this.options.listStyle),this.container.addEventListener("dragover",r,!1),this.container.addEventListener("drop",n,!1),e&&e.appendChild(this.container);for(var i=0;i<this.options.minSize;i++)this.addItem()},this._create(e,u)};void 0!==e&&e.exports&&(e.exports=function(t,e){return new u(t,e)})}()},{"./HTMLElementsFactory":14}],18:[function(t,e,o){!function(){"use strict";var t=[{msgid:"ContextMenu - close",msgstr:"Fermer"},{msgid:"ErrorEditorUI - Show",msgstr:"Afficher"},{msgid:"ErrorEditorUI - Hide",msgstr:"Masquer"},{msgid:"NoteCategory-Id01",msgstr:"A&#xe9;roport"},{msgid:"NoteCategory-Id02",msgstr:"Mont&#xe9;e"},{msgid:"NoteCategory-Id03",msgstr:"Distributeur de billets"},{msgid:"NoteCategory-Id04",msgstr:"Attention requise"},{msgid:"NoteCategory-Id05",msgstr:"V&#xe9;los admis"},{msgid:"NoteCategory-Id06",msgstr:"Autobus"},{msgid:"NoteCategory-Id07",msgstr:"Photo"},{msgid:"NoteCategory-Id08",msgstr:"Camping"},{msgid:"NoteCategory-Id09",msgstr:"Ferry"},{msgid:"NoteCategory-Id10",msgstr:"Auberge de jeunesse"},{msgid:"NoteCategory-Id11",msgstr:"Point d'information"},{msgid:"NoteCategory-Id12",msgstr:"Parc national"},{msgid:"NoteCategory-Id13",msgstr:"V&#xe9;los mal vus"},{msgid:"NoteCategory-Id14",msgstr:"Parc r&#xe9;gional"},{msgid:"NoteCategory-Id15",msgstr:"Entretien v&#xe9;lo"},{msgid:"NoteCategory-Id16",msgstr:"Magasin"},{msgid:"NoteCategory-Id17",msgstr:"Aide"},{msgid:"NoteCategory-Id18",msgstr:"Stop"},{msgid:"NoteCategory-Id19",msgstr:"Table"},{msgid:"NoteCategory-Id20",msgstr:"Toilettes"},{msgid:"NoteCategory-Id21",msgstr:"Gare"},{msgid:"NoteCategory-Id22",msgstr:"Tunnel"},{msgid:"NoteCategory-Id23",msgstr:"Point d'eau"},{msgid:"NoteCategory-Id24",msgstr:"Chambre d'hotes"},{msgid:"NoteCategory-Id25",msgstr:"Cafetaria"},{msgid:"NoteCategory-Id26",msgstr:"Restaurant"},{msgid:"NoteCategory-Id27",msgstr:"H&#xf4;tel"},{msgid:"NoteCategory-Id28",msgstr:"D&#xe9;part"},{msgid:"NoteCategory-Id29",msgstr:"Entr&#xe9;e du ferry"},{msgid:"NoteCategory-Id30",msgstr:"Sortie du ferry"},{msgid:"NoteCategory-Id31",msgstr:"Continuer"},{msgid:"NoteCategory-Id32",msgstr:"Tourner l&#xe9;g&#xe8;rement &#xe0; gauche"},{msgid:"NoteCategory-Id33",msgstr:"Tourner &#xe0; gauche"},{msgid:"NoteCategory-Id34",msgstr:"Tourner fort &#xe0; gauche"},{msgid:"NoteCategory-Id35",msgstr:"Tourner l&#xe9;g&#xe8;rement &#xe0; droite"},{msgid:"NoteCategory-Id36",msgstr:"Tourner &#xe0; droite"},{msgid:"NoteCategory-Id37",msgstr:"Tourner fort &#xe0; droite"},{msgid:"NoteCategory-Id38",msgstr:"Point noeud v&#xe9;lo"},{msgid:"RouteEditor-Not possible to edit a route without a save or cancel",msgstr:"Il n'est pas possible d'éditer une route sans sauver ou abandonner les modifications"},{msgid:"RouteEditor - Select this point as start point",msgstr:"Sélectionner cet endroit comme point de départ"},{msgid:"RouteEditor - Select this point as way point",msgstr:"Sélectionner cet endroit comme point intermédiaire"},{msgid:"RouteEditor - Select this point as end point",msgstr:"Sélectionner cet endroit comme point de fin"},{msgid:"RouteEditorUI - Show",msgstr:"Afficher"},{msgid:"RouteEditorUI - Hide",msgstr:"Masquer"},{msgid:"RouteEditorUI - Waypoints",msgstr:"Points de passage&nbsp;:"},{msgid:"RouteEditorUI - Start",msgstr:"Départ"},{msgid:"RouteEditorUI - Via",msgstr:"Point de passage"},{msgid:"RouteEditorUI - End",msgstr:"Fin"},{msgid:"RouteEditorUI - Save",msgstr:"Sauver les modifications"},{msgid:"RouteEditorUI - Cancel",msgstr:"Abandonner les modifications"},{msgid:"RouteEditorUI - Invert waypoints",msgstr:"Inverser les points de passage"},{msgid:"RouteEditorUI - Add waypoint",msgstr:"Ajouter un point de passage"},{msgid:"RouteEditorUI - Delete all waypoints",msgstr:"Supprimer tous les points de passage"},{msgid:"RoutesListEditorUI - Show",msgstr:"Afficher"},{msgid:"RoutesListEditorUI - Hide",msgstr:"Masquer"},{msgid:"RoutesListEditorUI - Routes",msgstr:"Routes&nbsp;:"},{msgid:"RoutesListEditorUI - Route",msgstr:"Route"},{msgid:"RoutesListEditorUI - ",msgstr:"xxx"},{msgid:"RoutesListEditorUI - ",msgstr:"xxx"},{msgid:"RoutesListEditorUI - ",msgstr:"xxx"},{msgid:"RoutesListEditorUI - New route",msgstr:"Nouvelle route"},{msgid:"RoutesListEditorUI - Delete all routes",msgstr:"Supprimer toutes les routes"}],o=null;void 0!==e&&e.exports&&(e.exports=function(e){if(!o){o=new Map;for(var r=0;r<t.length;r++)o.set(t[r].msgid,t[r].msgstr)}return{getText:function(t){var e=o.get(t);return void 0===e?t:e}}})}()},{}],19:[function(t,e,o){!function(){"use strict";var o=null;void 0!==e&&e.exports&&(e.exports=function(){return o||function(){var e=t("./HTMLElementsFactory")();(o=e.create("div",{id:"TravelControl-MainDiv"})).appendChild(t("./RoutesListEditorUI")().UI),o.appendChild(t("./RouteEditorUI")().UI),o.appendChild(t("./ErrorEditorUI")().UI)}(),{get UI(){return o}}})}()},{"./ErrorEditorUI":13,"./HTMLElementsFactory":14,"./RouteEditorUI":15,"./RoutesListEditorUI":16}],20:[function(t,e,o){!function(){"use strict";void 0!==e&&e.exports&&(e.exports=function(){return{showError:function(e){t("../UI/ErrorEditorUI")().message='<span class="TravelControl-Error">'+e+"</span>",t("../UI/ErrorEditorUI")().expand()},clear:function(e){t("../UI/ErrorEditorUI")().message=""}}})}()},{"../UI/ErrorEditorUI":13}],21:[function(t,e,o){!function(){"use strict";var o=t("../Data/Route")(),r=-1,n=!1,i=t("../UI/Translator")();void 0!==e&&e.exports&&(e.exports=function(){var e=t("../UI/RouteEditorUI")();return{saveEdition:function(){var e=t("../Data/TravelData")();e.routes.replace(r,o),n=!1,t("../UI/RoutesListEditorUI")().writeRoutesList(e.routes),this.editRoute(o.objId)},cancelEdition:function(){n=!1,this.editRoute(r)},editRoute:function(a){if(n)t("./ErrorEditor")().showError(i.getText("RouteEditor-Not possible to edit a route without a save or cancel"));else{o=t("../Data/Route")();var s=t("../Data/TravelData")().routes.getAt(a);r=s.objId,o.object=s.object,e.expand(),e.writeWayPointsList(o.wayPoints)}},addWayPoint:function(r){n=!0;var i=t("../Data/Waypoint.js")();r&&(i.latLng=r),o.wayPoints.add(i),o.wayPoints.swap(i.objId,!0),e.writeWayPointsList(o.wayPoints)},reverseWayPoints:function(){n=!0,o.wayPoints.reverse(),e.writeWayPointsList(o.wayPoints)},removeAllWayPoints:function(){n=!0,o.wayPoints.removeAll(!0),e.writeWayPointsList(o.wayPoints)},removeWayPoint:function(t){n=!0,o.wayPoints.remove(t),e.writeWayPointsList(o.wayPoints)},renameWayPoint:function(t,r){n=!0,o.wayPoints.getAt(t).name=r,e.writeWayPointsList(o.wayPoints)},swapWayPoints:function(t,r){n=!0,o.wayPoints.swap(t,r),e.writeWayPointsList(o.wayPoints)},get contextMenu(){var t=[];return t.push({context:this,name:i.getText("RouteEditor - Select this point as start point"),action:-1!==r?this.setStartPointFromContextMenu:null}),t.push({context:this,name:i.getText("RouteEditor - Select this point as way point"),action:-1!==r?this.addPointFromContextMenu:null}),t.push({context:this,name:i.getText("RouteEditor - Select this point as end point"),action:-1!==r?this.setEndPointFromContextMenu:null}),t},setStartPoint:function(t){n=!0,o.wayPoints.first.latLng=t,e.writeWayPointsList(o.wayPoints)},setEndPoint:function(t){n=!0,o.wayPoints.last.latLng=t,e.writeWayPointsList(o.wayPoints)},setStartPointFromContextMenu:function(t){this.setStartPoint([t.latlng.lat,t.latlng.lng])},setEndPointFromContextMenu:function(t){this.setEndPoint([t.latlng.lat,t.latlng.lng])},addPointFromContextMenu:function(t){this.addWayPoint([t.latlng.lat,t.latlng.lng])}}})}()},{"../Data/Route":6,"../Data/TravelData":7,"../Data/Waypoint.js":9,"../UI/RouteEditorUI":15,"../UI/RoutesListEditorUI":16,"../UI/Translator":18,"./ErrorEditor":20}],22:[function(t,e,o){!function(){"use strict";var o=t("../Data/TravelData")(),r=!1;void 0!==e&&e.exports&&(e.exports=function(){var e=t("../UI/RoutesListEditorUI")();return{addRoute:function(){r=!0;var n=t("../Data/Route")();o.routes.add(n),e.writeRoutesList(o.routes)},editRoute:function(e){r=!0,t("./RouteEditor")().editRoute(e)},removeRoute:function(t){r=!0,o.routes.remove(t),e.writeRoutesList(o.routes)},removeAllRoutes:function(t){r=!0,o.routes.removeAll(),e.writeRoutesList(o.routes)},renameRoute:function(t,n){r=!0,o.routes.getAt(t).name=n,e.writeRoutesList(o.routes)},swapRoute:function(t,n){r=!0,o.routes.swap(t,n),e.writeRoutesList(o.routes)}}})}()},{"../Data/Route":6,"../Data/TravelData":7,"../UI/RoutesListEditorUI":16,"./RouteEditor":21}]},{},[11]);