/*! leaflet.Travel - version 0.1.0 - 2017-08-31 - Copyright 2015 2017 Christian Guyette - Contact: http//www.ouaie.be/ - This  program is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 3 of the License, or any later version.*/


!function t(e,o,n){function r(a,s){if(!o[a]){if(!e[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(i)return i(a,!0);var d=new Error("Cannot find module '"+a+"'");throw d.code="MODULE_NOT_FOUND",d}var c=o[a]={exports:{}};e[a][0].call(c.exports,function(t){var o=e[a][1][t];return r(o||t)},c,c.exports,t,e,o,n)}return o[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)r(n[a]);return r}({1:[function(t,e,o){!function(){"use strict";void 0!==e&&e.exports&&(e.exports=function(t){var e=[],o=t,n=function(t){return e.findIndex(function(e){return e.objId===t})},r=function(t){if(!t.objName||t.objName!==o)throw"invalid object name for add function";e.push(t)},i=function(t){var o=n(t);if(-1===o)throw"invalid objId for getAt function";return e[o]},a=function(){e.reverse()},s=function(t){if(-1===n(t))throw"invalid objId for remove function";e.splice(n(t),1)},l=function(t,o){var r=n(t);if(-1===r)throw"invalid objId for replace function";e[r]=o},d=function(t){t?e.splice(1,e.length-2):e.length=0},c=function(t,o){var r=n(t);if(-1===r||0===r&&o||e.length-1===r&&!o)throw"invalid objId for swap function";var i=e[r];e[r]=e[r+(o?-1:1)],e[r+(o?-1:1)]=i},u=function(){var t=-1;return{get value(){return t<e.length?e[t]:null},get done(){return++t>=e.length},get first(){return 0===t},get last(){return t>=e.length-1}}},v=function(){return e[0]},p=function(){return e[e.length-1]};return{add:function(t){r(t)},getAt:function(t){return i(t)},reverse:function(){a()},remove:function(t){s(t)},replace:function(t,e){l(t,e)},removeAll:function(t){d(t)},swap:function(t,e){c(t,e)},get iterator(){return u()},get first(){return v()},get last(){return p()}}})}()},{}],2:[function(t,e,o){!function(){"use strict";var o=[],n=null,r=null,i=0,a=function(){document.removeEventListener("keydown",s,!0),document.removeEventListener("keypress",l,!0),document.removeEventListener("keyup",d,!0);var t=n.childNodes;t[0].firstChild.removeEventListener("click",a,!1);for(var e=1;e<t.length;e++)t[e].firstChild.removeEventListener("click",a,!1);document.getElementsByTagName("body")[0].removeChild(n),n=null},s=function(t){n&&(t.preventDefault(),t.stopPropagation()),"Escape"!==t.key&&"Esc"!==t.key||a(),"ArrowDown"!==t.key&&"ArrowRight"!==t.key&&"Tab"!==t.key||(++i>o.length&&(i=1),n.childNodes[i].firstChild.focus()),"ArrowUp"!==t.key&&"ArrowLeft"!==t.key||(--i<1&&(i=o.length),n.childNodes[i].firstChild.focus()),"Home"===t.key&&(i=1,n.childNodes[i].firstChild.focus()),"End"===t.key&&(i=o.length,n.childNodes[i].firstChild.focus()),"Enter"===t.key&&i>0&&o[i-1].action&&(o[i-1].action(),a())},l=function(t){t.preventDefault(),t.stopPropagation()},d=function(t){t.preventDefault(),t.stopPropagation()},c=function(t){t.stopPropagation(),o[t.target.menuItem].action.call(o[t.target.menuItem].context,r),a()};void 0!==e&&e.exports&&(e.exports=function(e,i){if(r=e,n)a();else{o.length=0,o=t("./RouteEditor")().contextMenu.concat(i);var u=t("./HTMLElementsFactory")(),v=document.getElementsByTagName("body")[0],p=u.create("div",{className:"ContextMenu-Panel"},v),f=p.clientWidth,m=p.clientHeight;v.removeChild(p),n=u.create("div",{id:"ContextMenu-Container",className:"ContextMenu-Container"},v),u.create("div",{innerHTML:"&#x274c",className:"ContextMenu-CloseButton"},n).addEventListener("click",a,!1);for(var g=0;g<o.length;g++){var h=u.create("div",{className:"ContextMenu-ItemContainer"},n),L=u.create("button",{innerHTML:o[g].name,id:"ContextMenu-Item"+g,className:o[g].action?"ContextMenu-Item":"ContextMenu-Item ContextMenu-ItemDisabled"},h);o[g].action&&L.addEventListener("click",c,!1),L.menuItem=g}var b=Math.min(e.originalEvent.clientY,m-n.clientHeight-20),N=Math.min(e.originalEvent.clientX,f-n.clientWidth-20);n.setAttribute("style","top:"+b+"px;left:"+N+"px;"),document.addEventListener("keydown",s,!0),document.addEventListener("keypress",l,!0),document.addEventListener("keyup",d,!0)}})}()},{"./HTMLElementsFactory":6,"./RouteEditor":11}],3:[function(t,e,o){!function(){"use strict";void 0!==e&&e.exports&&(e.exports=function(){return{showError:function(e){t("./ErrorEditorUI")().message='<span class="TravelControl-Error">'+e+"</span>",t("./ErrorEditorUI")().expand()},clear:function(e){t("./ErrorEditorUI")().message=""}}})}()},{"./ErrorEditorUI":4}],4:[function(t,e,o){!function(){"use strict";var o=function(t){t.stopPropagation(),n.childNodes[0].innerHTML.length&&(t.target.parentNode.parentNode.childNodes[0].classList.toggle("TravelControl-HiddenList"),t.target.innerHTML=t.target.parentNode.parentNode.childNodes[0].classList.contains("TravelControl-HiddenList")?"&#x25b6;":"&#x25b2;",t.target.title=t.target.parentNode.parentNode.childNodes[0].classList.contains("TravelControl-HiddenList")?"Afficher":"Masquer")},n=null,r=null;void 0!==e&&e.exports&&(e.exports=function(){var e=function(){n.childNodes[1].firstChild.innerHTML="&#x25b2;",n.childNodes[1].firstChild.title="Masquer",n.childNodes[0].classList.remove("TravelControl-HiddenList")},i=function(){n.childNodes[1].firstChild.innerHTML="&#x25b6;",n.childNodes[1].firstChild.title="Afficher",n.childNodes[0].classList.add("TravelControl-HiddenList")};return n||(function(){var e=t("./HTMLElementsFactory")();n=e.create("div",{id:"TravelControl-ErrorDiv",className:"TravelControl-Div"}),r=e.create("div",{id:"TravelControl-ErrorDataDiv",className:"TravelControl-DataDiv"},n);var i=e.create("div",{id:"TravelControl-ErrorHeaderDiv",className:"TravelControl-HeaderDiv"},n);e.create("span",{innerHTML:"&#x25b2;",id:"TravelControl-ErrorExpandButton",className:"TravelControl-ExpandButton"},i).addEventListener("click",o,!1),e.create("span",{innerHTML:"Erreurs&nbsp;:",id:"TravelControl-ErrorHeaderText",className:"TravelControl-HeaderText"},i)}(),i()),{get UI(){return n},expand:function(){e()},reduce:function(){i()},set message(t){r.innerHTML=t},get message(){return r.innerHTML}}})}()},{"./HTMLElementsFactory":6}],5:[function(t,e,o){!function(){"use strict";var o="Geom",n="1.0.0";void 0!==e&&e.exports&&(e.exports=function(){var e="",r=6,i="#000000",a=5,s=t("./ObjId")();return{get pnts(){return e},set pnts(t){e=t},get precision(){return r},set precision(t){r=t},get color(){return i},set color(t){i=t},get weight(){return a},set weight(t){a=t},get objId(){return s},get objName(){return o},get objVersion(){return n},get object(){return{pnts:e,precision:r,color:i,weight:a,objId:s,objName:o,objVersion:n}},set object(o){if(!o.objVersion)throw"No ObjVersion for Geom";if("1.0.0"!==o.objVersion)throw"invalid objVersion for Geom";if(!o.objName)throw"No objName for Geom";if("Geom"!==o.objName)throw"Invalid objName for Geom";e=o.pnts||"",r=o.precision||6,i=o.color||"#000000",a=o.weight||5,s=t("./ObjId")()}}})}()},{"./ObjId":9}],6:[function(t,e,o){!function(){"use strict";var t=function(){return{create:function(t,e,o){var n;if(n="text"===t.toLowerCase()?document.createTextNode(""):document.createElement(t),o&&o.appendChild(n),e)for(var r in e)try{n[r]=e[r]}catch(t){console.log("Invalid property : "+r)}return n}}};void 0!==e&&e.exports&&(e.exports=function(){return t()})}()},{}],7:[function(t,e,o){!function(){"use strict";L.Travel=L.Travel||{},L.travel=L.travel||{},L.Travel.Control=L.Control.extend({options:{position:"topright"},initialize:function(t){L.Util.setOptions(this,t)},onAdd:function(e){var o=t("./userInterface")().UI,n=t("./TravelData")().routes;return t("./RoutesListEditorUI")().writeRoutesList(n),o}}),L.travel.control=function(t){return new L.Travel.Control(t)},void 0!==e&&e.exports&&(e.exports=L.travel.control)}()},{"./RoutesListEditorUI":14,"./TravelData":16,"./userInterface":19}],8:[function(t,e,o){!function(){"use strict";L.Travel=L.Travel||{},L.travel=L.travel||{};var o=[],n=[],r=!1,i=!1;L.Travel.getInterface=function(){t("./TravelData")().object={name:"TravelData sample",routes:[{name:"Chemin du Sârtê",wayPoints:[{name:"Chemin du Sârtê 1 - Anthisnes",lat:50.50881,lng:5.49314,objId:-1,objName:"WayPoint",objVersion:"1.0.0"},{name:"Chemin du Sârtê 22 - Anthisnes",lat:50.50937,lng:5.4947,objId:-2,objName:"WayPoint",objVersion:"1.0.0"}],geom:{pnts:"w~xi_BwwgnIaHkLgIkUmEyTcLie@",precision:6,color:"#0000ff",weight:"5",objId:-3,objName:"Geom",objVersion:"1.0.0"},objId:-4,objName:"Route",objVersion:"1.0.0"}],objId:-5,objName:"TravelData",objVersion:"1.0.0"};var a,s=function(e){t("./ContextMenu")(e,o)},l=function(e){t("./ContextMenu")(e,n)};return{addControl:function(o,n,r){if(n){document.getElementById(n).appendChild(t("./userInterface")().UI);var i=t("./TravelData")().routes;t("./RoutesListEditorUI")().writeRoutesList(i)}else void 0!==e&&e.exports&&o.addControl(t("./L.Travel.Control")(r));a=o},addMapContextMenu:function(t,e){t&&a.on("click",s),e&&a.on("contextmenu",s)},get rightContextMenu(){return r},set rightContextMenu(t){t&&!r?(a.on("contextmenu",l),r=!0):!t&&r&&(a.off("contextmenu",l),r=!1)},get leftContextMenu(){return i},set leftContextMenu(t){t&&!i?(a.on("click",s),i=!0):!t&&i&&(a.off("click",s),i=!1)},get leftUserContextMenu(){return o},set leftUserContextMenu(t){o=t},get rightUserContextMenu(){return n},set rightUserContextMenu(t){n=t}}},L.travel.interface=function(){return L.Travel.getInterface()},void 0!==e&&e.exports&&(e.exports=L.travel.interface)}()},{"./ContextMenu":2,"./L.Travel.Control":7,"./RoutesListEditorUI":14,"./TravelData":16,"./userInterface":19}],9:[function(t,e,o){!function(){"use strict";var t=0;void 0!==e&&e.exports&&(e.exports=function(){return++t})}()},{}],10:[function(t,e,o){!function(){"use strict";var o="Route",n="1.0.0";void 0!==e&&e.exports&&(e.exports=function(){var e="",r=t("./Collection")("WayPoint");r.add(t("./Waypoint")()),r.add(t("./Waypoint")());var i=t("./Geom")(),a=t("./ObjId")();return{get name(){return e},set name(t){e=t},get wayPoints(){return r},get geom(){return i},set geom(t){i=t},get objId(){return a},get objName(){return o},get objVersion(){return n},get object(){for(var t=[],r=this.wayPoints.iterator;!r.done;)t.push(r.value.object);return{name:e,wayPoints:t,geom:i.object,objId:a,objName:o,objVersion:n}},set object(o){if(!o.objVersion)throw"No ObjVersion for Route";if("1.0.0"!==o.objVersion)throw"invalid objVersion for Route";if(!o.objName)throw"No objName for Route";if("Route"!==o.objName)throw"Invalid objName for Route";e=o.name||"",r.removeAll();for(var n=0;n<o.wayPoints.length;n++){var s=t("./WayPoint")();s.object=o.wayPoints[n],r.add(s)}var l=t("./Geom")();l.object=o.geom,i=l,a=t("./ObjId")()}}})}()},{"./Collection":1,"./Geom":5,"./ObjId":9,"./WayPoint":17,"./Waypoint":18}],11:[function(t,e,o){!function(){"use strict";var o=t("./Route")(),n=-1,r=!1;void 0!==e&&e.exports&&(e.exports=function(){var e=t("./RouteEditorUI")();return{saveEdition:function(){var e=t("./TravelData")();e.routes.replace(n,o),r=!1,t("./RoutesListEditorUI")().writeRoutesList(e.routes),this.editRoute(o.objId)},cancelEdition:function(){r=!1,this.editRoute(n)},editRoute:function(i){if(console.log("a"),r)return console.log("b"),void t("./ErrorEditor")().showError("Il n'est pas possible d'éditer une route sans sauver ou abandonner les modifications");console.log("C"),o=t("./Route")();var a=t("./TravelData")().routes.getAt(i);n=a.objId,o.object=a.object,e.expand(),e.writeWayPointsList(o.wayPoints)},addWayPoint:function(n){r=!0;var i=t("./Waypoint.js")();n&&(i.latLng=n),o.wayPoints.add(i),o.wayPoints.swap(i.objId,!0),e.writeWayPointsList(o.wayPoints)},reverseWayPoints:function(){r=!0,o.wayPoints.reverse(),e.writeWayPointsList(o.wayPoints)},removeAllWayPoints:function(){r=!0,o.wayPoints.removeAll(!0),e.writeWayPointsList(o.wayPoints)},removeWayPoint:function(t){r=!0,o.wayPoints.remove(t),e.writeWayPointsList(o.wayPoints)},renameWayPoint:function(t,n){r=!0,o.wayPoints.getAt(t).name=n,e.writeWayPointsList(o.wayPoints)},swapWayPoints:function(t,n){r=!0,o.wayPoints.swap(t,n),e.writeWayPointsList(o.wayPoints)},get contextMenu(){var t=[];return t.push({context:this,name:"Sélectionner cet endroit comme point de départ",action:-1!==n?this.setStartPointFromContextMenu:null}),t.push({context:this,name:"Sélectionner cet endroit comme point intermédiaire",action:-1!==n?this.addPointFromContextMenu:null}),t.push({context:this,name:"Sélectionner cet endroit comme point de fin",action:-1!==n?this.setEndPointFromContextMenu:null}),t},setStartPoint:function(t){r=!0,o.wayPoints.first.latLng=t,e.writeWayPointsList(o.wayPoints)},setEndPoint:function(t){r=!0,o.wayPoints.last.latLng=t,e.writeWayPointsList(o.wayPoints)},setStartPointFromContextMenu:function(t){this.setStartPoint([t.latlng.lat,t.latlng.lng])},setEndPointFromContextMenu:function(t){this.setEndPoint([t.latlng.lat,t.latlng.lng])},addPointFromContextMenu:function(t){this.addWayPoint([t.latlng.lat,t.latlng.lng])}}})}()},{"./ErrorEditor":3,"./Route":10,"./RouteEditorUI":12,"./RoutesListEditorUI":14,"./TravelData":16,"./Waypoint.js":18}],12:[function(t,e,o){!function(){"use strict";var o=function(e){e.stopPropagation();t("./RouteEditor")().addWayPoint()},n=function(e){e.stopPropagation();t("./RouteEditor")().reverseWayPoints()},r=function(e){e.stopPropagation();t("./RouteEditor")().removeAllWayPoints()},i=function(e){e.stopPropagation();t("./RouteEditor")().removeWayPoint(e.itemNode.dataObjId)},a=function(e){e.stopPropagation();t("./RouteEditor")().swapWayPoints(e.itemNode.dataObjId,!0)},s=function(e){e.stopPropagation();t("./RouteEditor")().swapWayPoints(e.itemNode.dataObjId,!1)},l=function(e){e.stopPropagation(),t("./RouteEditor")().renameWayPoint(e.dataObjId,e.changeValue)},d=function(e){e.stopPropagation(),t("./RouteEditor")().saveEdition()},c=function(e){e.stopPropagation(),t("./RouteEditor")().cancelEdition()},u=function(t){t.stopPropagation(),t.target.parentNode.classList.toggle("TravelControl-SmallHeader"),t.target.parentNode.parentNode.classList.toggle("TravelControl-SmallHeader"),t.target.parentNode.parentNode.childNodes[1].classList.toggle("TravelControl-HiddenList"),t.target.parentNode.parentNode.childNodes[2].classList.toggle("TravelControl-HiddenList"),t.target.innerHTML=t.target.parentNode.parentNode.childNodes[1].classList.contains("TravelControl-HiddenList")?"&#x25b6;":"&#x25bc;",t.target.title=t.target.parentNode.parentNode.childNodes[1].classList.contains("TravelControl-HiddenList")?"Afficher":"Masquer"},v=null,p=null;void 0!==e&&e.exports&&(e.exports=function(){var e=function(){p.childNodes[0].firstChild.innerHTML="&#x25bc;",p.childNodes[0].firstChild.title="Masquer",p.childNodes[1].classList.remove("TravelControl-HiddenList"),p.childNodes[2].classList.remove("TravelControl-HiddenList")},f=function(){p.childNodes[0].firstChild.innerHTML="&#x25b6;",p.childNodes[0].firstChild.title="Afficher",p.childNodes[1].classList.add("TravelControl-HiddenList"),p.childNodes[2].classList.add("TravelControl-HiddenList")};return p||function(){var e=t("./HTMLElementsFactory")();p=e.create("div",{id:"TravelControl-WayPointsDiv",className:"TravelControl-Div"});var f=e.create("div",{id:"TravelControl-WaypointsHeaderDiv",className:"TravelControl-HeaderDiv"},p);e.create("span",{innerHTML:"&#x25bc;",id:"TravelControl-WayPointsExpandButton",className:"TravelControl-ExpandButton"},f).addEventListener("click",u,!1),e.create("span",{innerHTML:"Points de passage&nbsp;:",id:"TravelControl-WayPointsHeaderText",className:"TravelControl-HeaderText"},f);var m=e.create("div",{id:"TravelControl-WaypointsDataDiv",className:"TravelControl-DataDiv"},p);(v=t("./SortableList")({minSize:0,listStyle:"LimitedSort",placeholders:["Start","Via","End"],indexNames:["A","index","B"],id:"TravelControl-WaypointsList"},m)).container.addEventListener("SortableListDelete",i,!1),v.container.addEventListener("SortableListUpArrow",a,!1),v.container.addEventListener("SortableListDownArrow",s,!1),v.container.addEventListener("SortableListChange",l,!1);var g=e.create("div",{id:"TravelControl-WayPointsButtonsDiv",className:"TravelControl-ButtonsDiv"},p);e.create("span",{id:"TravelControl-SaveRouteButton",className:"TravelControl-Button",title:"Sauver les modifications",innerHTML:"&#x1f4be;"},g).addEventListener("click",d,!1),e.create("span",{id:"TravelControl-CancelRouteButton",className:"TravelControl-Button",title:"Abandonner les modifications",innerHTML:"&#x274c"},g).addEventListener("click",c,!1),e.create("span",{id:"TravelControl-ReverseWayPointsButton",className:"TravelControl-Button",title:"Inverser les points de passage",innerHTML:"&#x21C5;"},g).addEventListener("click",n,!1),e.create("span",{id:"TravelControl-AddWayPointButton",className:"TravelControl-Button",title:"Ajouter un point de passage",innerHTML:"+"},g).addEventListener("click",o,!1),e.create("span",{id:"TravelControl-RemoveAllWayPointsButton",className:"TravelControl-Button",title:"Supprimer tous les points de passage",innerHTML:"&#x267b;"},g).addEventListener("click",r,!1)}(),{get UI(){return p},expand:function(){e()},reduce:function(){f()},writeWayPointsList:function(t){v.removeAllItems();for(var e=t.iterator;!e.done;)v.addItem(e.value.UIName,e.value.objId,e.last)}}})}()},{"./HTMLElementsFactory":6,"./RouteEditor":11,"./SortableList":15}],13:[function(t,e,o){!function(){"use strict";var o=t("./TravelData")(),n=!1;void 0!==e&&e.exports&&(e.exports=function(){var e=t("./RoutesListEditorUI")();return{addRoute:function(){n=!0;var r=t("./Route")();o.routes.add(r),e.writeRoutesList(o.routes)},editRoute:function(e){n=!0,t("./RouteEditor")().editRoute(e)},removeRoute:function(t){n=!0,o.routes.remove(t),e.writeRoutesList(o.routes)},removeAllRoutes:function(t){n=!0,o.routes.removeAll(),e.writeRoutesList(o.routes)},renameRoute:function(t,r){n=!0,o.routes.getAt(t).name=r,e.writeRoutesList(o.routes)},swapRoute:function(t,r){n=!0,o.routes.swap(t,r),e.writeRoutesList(o.routes)}}})}()},{"./Route":10,"./RouteEditor":11,"./RoutesListEditorUI":14,"./TravelData":16}],14:[function(t,e,o){!function(){"use strict";var o=function(t){t.target.parentNode.classList.toggle("TravelControl-SmallHeader"),t.target.parentNode.parentNode.classList.toggle("TravelControl-SmallHeader"),t.target.parentNode.parentNode.childNodes[1].classList.toggle("TravelControl-HiddenList"),t.target.parentNode.parentNode.childNodes[2].classList.toggle("TravelControl-HiddenList"),t.target.innerHTML=t.target.parentNode.parentNode.childNodes[1].classList.contains("TravelControl-HiddenList")?"&#x25b6;":"&#x25bc;",t.target.title=t.target.parentNode.parentNode.childNodes[1].classList.contains("TravelControl-HiddenList")?"Afficher":"Masquer",t.stopPropagation()},n=function(e){e.stopPropagation(),t("./RoutesListEditor")().removeAllRoutes()},r=function(e){e.stopPropagation(),t("./RoutesListEditor")().addRoute()},i=function(e){e.stopPropagation(),t("./RoutesListEditor")().removeRoute(e.itemNode.dataObjId)},a=function(e){e.stopPropagation(),t("./RoutesListEditor")().swapRoute(e.itemNode.dataObjId,!0)},s=function(e){e.stopPropagation(),t("./RoutesListEditor")().swapRoute(e.itemNode.dataObjId,!1)},l=function(e){e.stopPropagation(),t("./RoutesListEditor")().editRoute(e.itemNode.dataObjId)},d=function(e){e.stopPropagation(),t("./RoutesListEditor")().renameRoute(e.dataObjId,e.changeValue)},c=null,u=null;void 0!==e&&e.exports&&(e.exports=function(){return c||function(){var e=t("./HTMLElementsFactory")();c=e.create("div",{id:"TravelControl-RoutesDiv",className:"TravelControl-Div"});var v=e.create("div",{id:"TravelControl-RoutesHeaderDiv",className:"TravelControl-HeaderDiv"},c);e.create("span",{innerHTML:"&#x25bc;",id:"TravelControl-RoutesExpandButton",className:"TravelControl-ExpandButton"},v).addEventListener("click",o,!1),e.create("span",{innerHTML:"Routes&nbsp;:",id:"TravelControl-RoutesHeaderText",className:"TravelControl-HeaderText"},v);var p=e.create("div",{id:"TravelControlRoutesDataDiv",className:"TravelControl-DataDiv"},c);(u=t("./SortableList")({minSize:0,placeholders:["Route"],id:"TravelControl-RouteList"},p)).container.addEventListener("SortableListDelete",i,!1),u.container.addEventListener("SortableListUpArrow",a,!1),u.container.addEventListener("SortableListDownArrow",s,!1),u.container.addEventListener("SortableListRightArrow",l,!1),u.container.addEventListener("SortableListChange",d,!1);var f=e.create("div",{id:"TravelControl-RoutesButtonsDiv",className:"TravelControl-ButtonsDiv"},c);e.create("span",{id:"TravelControl-AddRoutesButton",className:"TravelControl-Button",title:"Nouvelle route",innerHTML:"+"},f).addEventListener("click",r,!1),e.create("span",{id:"TravelControl-DeleteAllRoutesButton",className:"TravelControl-Button",title:"Supprimer toutes les routes",innerHTML:"&#x267b;"},f).addEventListener("click",n,!1)}(),{get UI(){return c},writeRoutesList:function(t){u.removeAllItems();for(var e=t.iterator;!e.done;)u.addItem(e.value.name,e.value.objId,!1)}}})}()},{"./HTMLElementsFactory":6,"./RoutesListEditor":13,"./SortableList":15}],15:[function(t,e,o){!function(){"use strict";var o=function(t){t.stopPropagation();try{t.dataTransfer.setData("Text","1")}catch(t){}console.log("onDragStart")},n=function(t){t.preventDefault(),console.log("onDragOver")},r=function(t){t.preventDefault();t.dataTransfer.getData("Text");console.log("onDrop")},i=function(t){var e=new Event("SortableListDelete");e.itemNode=t.target.parentNode,t.target.parentNode.parentNode.dispatchEvent(e),t.stopPropagation()},a=function(t){var e=new Event("SortableListUpArrow");e.itemNode=t.target.parentNode,t.target.parentNode.parentNode.dispatchEvent(e),t.stopPropagation()},s=function(t){var e=new Event("SortableListDownArrow");e.itemNode=t.target.parentNode,t.target.parentNode.parentNode.dispatchEvent(e),t.stopPropagation()},l=function(t){var e=new Event("SortableListRightArrow");e.itemNode=t.target.parentNode,t.target.parentNode.parentNode.dispatchEvent(e),t.stopPropagation()},d=function(t){console.log("onChange");var e=new Event("SortableListChange");e.dataObjId=t.target.parentNode.dataObjId,e.changeValue=t.target.value,t.target.parentNode.parentNode.dispatchEvent(e),t.stopPropagation()},c=function(e,c){var u=t("./HTMLElementsFactory")();this.items=[],this.removeAllItems=function(){for(var t=0;t<this.items.length;t++)this.container.removeChild(this.items[t]);this.items.length=0},this.addItem=function(e,n,r){e=e||"",n=n||-1;var c="";if(1===this.options.placeholders.length&&(c=this.options.placeholders[0]),3===this.options.placeholders.length){switch(this.items.length){case 0:c=this.options.placeholders[0];break;default:c=this.options.placeholders[1]}r&&(c=this.options.placeholders[2])}var v="";if(1===this.options.indexNames.length&&(v=this.options.indexNames[0]),3===this.options.indexNames.length){switch(this.items.length){case 0:v=this.options.indexNames[0];break;default:v=this.options.indexNames[1]}r&&(v=this.options.indexNames[2])}"index"===v&&(v=this.items.length);var p=u.create("div",{draggable:!1,className:"SortableList-Item"});u.create("div",{className:"SortableList-ItemTextIndex",innerHTML:v},p),u.create("input",{type:"text",className:"SortableList-ItemInput",placeholder:c,value:e},p).addEventListener("change",d,!1),u.create("div",{className:"SortableList-ItemUpArrowButton",title:"Déplacer vers le haut",innerHTML:String.fromCharCode(8679)},p).addEventListener("click",a,!1),u.create("div",{className:"SortableList-ItemDownArrowButton",title:"Déplacer vers le bas",innerHTML:String.fromCharCode(8681)},p).addEventListener("click",s,!1);var f=u.create("div",{className:"SortableList-ItemRightArrowButton",title:"Éditer",innerHTML:String.fromCharCode(8688)},p);"AllSort"===this.options.listStyle&&f.addEventListener("click",l,!1),u.create("div",{className:"SortableList-ItemDeleteButton",title:"Supprimer",innerHTML:"&#x267b;"},p).addEventListener("click",i,!1),p.dataObjId=n,p.UIObjId=t("./ObjId")(),this.items.push(p),("LimitedSort"!==this.options.listStyle||1<this.items.length)&&!r&&(p.draggable=!0,p.addEventListener("dragstart",o,!1),p.classList.add("SortableList-MoveCursor")),this.container.appendChild(p)},this._create=function(t,e){this.options={minSize:2,listStyle:"AllSort",placeholders:[],indexNames:[],id:"SortableList-Container"};for(var o in t)this.options[o]=t[o];"LimitedSort"===this.options.listStyle&&2>this.options.minSize&&(this.options.minSize=0),this.container=u.create("div",{id:t.id,className:"SortableList-Container"}),this.container.classList.add(this.options.listStyle),this.container.addEventListener("dragover",n,!1),this.container.addEventListener("drop",r,!1),e&&e.appendChild(this.container);for(var i=0;i<this.options.minSize;i++)this.addItem()},this._create(e,c)};void 0!==e&&e.exports&&(e.exports=function(t,e){return new c(t,e)})}()},{"./HTMLElementsFactory":6,"./ObjId":9}],16:[function(t,e,o){!function(){"use strict";var o="TravelData",n="1.0.0",r="",i=t("./Collection")("Route"),a=-1;void 0!==e&&e.exports&&(e.exports=function(){return{get routes(){return i},get objId(){return a},get objName(){return o},get objVersion(){return n},get object(){for(var t=[],e=this.routes.iterator;!e.done;)t.push(e.value.object);return{name:r,routes:t,objId:a,objName:o,objVersion:n}},set object(e){if(!e.objVersion)throw"No ObjVersion for TravelData";if("1.0.0"!==e.objVersion)throw"invalid objVersion for TravelData";if(!e.objName)throw"No objName for TravelData";if("TravelData"!==e.objName)throw"Invalid objName for TravelData";r=e.name||"",i.removeAll();for(var o=0;o<e.routes.length;o++){var n=t("./Route")();n.object=e.routes[o],i.add(n)}a=t("./ObjId")()}}})}()},{"./Collection":1,"./ObjId":9,"./Route":10}],17:[function(t,e,o){!function(){"use strict";var o="WayPoint",n="1.0.0";void 0!==e&&e.exports&&(e.exports=function(){var e="",r=0,i=0,a=t("./ObjId")();return{get name(){return e},set name(t){e=t},get UIName(){return""!==e?e:(console.log(r),0!==r&&0!==i?r.toFixed(5)+(0<r?" N - ":" S - ")+i.toFixed(5)+(0<i?" E":" W"):"")},get lat(){return r},set lat(t){r=t},get lng(){return i},set lng(t){i=t},get latLng(){return[r,i]},set latLng(t){r=t[0],i=t[1]},get objId(){return a},get objName(){return o},get objVersion(){return n},get object(){return{name:e,lat:r,lng:i,objId:a,objName:o,objVersion:n}},set object(o){if(!o.objVersion)throw"No ObjVersion for WayPoint";if("1.0.0"!==o.objVersion)throw"invalid objVersion for WayPoint";if(!o.objName)throw"No objName for WayPoint";if("WayPoint"!==o.objName)throw"Invalid objName for WayPoint";e=o.name||"",r=o.lat||0,i=o.lng||0,a=t("./ObjId")()}}})}()},{"./ObjId":9}],18:[function(t,e,o){arguments[4][17][0].apply(o,arguments)},{"./ObjId":9,dup:17}],19:[function(t,e,o){!function(){"use strict";var o=null;void 0!==e&&e.exports&&(e.exports=function(){return o||function(){var e=t("./HTMLElementsFactory")();(o=e.create("div",{id:"TravelControl-MainDiv"})).appendChild(t("./RoutesListEditorUI")().UI),o.appendChild(t("./RouteEditorUI")().UI),o.appendChild(t("./ErrorEditorUI")().UI)}(),{get UI(){return o}}})}()},{"./ErrorEditorUI":4,"./HTMLElementsFactory":6,"./RouteEditorUI":12,"./RoutesListEditorUI":14}]},{},[8]);