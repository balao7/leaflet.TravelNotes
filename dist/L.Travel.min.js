/*! leaflet.Travel - version 0.1.0 - 2017-08-26 - Copyright 2015 2017 Christian Guyette - Contact: http//www.ouaie.be/ - This  program is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 3 of the License, or any later version.*/


!function e(t,o,r){function n(a,s){if(!o[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(i)return i(a,!0);var d=new Error("Cannot find module '"+a+"'");throw d.code="MODULE_NOT_FOUND",d}var c=o[a]={exports:{}};t[a][0].call(c.exports,function(e){var o=t[a][1][e];return n(o||e)},c,c.exports,e,t,o,r)}return o[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)n(r[a]);return n}({1:[function(e,t,o){!function(){"use strict";var o="Geom",r="1.0.0";void 0!==t&&t.exports&&(t.exports=function(){var t="",n=6,i="#000000",a=5,s=-1;return{get pnts(){return t},set pnts(e){t=e},get precision(){return n},set precision(e){n=e},get color(){return i},set color(e){i=e},get weight(){return a},set weight(e){a=e},get objId(){return s},get objName(){return o},get objVersion(){return r},get object(){return{pnts:t,precision:n,color:i,weight:a,objId:s,objName:o,objVersion:r}},set object(o){if(!o.objVersion)throw"No ObjVersion for Geom";if("1.0.0"!==o.objVersion)throw"invalid objVersion for Geom";if(!o.objName)throw"No objName for Geom";if("Geom"!==o.objName)throw"Invalid objName for Geom";t=o.pnts||"",n=o.precision||6,i=o.color||"#000000",a=o.weight||5,s=e("./ObjId")()}}})}()},{"./ObjId":6}],2:[function(e,t,o){!function(){"use strict";var e=function(){return{create:function(e,t,o){var r;if(r="text"===e.toLowerCase()?document.createTextNode(""):document.createElement(e),o&&o.appendChild(r),t)for(var n in t)try{r[n]=t[n]}catch(e){console.log("Invalid property : "+n)}return r}}};void 0!==t&&t.exports&&(t.exports=function(){return e()})}()},{}],3:[function(e,t,o){!function(){"use strict";L.Travel=L.Travel||{},L.travel=L.travel||{},L.Travel.Control=L.Control.extend({options:{position:"topright"},initialize:function(e){L.Util.setOptions(this,e)},onAdd:function(t){return e("./L.Travel.ControlUI")(t)}}),L.travel.control=function(e){return new L.Travel.Control(e)},void 0!==t&&t.exports&&(t.exports=L.travel.control)}()},{"./L.Travel.ControlUI":4}],4:[function(e,t,o){!function(){"use strict";L.Travel=L.Travel||{},L.travel=L.travel||{};var o=e("./TravelData")(),r=null,n=null,i=function(e){r.removeAllItems(),o.removeAllRoutes()},a=function(e){o.addRoute(r.addItem())},s=function(e){e.target.parentNode.parentNode.childNodes[1].classList.toggle("TravelControl-HiddenList"),e.target.parentNode.parentNode.childNodes[2].classList.toggle("TravelControl-HiddenList"),e.target.innerHTML=e.target.parentNode.parentNode.childNodes[1].classList.contains("TravelControl-HiddenList")?"&#x25b6;":"&#x25bc;",e.target.title=e.target.parentNode.parentNode.childNodes[1].classList.contains("TravelControl-HiddenList")?"Afficher":"Masquer"},l=function(e){console.log(e.listId),console.log(e.dataObjId)};L.Travel.getControlUI=function(){return this.setTravelData=function(){for(var e=o.routes,t=0;t<e.length;t++)e[t].uiObjId=r.addItem(e[t].name,e[t].objId)},this.createUI=function(){var t=e("./HTMLElementsFactory")();this.mainDiv=t.create("div",{id:"TravelControl-MainDiv"}),this.mainDiv.addEventListener("SortableListDeleteElement",l,!1);var o=t.create("div",{id:"TravelControl-RoutesDiv",className:"TravelControl-Div"},this.mainDiv),d=t.create("div",{id:"TravelControl-RoutesHeaderDiv",className:"TravelControl-HeaderDiv"},o);t.create("span",{innerHTML:"&#x25bc;",id:"TravelControl-RoutesExpandButton",className:"TravelControl-ExpandButton"},d).addEventListener("click",s,!1),t.create("span",{innerHTML:"Routes&nbsp;:",id:"TravelControl-RoutesHeaderText",className:"TravelControl-HeaderText"},d),(r=e("./SortableList")({minSize:0,placeholders:["Route"],id:"TravelControl-RouteList"},o)).container.addEventListener("SortableListDeleteElement",l,!1);var c=t.create("div",{id:"TravelControl-RoutesButtonsDiv",className:"TravelControl-ButtonsDiv"},o);t.create("span",{id:"TravelControl-AddRoutesButton",className:"TravelControl-Button",title:"Nouvelle route",innerHTML:"+"},c).addEventListener("click",a,!1),t.create("span",{id:"TravelControl-DeleteRoutesButton",className:"TravelControl-Button",title:"Supprimer toutes les routes",innerHTML:"&#x1f5d1;"},c).addEventListener("click",i,!1);var u=t.create("div",{id:"TravelControl-WayPointsDiv",className:"TravelControl-Div"},this.mainDiv),v=t.create("div",{id:"TravelControl-WaypointsHeaderDiv",className:"TravelControl-HeaderDiv"},u);t.create("span",{innerHTML:"&#x25bc",id:"TravelControl-WayPointsExpandButton",className:"TravelControl-ExpandButton"},v).addEventListener("click",s,!1),t.create("span",{innerHTML:"Points de passage&nbsp;:",id:"TravelControl-WayPointsHeaderText",className:"TravelControl-HeaderText"},v),(n=e("./SortableList")({minSize:5,listStyle:"LimitedSort",placeholders:["Start","Via","End"],indexNames:["A","index","B"],id:"TravelControl-WaypointsList"},u)).container.addEventListener("SortableListDeleteElement",l,!1);var m=t.create("div",{id:"TravelControl-WayPointsButtonsDiv",className:"TravelControl-ButtonsDiv"},u),p=(t.create("span",{id:"TravelControl-AddWayPointsButton",className:"TravelControl-Button",title:"Ajouter un point de passage",innerHTML:"+"},m),t.create("span",{id:"TravelControl-ReverseWayPointsButton",className:"TravelControl-Button",title:"Inverser les points de passage",innerHTML:"&#x21C5;"},m),t.create("span",{id:"TravelControl-DeleteWayPointsButton",className:"TravelControl-Button",title:"Supprimer tous les points de passage",innerHTML:"&#x1f5d1;"},m),t.create("div",{id:"TravelControl-ItineraryDiv",className:"TravelControl-Div"},this.mainDiv));t.create("span",{innerHTML:"Itinéraire&nbsp;:",id:"TravelControl-ItineraryHeaderText",className:"TravelControl-HeaderText"},p);t.create("div",{id:"TravelControl-ItineraryDiv",className:"TravelControl-Div"},this.mainDiv)},this.createUI(),this.setTravelData(),this.mainDiv},L.travel.ControlUI=function(){return L.Travel.getControlUI()},void 0!==t&&t.exports&&(t.exports=L.travel.ControlUI)}()},{"./HTMLElementsFactory":2,"./SortableList":8,"./TravelData":9}],5:[function(e,t,o){!function(){"use strict";L.Travel=L.Travel||{},L.travel=L.travel||{},L.Travel.getInterface=function(){return e("./TravelData")().object={name:"TravelData sample",routes:[{name:"Chemin du Sârtê",wayPoints:[{name:"Chemin du Sârtê 1 - Anthisnes",lat:50.50881,lng:5.49314,objId:-1,objName:"WayPoint",objVersion:"1.0.0"},{name:"Chemin du Sârtê 22 - Anthisnes",lat:50.50937,lng:5.4947,objId:-2,objName:"WayPoint",objVersion:"1.0.0"}],geom:{pnts:"w~xi_BwwgnIaHkLgIkUmEyTcLie@",precision:6,color:"#0000ff",weight:"5",objId:-3,objName:"Geom",objVersion:"1.0.0"},objId:-4,objName:"Route",objVersion:"1.0.0"}],objId:-5,objName:"TravelData",objVersion:"1.0.0"},{addControl:function(o,r){void 0!==t&&t.exports?o.addControl(e("./L.Travel.Control")(r)):o.addControl(L.marker.pin.control(r))},addWayPoint:function(e,t){console.log("addWayPoint")}}},L.travel.interface=function(){return L.Travel.getInterface()},void 0!==t&&t.exports&&(t.exports=L.travel.interface)}()},{"./L.Travel.Control":3,"./TravelData":9}],6:[function(e,t,o){!function(){"use strict";var e=0;void 0!==t&&t.exports&&(t.exports=function(){return++e})}()},{}],7:[function(e,t,o){!function(){"use strict";var o="Route",r="1.0.0";void 0!==t&&t.exports&&(t.exports=function(){var t="",n=[],i={},a=-1,s=-1;return{get name(){return t},set name(e){t=e},addWayPoint:function(e){n.push(e)},removeWayPoint:function(e){},get geom(){return i},set geom(e){i=e},get uiObjId(){return s},set uiObjId(e){s=e},get objId(){return a},get objName(){return o},get objVersion(){return r},get object(){for(var e=[],s=0;s<n.length;s++)e.push(n[s].asObject);return{name:t,wayPoints:n,geom:i,objId:a,objName:o,objVersion:r}},set object(o){if(!o.objVersion)throw"No ObjVersion for Route";if("1.0.0"!==o.objVersion)throw"invalid objVersion for Route";if(!o.objName)throw"No objName for Route";if("Route"!==o.objName)throw"Invalid objName for Route";t=o.name||"";for(var r=0;r<o.wayPoints.length;r++){var s=e("./WayPoint")();s.object=o.wayPoints[r],n.push(s)}var l=e("./Geom")();l.object=o.geom,i=l,a=e("./ObjId")()}}})}()},{"./Geom":1,"./ObjId":6,"./WayPoint":10}],8:[function(e,t,o){!function(){"use strict";var o=function(e){e.stopPropagation();try{e.dataTransfer.setData("Text","1")}catch(e){}console.log("onDragStart")},r=function(e){e.preventDefault(),console.log("onDragOver")},n=function(e){e.preventDefault();e.dataTransfer.getData("Text");console.log("onDrop")},i=function(e){var t=new Event("SortableListDeleteElement");t.listId=e.target.parentNode.parentNode.id,t.dataObjId=e.target.parentNode.dataObjId,e.target.parentNode.parentNode.dispatchEvent(t),e.stopPropagation()},a=function(e){console.log("onUpArrowButtonClick"),e.stopPropagation()},s=function(e){console.log("onDownArrowButtonClick"),e.stopPropagation()},l=function(e){console.log("onRightArrowButtonClick"),e.stopPropagation()},d=function(t,d){var c=e("./HTMLElementsFactory")();this.items=[],this.removeItem=function(){},this.removeAllItems=function(){for(var e=0;e<this.items.length;e++)this.container.removeChild(this.items[e]);this.items.length=0},this.moveItem=function(){},this.addItem=function(t,r){t=t||"",r=r||-1;var n="";if(1===this.options.placeholders.length&&(n=this.options.placeholders[0]),3===this.options.placeholders.length)switch(this.items.length){case 0:n=this.options.placeholders[0];break;case 1:n=this.options.placeholders[2];break;default:n=this.options.placeholders[1]}var d="";if(1===this.options.indexNames.length&&(d=this.options.indexNames[0]),3===this.options.indexNames.length)switch(this.items.length){case 0:d=this.options.indexNames[0];break;case 1:d=this.options.indexNames[2];break;default:d=this.options.indexNames[1]}"index"===d&&(d=this.items.length-1);var u=c.create("div",{draggable:!1,className:"SortableList-Item"});c.create("span",{className:"SortableList-ItemTextIndex",innerHTML:d},u),c.create("input",{type:"text",className:"SortableList-ItemInput",placeholder:n,value:t},u),c.create("span",{className:"SortableList-ItemDeleteButton",title:"Supprimer",innerHTML:"&#x1f5d1;"},u).addEventListener("click",i,!1),c.create("span",{className:"SortableList-ItemUpArrowButton",title:"Déplacer vers le haut",innerHTML:String.fromCharCode(8679)},u).addEventListener("click",a,!1),c.create("span",{className:"SortableList-ItemDownArrowButton",title:"Déplacer vers le bas",innerHTML:String.fromCharCode(8681)},u).addEventListener("click",s,!1),"AllSort"===this.options.listStyle&&c.create("span",{className:"SortableList-ItemRightArrowButton",title:"Éditer",innerHTML:String.fromCharCode(8688)},u).addEventListener("click",l,!1),u.dataObjId=r,u.UIObjId=e("./ObjId")(),this.items.push(u);var v=null;"LimitedSort"===this.options.listStyle&&2<this.items.length&&(v=this.items[this.items.length-2],this.items[this.items.length-2]=this.items[this.items.length-1],this.items[this.items.length-1]=v),("LimitedSort"!==this.options.listStyle||2<this.items.length)&&(u.draggable=!0,u.addEventListener("dragstart",o,!1),u.classList.add("SortableList-MoveCursor")),v?this.container.insertBefore(u,v):this.container.appendChild(u)},this._create=function(e,t){this.options={minSize:2,listStyle:"AllSort",placeholders:[],indexNames:[],id:"SortableList-Container"};for(var o in e)this.options[o]=e[o];"LimitedSort"===this.options.listStyle&&2>this.options.minSize&&(this.options.minSize=2),this.container=c.create("div",{id:e.id,className:"SortableList-Container"}),this.container.classList.add(this.options.listStyle),this.container.addEventListener("dragover",r,!1),this.container.addEventListener("drop",n,!1),t&&t.appendChild(this.container);for(var i=0;i<this.options.minSize;i++)this.addItem()},this._create(t,d)};void 0!==t&&t.exports&&(t.exports=function(e,t){return new d(e,t)})}()},{"./HTMLElementsFactory":2,"./ObjId":6}],9:[function(e,t,o){!function(){"use strict";var o="TravelData",r="1.0.0",n="",i=[],a=-1,s=[];void 0!==t&&t.exports&&(t.exports=function(){return{clear:function(){for(var e=0;e<i.length;e++)s.push(i[e]);this.object={name:"",routes:[{name:"",wayPoints:[{name:"",lat:0,lng:0,objId:-1,objName:"WayPoint",objVersion:"1.0.0"},{name:"",lat:0,lng:0,objId:-1,objName:"WayPoint",objVersion:"1.0.0"}],geom:{pnts:"",precision:6,color:"#000000",weight:"5",objId:-1,objName:"Geom",objVersion:"1.0.0"},objId:-1,objName:"Route",objVersion:"1.0.0"}],objId:-1,objName:"TravelData",objVersion:"1.0.0"}},removeAllRoutes:function(){for(var e=0;e<i.length;e++)s.push(i[e]);i.length=0,console.log(s)},addRoute:function(t){var o=e("./Route")();o.uiObjId=t,console.log(t),console.log(o.uiObjId),i.push(o),console.log(i)},get routes(){return i},get objId(){return a},get objName(){return o},get objVersion(){return r},get object(){for(var e=[],t=0;t<i.length;t++)e.push(i[t].object);return{name:n,routes:i,objId:a,objName:o,objVersion:r}},set object(t){if(!t.objVersion)throw"No ObjVersion for TravelData";if("1.0.0"!==t.objVersion)throw"invalid objVersion for TravelData";if(!t.objName)throw"No objName for TravelData";if("TravelData"!==t.objName)throw"Invalid objName for TravelData";n=t.name||"",i.length=0;for(var o=0;o<t.routes.length;o++){var r=e("./Route")();r.object=t.routes[o],i.push(r)}a=e("./ObjId")()}}})}()},{"./ObjId":6,"./Route":7}],10:[function(e,t,o){!function(){"use strict";var o="WayPoint",r="1.0.0";void 0!==t&&t.exports&&(t.exports=function(){var t="",n=0,i=0,a=-1;return{get name(){return t},set name(e){t=e},get lat(){return n},set lat(e){n=e},get lng(){return i},set lng(e){i=e},get latLng(){return[n,i]},set latLng(e){n=e[0],i=e[1]},get objId(){return a},get objName(){return o},get objVersion(){return r},get object(){return{name:t,lat:n,lng:i,objId:a,objName:o,objVersion:r}},set object(o){if(!o.objVersion)throw"No ObjVersion for WayPoint";if("1.0.0"!==o.objVersion)throw"invalid objVersion for WayPoint";if(!o.objName)throw"No objName for WayPoint";if("WayPoint"!==o.objName)throw"Invalid objName for WayPoint";t=o.name||"",n=o.lat||0,i=o.lng||0,a=e("./ObjId")()}}})}()},{"./ObjId":6}]},{},[5]);