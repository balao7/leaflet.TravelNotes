/*! leaflet.Travel - version 0.1.0 - 2017-08-26 - Copyright 2015 2017 Christian Guyette - Contact: http//www.ouaie.be/ - This  program is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 3 of the License, or any later version.*/


!function e(t,o,n){function r(i,s){if(!o[i]){if(!t[i]){var l="function"==typeof require&&require;if(!s&&l)return l(i,!0);if(a)return a(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var d=o[i]={exports:{}};t[i][0].call(d.exports,function(e){var o=t[i][1][e];return r(o||e)},d,d.exports,e,t,o,n)}return o[i].exports}for(var a="function"==typeof require&&require,i=0;i<n.length;i++)r(n[i]);return r}({1:[function(e,t,o){!function(){"use strict";var o="Geom",n="1.0.0";void 0!==t&&t.exports&&(t.exports=function(){var t="",r=6,a="#000000",i=5,s=-1;return{get pnts(){return t},set pnts(e){t=e},get precision(){return r},set precision(e){r=e},get color(){return a},set color(e){a=e},get weight(){return i},set weight(e){i=e},get objId(){return s},get objName(){return o},get objVersion(){return n},get object(){return{pnts:t,precision:r,color:a,weight:i,objId:s,objName:o,objVersion:n}},set object(o){if(!o.objVersion)throw"No ObjVersion for Geom";if("1.0.0"!==o.objVersion)throw"invalid objVersion for Geom";if(!o.objName)throw"No objName for Geom";if("Geom"!==o.objName)throw"Invalid objName for Geom";t=o.pnts||"",r=o.precision||6,a=o.color||"#000000",i=o.weight||5,s=e("./ObjId")()}}})}()},{"./ObjId":6}],2:[function(e,t,o){!function(){"use strict";var e=function(){return{create:function(e,t,o){var n;if(n="text"===e.toLowerCase()?document.createTextNode(""):document.createElement(e),o&&o.appendChild(n),t)for(var r in t)try{n[r]=t[r]}catch(e){console.log("Invalid property : "+r)}return n}}};void 0!==t&&t.exports&&(t.exports=function(){return e()})}()},{}],3:[function(e,t,o){!function(){"use strict";L.Travel=L.Travel||{},L.travel=L.travel||{},L.Travel.Control=L.Control.extend({options:{position:"topright"},initialize:function(e){L.Util.setOptions(this,e)},onAdd:function(t){return e("./L.Travel.ControlUI")(t)}}),L.travel.control=function(e){return new L.Travel.Control(e)},void 0!==t&&t.exports&&(t.exports=L.travel.control)}()},{"./L.Travel.ControlUI":4}],4:[function(e,t,o){!function(){"use strict";L.Travel=L.Travel||{},L.travel=L.travel||{};var o=e("./TravelData")(),n=null,r=null,a=function(e){n.removeAllItems(),o.removeAllRoutes()},i=function(e){o.addRoute(n.addItem())},s=function(e){e.target.parentNode.parentNode.childNodes[1].classList.toggle("TravelControl-HiddenList"),e.target.parentNode.parentNode.childNodes[2].classList.toggle("TravelControl-HiddenList"),e.target.innerHTML=e.target.parentNode.parentNode.childNodes[1].classList.contains("TravelControl-HiddenList")?"&#x25b6;":"&#x25bc;"};L.Travel.getControlUI=function(){return this.setTravelData=function(){for(var e=o.routes,t=0;t<e.length;t++)e[t].uiObjId=n.addItem(e[t].name,e[t].objId)},this.createUI=function(){var t=e("./HTMLElementsFactory")(),o=e("./SortableList");this.MainDiv=t.create("div",{id:"TravelControl-MainDiv"});var l=t.create("div",{id:"TravelControl-RoutesDiv"},this.MainDiv),c=t.create("div",{id:"TravelControl-HeaderRoutesDiv",className:"TravelControl-HeaderDiv"},l);t.create("span",{innerHTML:"&#x25bc;",className:"TravelControl-ExpandButton"},c).addEventListener("click",s,!1),t.create("span",{innerHTML:"Routes&nbsp;:",className:"TravelControl-HeaderText"},c),n=o({minSize:0,placeholder:"Route"},l);var d=t.create("div",{id:"TravelControl-routesButtonsDiv"},l);t.create("span",{id:"TravelControl-addRoutesBtn",className:"TravelControl-btn",innerHTML:"+"},d).addEventListener("click",i,!1),t.create("span",{id:"TravelControl-deleteRoutesBtn",className:"TravelControl-btn",innerHTML:"&#x1f5d1;"},d).addEventListener("click",a,!1);var v=t.create("div",{id:"TravelControl-WayPointsDiv"},this.MainDiv),u=t.create("div",{id:"TravelControl-HeaderWaypointsDiv",className:"TravelControl-HeaderDiv"},v);t.create("span",{innerHTML:"&#x25bc",className:"TravelControl-ExpandButton"},u).addEventListener("click",s,!1),t.create("span",{innerHTML:"Points de passage&nbsp;:",className:"TravelControl-HeaderText"},u),r=o({minSize:0,listType:1,placeholders:["Start","Via","End"],texts:["A","index","B"]},v);var m=t.create("div",{id:"TravelControl-wayPointsButtonsDiv"},v),b=(t.create("span",{id:"TravelControl-addWayPointsBtn",className:"TravelControl-btn",innerHTML:"+"},m),t.create("span",{id:"TravelControl-reverseWayPointsBtn",className:"TravelControl-btn",innerHTML:"&#x21C5;"},m),t.create("span",{id:"TravelControl-deleteWayPointsBtn",className:"TravelControl-btn",innerHTML:"&#x1f5d1;"},m),t.create("div",{id:"TravelControl-ItineraryDiv"},this.MainDiv));t.create("span",{innerHTML:"Itinéraire&nbsp;:",className:"TravelControl-HeaderText"},b);t.create("div",{id:"TravelControl-ItineraryDiv"},this.MainDiv)},this.createUI(),this.setTravelData(),this.MainDiv},L.travel.ControlUI=function(){return L.Travel.getControlUI()},void 0!==t&&t.exports&&(t.exports=L.travel.ControlUI)}()},{"./HTMLElementsFactory":2,"./SortableList":8,"./TravelData":9}],5:[function(e,t,o){!function(){"use strict";L.Travel=L.Travel||{},L.travel=L.travel||{},L.Travel.getInterface=function(){return e("./TravelData")().object={name:"TravelData sample",routes:[{name:"Chemin du Sârtê",wayPoints:[{name:"Chemin du Sârtê 1 - Anthisnes",lat:50.50881,lng:5.49314,objId:-1,objName:"WayPoint",objVersion:"1.0.0"},{name:"Chemin du Sârtê 22 - Anthisnes",lat:50.50937,lng:5.4947,objId:-2,objName:"WayPoint",objVersion:"1.0.0"}],geom:{pnts:"w~xi_BwwgnIaHkLgIkUmEyTcLie@",precision:6,color:"#0000ff",weight:"5",objId:-3,objName:"Geom",objVersion:"1.0.0"},objId:-4,objName:"Route",objVersion:"1.0.0"}],objId:-5,objName:"TravelData",objVersion:"1.0.0"},{addControl:function(o,n){void 0!==t&&t.exports?o.addControl(e("./L.Travel.Control")(n)):o.addControl(L.marker.pin.control(n))},addWayPoint:function(e,t){console.log("addWayPoint")}}},L.travel.interface=function(){return L.Travel.getInterface()},void 0!==t&&t.exports&&(t.exports=L.travel.interface)}()},{"./L.Travel.Control":3,"./TravelData":9}],6:[function(e,t,o){!function(){"use strict";var e=0;void 0!==t&&t.exports&&(t.exports=function(){return++e})}()},{}],7:[function(e,t,o){!function(){"use strict";var o="Route",n="1.0.0";void 0!==t&&t.exports&&(t.exports=function(){var t="",r=[],a={},i=-1,s=-1;return{get name(){return t},set name(e){t=e},addWayPoint:function(e){r.push(e)},removeWayPoint:function(e){},get geom(){return a},set geom(e){a=e},get uiObjId(){return s},set uiObjId(e){s=e},get objId(){return i},get objName(){return o},get objVersion(){return n},get object(){for(var e=[],s=0;s<r.length;s++)e.push(r[s].asObject);return{name:t,wayPoints:r,geom:a,objId:i,objName:o,objVersion:n}},set object(o){if(!o.objVersion)throw"No ObjVersion for Route";if("1.0.0"!==o.objVersion)throw"invalid objVersion for Route";if(!o.objName)throw"No objName for Route";if("Route"!==o.objName)throw"Invalid objName for Route";t=o.name||"";for(var n=0;n<o.wayPoints.length;n++){var s=e("./WayPoint")();s.object=o.wayPoints[n],r.push(s)}var l=e("./Geom")();l.object=o.geom,a=l,i=e("./ObjId")()}}})}()},{"./Geom":1,"./ObjId":6,"./WayPoint":10}],8:[function(e,t,o){!function(){"use strict";var o=function(e){e.stopPropagation();try{e.dataTransfer.setData("Text","1")}catch(e){}console.log("onDragStart")},n=function(e){e.preventDefault(),console.log("onDragOver")},r=function(e){e.preventDefault();e.dataTransfer.getData("Text");console.log("onDrop")},a=function(e){console.log("onDeleteBtnClick"),console.log(this),e.stopPropagation()},i=function(e){console.log("onUpArrowBtnClick"),e.stopPropagation()},s=function(e){console.log("onDownArrowBtnClick"),e.stopPropagation()},l=function(e){console.log("onRightArrowBtnClick"),e.stopPropagation()},c=function(t,c){var d=e("./HTMLElementsFactory")();this.items=[],this._setItemsClasses=function(){for(var e=0;e<this.items.length;e++){var t=this.items[e];t.classList.contains("deleteBtn")&&t.childNodes[2].removeEventListener("click",a,!1),t.classList.contains("upArrowBtn")&&t.childNodes[3].removeEventListener("click",i,!1),t.classList.contains("downArrowBtn")&&t.childNodes[4].removeEventListener("click",s,!1),t.classList.contains("rightArrowBtn")&&t.childNodes[5].removeEventListener("click",l,!1);var n=!0,r=" deleteBtn",c=" upArrowBtn",d=" downArrowBtn",v=" rightArrowBtn",u=" moveCursor",m="",b="";0===this.options.listType?(m=this.options.placeholder,0===e&&(c=" noUpArrowBtn"),this.items.length===e+1&&(d=" noDownArrowBtn")):1===this.options.listType&&(m=this.options.placeholders[1],b=e,0===e&&(n=!1,r=" noDeleteBtn",c=" noUpArrowBtn",d=" noDownArrowBtn",u="",m=this.options.placeholders[0],b=this.options.texts[0]),1===e&&(c=" noUpArrowBtn"),this.items.length-2===e&&(d=" noDownArrowBtn"),this.items.length-1===e&&(n=!1,r=" noDeleteBtn",c=" noUpArrowBtn",d=" noDownArrowBtn",u="",m=this.options.placeholders[2],b=this.options.texts[2]),v="");t.className="SortableListItem"+r+c+d+v+u,t.classList.contains("deleteBtn")&&t.childNodes[2].addEventListener("click",a,!1),t.classList.contains("upArrowBtn")&&t.childNodes[3].addEventListener("click",i,!1),t.classList.contains("downArrowBtn")&&t.childNodes[4].addEventListener("click",s,!1),t.classList.contains("rightArrowBtn")&&t.childNodes[5].addEventListener("click",l,!1),t.draggable&&t.removeEventListener("dragstart",o,!1),t.draggable=n,n&&t.addEventListener("dragstart",o,!1),t.firstChild.innerHTML=b,t.firstChild.nextSibling.placeholder=m}},this.removeItem=function(){this._setItemsClasses()},this.removeAllItems=function(){for(var e=0;e<this.items.length;e++)this.Container.removeChild(this.items[e]);this.items.length=0},this.moveItem=function(){this._setItemsClasses()},this.addItem=function(t,o){t=t||"",o=o||-1;var n=d.create("div",{draggable:!1},this.Container);return d.create("span",{className:"SortableListTextIndex"},n),d.create("input",{type:"text",className:"SortableListInput",value:t},n),d.create("span",{className:"SortableListDeleteBtn",innerHTML:"&#x1f5d1;"},n),d.create("span",{className:"SortableListUpArrowBtn",innerHTML:String.fromCharCode(8679)},n),d.create("span",{className:"SortableListDownArrowBtn",innerHTML:String.fromCharCode(8681)},n),0===this.options.listType&&d.create("span",{className:"SortableListRightArrowBtn",innerHTML:String.fromCharCode(8688)},n),n.dataObjId=o,n.UIObjId=e("./ObjId")(),this.items.push(n),this._setItemsClasses(),n.UIObjId},this._create=function(e,t){this.options={minSize:2,listType:0,placeholder:"",placeholders:[],texts:[]};for(var o in e)this.options[o]=e[o];this.Container=d.create("div",{className:"SortableListContainer"}),this.Container.addEventListener("dragover",n,!1),this.Container.addEventListener("drop",r,!1),t&&t.appendChild(this.Container);for(var a=0;a<this.options.minSize;a++)this.addItem()},this._create(t,c)};void 0!==t&&t.exports&&(t.exports=function(e,t){return new c(e,t)})}()},{"./HTMLElementsFactory":2,"./ObjId":6}],9:[function(e,t,o){!function(){"use strict";var o="TravelData",n="1.0.0",r="",a=[],i=-1,s=[];void 0!==t&&t.exports&&(t.exports=function(){return{clear:function(){for(var e=0;e<a.length;e++)s.push(a[e]);this.object={name:"",routes:[{name:"",wayPoints:[{name:"",lat:0,lng:0,objId:-1,objName:"WayPoint",objVersion:"1.0.0"},{name:"",lat:0,lng:0,objId:-1,objName:"WayPoint",objVersion:"1.0.0"}],geom:{pnts:"",precision:6,color:"#000000",weight:"5",objId:-1,objName:"Geom",objVersion:"1.0.0"},objId:-1,objName:"Route",objVersion:"1.0.0"}],objId:-1,objName:"TravelData",objVersion:"1.0.0"}},removeAllRoutes:function(){for(var e=0;e<a.length;e++)s.push(a[e]);a.length=0,console.log(s)},addRoute:function(t){var o=e("./Route")();o.uiObjId=t,console.log(t),console.log(o.uiObjId),a.push(o),console.log(a)},get routes(){return a},get objId(){return i},get objName(){return o},get objVersion(){return n},get object(){for(var e=[],t=0;t<a.length;t++)e.push(a[t].object);return{name:r,routes:a,objId:i,objName:o,objVersion:n}},set object(t){if(!t.objVersion)throw"No ObjVersion for TravelData";if("1.0.0"!==t.objVersion)throw"invalid objVersion for TravelData";if(!t.objName)throw"No objName for TravelData";if("TravelData"!==t.objName)throw"Invalid objName for TravelData";r=t.name||"",a.length=0;for(var o=0;o<t.routes.length;o++){var n=e("./Route")();n.object=t.routes[o],a.push(n)}i=e("./ObjId")()}}})}()},{"./ObjId":6,"./Route":7}],10:[function(e,t,o){!function(){"use strict";var o="WayPoint",n="1.0.0";void 0!==t&&t.exports&&(t.exports=function(){var t="",r=0,a=0,i=-1;return{get name(){return t},set name(e){t=e},get lat(){return r},set lat(e){r=e},get lng(){return a},set lng(e){a=e},get latLng(){return[r,a]},set latLng(e){r=e[0],a=e[1]},get objId(){return i},get objName(){return o},get objVersion(){return n},get object(){return{name:t,lat:r,lng:a,objId:i,objName:o,objVersion:n}},set object(o){if(!o.objVersion)throw"No ObjVersion for WayPoint";if("1.0.0"!==o.objVersion)throw"invalid objVersion for WayPoint";if(!o.objName)throw"No objName for WayPoint";if("WayPoint"!==o.objName)throw"Invalid objName for WayPoint";t=o.name||"",r=o.lat||0,a=o.lng||0,i=e("./ObjId")()}}})}()},{"./ObjId":6}]},{},[5]);